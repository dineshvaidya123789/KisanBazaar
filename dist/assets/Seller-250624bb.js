import{d as le,u as ae,j as e,r as c,e as Be,f as Ee,s as de,b as De,h as Re,R as re,L as oe,_ as se,i as ne}from"./index-e04eb9d8.js";import{L as Ne}from"./LocationSelector-d619b197.js";const Le=({show:j,onClose:C,type:L="Sell"})=>{const g=le(),{t:x}=ae();return j?e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.85)",zIndex:3e3,display:"flex",justifyContent:"center",alignItems:"center",padding:"1rem",animation:"fadeIn 0.3s ease-in"},children:e.jsxs("div",{className:"card fade-in",style:{maxWidth:"500px",width:"100%",textAlign:"center",padding:"2.5rem 2rem",position:"relative"},children:[e.jsx("div",{style:{width:"80px",height:"80px",margin:"0 auto 1.5rem",borderRadius:"50%",background:"linear-gradient(135deg, #2E7D32 0%, #4CAF50 100%)",display:"flex",alignItems:"center",justifyContent:"center",animation:"scaleIn 0.5s ease-out"},children:e.jsx("svg",{width:"50",height:"50",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})})}),e.jsx("h2",{style:{color:"#2E7D32",marginBottom:"0.5rem",fontSize:"1.8rem",fontWeight:"bold"},children:x("success_title")}),e.jsx("p",{style:{color:"#666",fontSize:"1rem",marginBottom:"2rem",lineHeight:"1.6"},children:x("success_msg")}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[e.jsx("button",{onClick:()=>{C(),g("/my-products")},style:{padding:"1rem 1.5rem",fontSize:"1.1rem",fontWeight:"bold",backgroundColor:"#2E7D32",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s",boxShadow:"0 4px 12px rgba(46, 125, 50, 0.3)"},onMouseOver:f=>f.target.style.backgroundColor="#1B5E20",onMouseOut:f=>f.target.style.backgroundColor="#2E7D32",children:x("view_my_listings")}),e.jsx("button",{onClick:()=>{C(),g("/")},style:{padding:"1rem 1.5rem",fontSize:"1rem",fontWeight:"500",backgroundColor:"white",color:"#2E7D32",border:"2px solid #2E7D32",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s"},onMouseOver:f=>{f.target.style.backgroundColor="#f1f8f4"},onMouseOut:f=>{f.target.style.backgroundColor="white"},children:x("return_home")})]}),e.jsx("style",{children:`
                    @keyframes fadeIn {
                        from { opacity: 0; }
                        to { opacity: 1; }
                    }
                    @keyframes scaleIn {
                        from { transform: scale(0); }
                        to { transform: scale(1); }
                    }
                `})]})}):null},ze=({commodity:j,district:C,enteredPrice:L,priceUnit:g})=>{const[x,f]=c.useState(null),[i,d]=c.useState(null),[B,E]=c.useState(!1);if(c.useEffect(()=>{if(!j){f(null);return}let n=Be(C||"").find(l=>l.name.toLowerCase().includes(j.toLowerCase())||j.toLowerCase().includes(l.name.split(" ")[0].toLowerCase()));if(n)f(n),E(!1);else{const l=Ee.find(w=>w.name.toLowerCase().includes(j.toLowerCase())||j.toLowerCase().includes(w.name.split(" ")[0].toLowerCase()));l?(f({...l,min:l.basePrice-200,max:l.basePrice+200,modal:l.basePrice}),E(!0)):f(null)}},[j,C]),c.useEffect(()=>{if(!x||!L||!g){d(null);return}const y=parseFloat(L);if(isNaN(y))return;let{min:D,max:n}=x,l=D,w=n;g==="Kg"?(l=D/100,w=n/100):g==="Ton"&&(l=D*10,w=n*10),y<l*.8?d({type:"warning",color:"#E65100",bg:"#FFF3E0",icon:"ðŸ“‰",message:"Price is much lower than market rates. You might be undervaluing your produce.",hindiMessage:"à¤®à¥‚à¤²à¥à¤¯ à¤¬à¤¾à¤œà¤¾à¤° à¤­à¤¾à¤µ à¤¸à¥‡ à¤¬à¤¹à¥à¤¤ à¤•à¤® à¤¹à¥ˆà¥¤ à¤†à¤ª à¤…à¤ªà¤¨à¥€ à¤‰à¤ªà¤œ à¤•à¤¾ à¤•à¤® à¤®à¥‚à¤²à¥à¤¯à¤¾à¤‚à¤•à¤¨ à¤•à¤° à¤°à¤¹à¥‡ à¤¹à¥ˆà¤‚à¥¤"}):y>w*1.3?d({type:"caution",color:"#C62828",bg:"#FFEBEE",icon:"ðŸ“ˆ",message:"Price is significantly higher than market rates. Buyers may not be interested.",hindiMessage:"à¤®à¥‚à¤²à¥à¤¯ à¤¬à¤¾à¤œà¤¾à¤° à¤­à¤¾à¤µ à¤¸à¥‡ à¤•à¤¾à¤«à¥€ à¤…à¤§à¤¿à¤• à¤¹à¥ˆà¥¤ à¤–à¤°à¥€à¤¦à¤¾à¤° à¤°à¥à¤šà¤¿ à¤¨à¤¹à¥€à¤‚ à¤²à¥‡ à¤¸à¤•à¤¤à¥‡ à¤¹à¥ˆà¤‚à¥¤"}):y>=l&&y<=w?d({type:"good",color:"#2E7D32",bg:"#E8F5E9",icon:"âœ…",message:"Perfect! This is a competitive market price.",hindiMessage:"à¤¸à¤¹à¥€ à¤¹à¥ˆ! à¤¯à¤¹ à¤à¤• à¤ªà¥à¤°à¤¤à¤¿à¤¸à¥à¤ªà¤°à¥à¤§à¥€ à¤¬à¤¾à¤œà¤¾à¤° à¤®à¥‚à¤²à¥à¤¯ à¤¹à¥ˆà¥¤"}):d({type:"neutral",color:"#1565C0",bg:"#E3F2FD",icon:"â„¹ï¸",message:"Price is reasonable.",hindiMessage:"à¤®à¥‚à¤²à¥à¤¯ à¤‰à¤šà¤¿à¤¤ à¤¹à¥ˆà¥¤"})},[x,L,g]),!x)return e.jsxs("div",{className:"fade-in",style:{marginTop:"10px",padding:"12px",borderRadius:"8px",border:"1px solid #ddd",backgroundColor:"#f8f9fa",color:"#666",fontSize:"0.9rem",textAlign:"center"},children:["Requires more market data for ",e.jsx("strong",{children:j}),".",e.jsx("br",{}),e.jsx("span",{style:{fontSize:"0.8rem"},children:"Please set your price competitively based on local trends."})]});const M=y=>g==="Kg"?(y/100).toFixed(1):g==="Ton"?(y*10).toFixed(0):y;return e.jsxs("div",{className:"fade-in",style:{marginTop:"10px",padding:"12px",borderRadius:"8px",border:"1px solid #ddd",backgroundColor:"white",boxShadow:"0 2px 4px rgba(0,0,0,0.05)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[e.jsxs("strong",{style:{color:"#555",fontSize:"0.9rem"},children:["ðŸ“Š ",B?"Est. Market Rate":`Market Rate in ${C}`," (",B?"à¤…à¤¨à¥à¤®à¤¾à¤¨à¤¿à¤¤ à¤¦à¤°":"à¤¬à¤¾à¤œà¤¾à¤° à¤­à¤¾à¤µ","):"]}),e.jsxs("span",{style:{backgroundColor:"#f5f5f5",padding:"4px 8px",borderRadius:"4px",fontWeight:"bold",fontSize:"0.9rem"},children:["â‚¹",M(x.min)," - â‚¹",M(x.max)," / ",g||"Quintal"]})]}),i&&e.jsxs("div",{style:{backgroundColor:i.bg,color:i.color,padding:"10px",borderRadius:"6px",fontSize:"0.9rem",display:"flex",gap:"10px",alignItems:"start"},children:[e.jsx("span",{style:{fontSize:"1.2rem"},children:i.icon}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold"},children:i.message}),e.jsx("div",{style:{opacity:.9},children:i.hindiMessage})]})]})]})},Me=({value:j,onChange:C,onSelect:L})=>{const[g,x]=c.useState([]),[f,i]=c.useState(!1),[d,B]=c.useState(-1),E=c.useRef(null);c.useEffect(()=>{const n=l=>{E.current&&!E.current.contains(l.target)&&i(!1)};return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[]);const M=n=>{const l=n.target.value;if(C(n),l.length>=1){const w=de(l);x(w),i(w.length>0),B(-1)}else x([]),i(!1)},y=n=>{L(n),i(!1),x([])},D=n=>{if(f)switch(n.key){case"ArrowDown":n.preventDefault(),B(l=>l<g.length-1?l+1:l);break;case"ArrowUp":n.preventDefault(),B(l=>l>0?l-1:-1);break;case"Enter":n.preventDefault(),d>=0&&d<g.length&&y(g[d]);break;case"Escape":i(!1);break}};return e.jsxs("div",{ref:E,style:{position:"relative",width:"100%"},children:[e.jsx("input",{type:"text",value:j,onChange:M,onKeyDown:D,onFocus:()=>{g.length>0&&i(!0)},placeholder:"Type: Tomato, à¤Ÿà¤®à¤¾à¤Ÿà¤°, à¤Ÿà¥‹à¤®à¥…à¤Ÿà¥‹...",className:"premium-input",required:!0}),f&&g.length>0&&e.jsx("div",{className:"fade-in",style:{position:"absolute",top:"100%",left:0,right:0,backgroundColor:"white",border:"2px solid var(--color-primary)",borderRadius:"var(--radius-md)",marginTop:"4px",maxHeight:"280px",overflowY:"auto",boxShadow:"var(--shadow-lg)",zIndex:1e3},children:g.map((n,l)=>e.jsxs("div",{onClick:()=>y(n),onMouseEnter:()=>B(l),style:{padding:"12px 16px",cursor:"pointer",backgroundColor:d===l?"#f0f9ff":"white",borderBottom:l<g.length-1?"1px solid #f1f5f9":"none",transition:"background-color 0.15s",display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("span",{style:{fontSize:"1.5rem"},children:n.icon}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:"600",color:"#1e293b",marginBottom:"2px"},children:n.en}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"#64748b"},children:[n.hi," â€¢ ",n.mr]})]}),e.jsx("div",{style:{fontSize:"0.75rem",padding:"3px 8px",borderRadius:"12px",backgroundColor:"#e0f2fe",color:"#0369a1",fontWeight:"600"},children:n.category})]},n.id))})]})},We=()=>{const{addListing:j,updateListing:C,checkListingEligibility:L}=De(),g=le(),x=Re(),{language:f,t:i}=ae(),[d,B]=c.useState(!1),[E,M]=c.useState(null),[y,D]=c.useState(!1),[n,l]=c.useState(""),[w,qe]=c.useState(""),[_,H]=c.useState(""),[J,ce]=c.useState(""),[pe,me]=c.useState(!1),[ue,K]=c.useState(!1),[P,X]=c.useState({}),[Q,$]=c.useState(!1),Z=re.useRef(null),V=re.useRef(null),[t,S]=c.useState(()=>{const o=new URLSearchParams(window.location.search).get("type");return{type:o==="Buy"||o==="Sell"?o:"Sell",commodity:"",commodityId:"",quantity:"",unit:"",pricingMode:"market",targetPrice:"",priceUnit:"",state:"",district:"",tehsil:"",quality:"",comments:"",isOrganic:!1,isGraded:!1,isPacked:!1,images:[]}}),[O,ge]=c.useState(!1),[T,U]=c.useState(!1),[ee,he]=c.useState(!1),xe=()=>{var r,o,m;if(!n){(r=Z.current)==null||r.focus();return}if(!_){(o=V.current)==null||o.focus();return}if(!/^\d{10}$/.test(_)){(m=V.current)==null||m.focus();return}me(!0),alert(`Hello ${n}! ${i("otp_sent")} ${_}: 1234`)},[fe,G]=c.useState(!1),ye=()=>{J==="1234"?(D(!0),localStorage.setItem("kisan_user_mobile",_),localStorage.setItem("kisan_user_name",n)):alert(i("invalid_otp"))};c.useEffect(()=>{const r=localStorage.getItem("kisan_user_mobile"),o=localStorage.getItem("kisan_user_name");r&&o&&(H(r),l(o),D(!0));const m=localStorage.getItem("edit_listing");if(m){const s=JSON.parse(m);B(!0),M(s.id),S({type:s.type,commodity:s.commodity,commodityId:s.commodityId||s.commodity,quantity:s.quantity,unit:s.unit,targetPrice:s.targetPrice,priceUnit:s.priceUnit,state:s.state,district:s.district,tehsil:s.tehsil||"",quality:s.quality,pricingMode:s.pricingMode||(s.targetPrice?"fixed":"market"),comments:s.comments,isOrganic:s.isOrganic||!1,isGraded:s.isGraded||!1,isPacked:s.isPacked||!1,images:s.images||(s.image?[s.image]:[])}),localStorage.removeItem("edit_listing")}else{const u=new URLSearchParams(x.search).get("type");u&&(u==="Buy"||u==="Sell")&&S(a=>({...a,type:u}))}},[x.search]);const R=r=>{const{name:o,value:m,type:s,checked:u}=r.target;S(a=>({...a,[o]:s==="checkbox"?u:m})),P[o]&&X(a=>({...a,[o]:!1}))},te=r=>{d||t.type!==r&&S(o=>({...o,type:r,commodity:"",commodityId:"",quantity:"",unit:"",targetPrice:"",priceUnit:"",quality:"",description:"",isOrganic:!1,isGraded:!1,isPacked:!1,pricingMode:"market"}))},be=r=>{S(o=>({...o,state:r.state,district:r.district,tehsil:r.tehsil}))},ve=()=>{if(!navigator.geolocation){alert(i("geolocation_unsupported"));return}U(!0),navigator.geolocation.getCurrentPosition(async r=>{const{latitude:o,longitude:m}=r.coords;try{const s=await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${o}&lon=${m}&zoom=10`,{headers:{"Accept-Language":"en-US,en;q=0.9","User-Agent":"KisanBazaar-Mobile-App"}});if(!s.ok)throw new Error("Network error");const u=await s.json();if(u&&u.address){const a=u.address,b=a.state||"",h=a.city||a.district||a.county||a.state_district||"",p=a.suburb||a.town||a.village||a.neighbourhood||a.city_district||"";console.log("ðŸ” Nominatim API Response:",{detectedState:b,detectedDistrict:h,detectedTehsil:p,fullAddress:a});const{getCityToDistrict:v}=await se(()=>import("./locationMapping-e858de36.js"),[]),{getStates:W,getDistricts:_e,getTehsils:Ie}=await se(()=>import("./index-e04eb9d8.js").then(I=>I.z),["assets/index-e04eb9d8.js","assets/index-a019cad9.css"]),ie=W();let A=v(h);A!==h&&console.log(`ðŸ”„ Mapped city "${h}" to district "${A}"`);let N=ie.find(I=>I.toLowerCase()===b.toLowerCase())||"";console.log("ðŸ›ï¸ State Matching:",{detectedState:b,matchedState:N,availableStates:ie.slice(0,5)+"..."});let k="",q="";if(N){const I=_e(N);if(console.log("ðŸ™ï¸ Available Districts for",N,":",I),k=I.find(z=>z.toLowerCase()===A.toLowerCase()),k||(k=I.find(z=>z.toLowerCase().includes(A.toLowerCase())||A.toLowerCase().includes(z.toLowerCase()))||""),console.log("ðŸ™ï¸ District Matching:",{detectedDistrict:h,matchedDistrict:k,availableCount:I.length}),k){const z=Ie(N,k);console.log("ðŸ˜ï¸ Available Tehsils for",k,":",z),q=z.find(Y=>Y.toLowerCase()===p.toLowerCase()||Y.toLowerCase().includes(p.toLowerCase())||p.toLowerCase().includes(Y.toLowerCase()))||"",console.log("ðŸ˜ï¸ Tehsil Matching:",{detectedTehsil:p,matchedTehsil:q,availableCount:z.length})}}console.log("âœ… Final Matched Values:",{state:N,district:k,tehsil:q}),S(I=>({...I,state:N,district:k,tehsil:q})),U(!1);const F=[];q&&F.push(q),k&&F.push(k),N&&F.push(N),F.length>0?alert(`ðŸ“ ${i("location_detected")}: ${F.join(", ")}

${i("manual_select")}`):alert(`ðŸ“ ${i("location_detect_failed")}

${i("manual_select")}`)}else throw new Error("Address not found")}catch(s){U(!1),alert(i("manual_select")),console.error("Reverse Geocoding error:",s)}},r=>{U(!1);let o=i("location_detect_error");r.code===1&&(o=i("location_permission_denied")),r.code===3&&(o=i("location_timeout")),alert(o),console.error("Geolocation error:",r)},{timeout:15e3,enableHighAccuracy:!0})},je=r=>new Promise(o=>{const m=new FileReader;m.readAsDataURL(r),m.onload=s=>{const u=new Image;u.src=s.target.result,u.onload=()=>{const a=document.createElement("canvas");let b=u.width,h=u.height;const p=800;b>h?b>p&&(h*=p/b,b=p):h>p&&(b*=p/h,h=p),a.width=b,a.height=h,a.getContext("2d").drawImage(u,0,0,b,h);const W=a.toDataURL("image/jpeg",.7);o(W)}}}),we=r=>{const o=ne(r.id);S(m=>({...m,commodity:r.en,commodityId:r.id,unit:o,priceUnit:o}))},Se=()=>t.unit==="Kg"?[50,100,200,500,1e3]:t.unit==="Quintal"?[10,20,50,100]:t.unit==="Ton"?[1,5,10,20]:[10,50,100],ke=r=>{var o,m,s,u,a,b;if(r.preventDefault(),!t.state){(o=document.getElementsByName("state")[0])==null||o.focus();return}if(!t.commodityId)if(t.commodity){const p=de(t.commodity).find(v=>v.en.toLowerCase()===t.commodity.toLowerCase().trim()||v.hi===t.commodity.trim()||v.mr===t.commodity.trim());if(p)if(t.commodityId=p.id,t.commodity=p.en,t.unit)S(v=>({...v,commodityId:p.id,commodity:p.en}));else{const v=ne(p.id);S(W=>({...W,commodityId:p.id,commodity:p.en,unit:v})),t.unit=v}else{alert(i("invalid_commodity")||"Please select a valid crop from the suggestions");const v=document.querySelectorAll('input[placeholder*="Type: Tomato"]');v.length>0&&v[0].focus();return}}else{const h=document.querySelectorAll('input[placeholder*="Type: Tomato"]');h.length>0&&h[0].focus();return}if(!t.district){(m=document.getElementsByName("district")[0])==null||m.focus();return}if(t.type==="Sell"){if(!t.quality){X(p=>({...p,quality:!0})),alert(i("quality_required")||"Please select a quality grade");const h=document.getElementById("quality-options-container");h&&h.scrollIntoView({behavior:"smooth",block:"center"});return}if(t.pricingMode==="fixed"&&(!t.targetPrice||Number(t.targetPrice)<=0)){(s=document.getElementsByName("targetPrice")[0])==null||s.focus();return}if(t.pricingMode==="fixed"&&!t.priceUnit){(u=document.getElementsByName("priceUnit")[0])==null||u.focus();return}}if(!t.unit){(a=document.getElementsByName("unit")[0])==null||a.focus();return}if(Number(t.quantity)<=0){(b=document.getElementsByName("quantity")[0])==null||b.focus();return}G(!0)},Ce=()=>{if(console.log("Seller: confirmSubmit called"),Q){console.log("Seller: Already submitting, ignoring click");return}$(!0);try{console.log("Seller: Checking eligibility for",_,t.commodity);const r=L(_,t.commodity,d?E:null);if(console.log("Seller: Eligibility result:",r),!r.eligible){alert(r.message),G(!1),$(!1);return}G(!1),console.log("Seller: Proceeding with submission..."),setTimeout(()=>{try{if(d){const o={...t,seller:`${n} ${w}`,contactMobile:_,timestamp:new Date().toISOString()};C(E,o),K(!0)}else{const o={...t,seller:`${n} ${w}`,contactMobile:_,timestamp:new Date().toISOString()};j(o),K(!0)}}catch(o){console.error("Seller: Error in setTimeout submission:",o),alert(i("error_general"))}finally{$(!1)}},500)}catch(r){console.error("Seller: Error in confirmSubmit:",r),alert(i("error_general")),$(!1)}};return y?e.jsxs("div",{style:{background:"linear-gradient(rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.95)), url('/images/seller_bg.png') center/cover no-repeat fixed",minHeight:"90vh",padding:"var(--spacing-xl) 0"},children:[e.jsxs("div",{className:"container fade-in",style:{maxWidth:"800px"},children:[e.jsxs(oe,{to:"/",style:{display:"inline-flex",alignItems:"center",marginBottom:"1rem",color:"#666",textDecoration:"none",fontWeight:"500",fontSize:"0.95rem"},children:["â† ",i("back_to_home")]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"var(--spacing-lg)",borderBottom:"2px solid var(--color-primary)",paddingBottom:"0.8rem"},children:[e.jsx("h2",{style:{margin:0,color:"var(--color-primary)",fontSize:"1.5rem"},children:d?t.type==="Buy"?i("update")+" "+i("buy"):i("update")+" "+i("sell"):t.type==="Buy"?i("i_want_buy"):i("list_product")}),e.jsx("span",{style:{padding:"4px 12px",borderRadius:"20px",backgroundColor:t.type==="Buy"?"#FFEBEE":"#E8F5E9",color:t.type==="Buy"?"#D32F2F":"#2E7D32",fontWeight:"bold",fontSize:"0.85rem",border:`1px solid ${t.type==="Buy"?"#FFCDD2":"#C8E6C9"}`},children:t.type==="Buy"?"ðŸ›’ "+i("buyer").toUpperCase():"ðŸšœ "+i("seller").toUpperCase()})]}),e.jsx("div",{className:"glass-card",style:{padding:"2.5rem"},children:e.jsxs("form",{onSubmit:ke,style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{className:"premium-label",children:[i("buy_sell_prompt")," ",e.jsx("span",{style:{color:"var(--color-error)"},children:"*"})]}),e.jsxs("div",{className:"toggle-container",style:{position:"relative",opacity:d?.8:1},children:[e.jsx("div",{style:{position:"absolute",top:0,left:t.type==="Buy"?0:"50%",width:"50%",height:"100%",background:t.type==="Buy"?"linear-gradient(135deg, #DC2626 0%, #EF4444 100%)":"linear-gradient(135deg, #059669 0%, #10b981 100%)",borderRadius:"var(--radius-xl)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"}}),e.jsxs("button",{type:"button",onClick:()=>te("Buy"),disabled:d,className:`toggle-btn ${t.type==="Buy"?"active":""}`,style:{padding:"0.75rem 1rem",cursor:d?"not-allowed":"pointer",color:d&&t.type==="Buy"?"white":void 0},children:[d&&t.type==="Buy"&&"ðŸ”’ ","ðŸ›’ ",i("buy")]}),e.jsxs("button",{type:"button",onClick:()=>te("Sell"),disabled:d,className:`toggle-btn ${t.type==="Sell"?"active":""}`,style:{padding:"0.75rem 1rem",cursor:d?"not-allowed":"pointer",color:d&&t.type==="Sell"?"white":void 0},children:[d&&t.type==="Sell"&&"ðŸ”’ ","ðŸšœ ",i("sell")]})]}),d&&e.jsx("div",{style:{fontSize:"0.8rem",color:"#666",marginTop:"4px",textAlign:"center",fontStyle:"italic"},children:i("listing_type_locked")})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"premium-label",children:[i("commodity")," ",e.jsx("span",{style:{color:"var(--color-error)"},children:"*"})]}),e.jsx(Me,{value:t.commodity,onChange:r=>R({target:{name:"commodity",value:r.target.value}}),onSelect:we}),t.commodityId&&e.jsxs("div",{style:{marginTop:"8px",fontSize:"0.85rem",color:"var(--color-success)",display:"flex",alignItems:"center",gap:"6px"},children:["âœ“ ",i("recommended_unit"),": ",e.jsx("strong",{children:t.unit})]})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#333",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[i("quantity")," *"]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"stretch"},children:[e.jsx("div",{style:{flex:1,position:"relative"},children:e.jsx("input",{type:"text",name:"quantity",required:!0,placeholder:"e.g. 100",value:t.quantity,onChange:r=>{let o=r.target.value.replace(/[^0-9]/g,"");o.length>1&&o.startsWith("0")&&(o=o.replace(/^0+/,"")),R({target:{name:"quantity",value:o}})},style:{width:"100%",padding:"0.8rem",borderRadius:"4px",border:"1px solid #ccc",height:"100%"},min:"1"})}),e.jsxs("select",{name:"unit",value:t.unit,onChange:R,required:!0,style:{width:"140px",padding:"0.8rem",borderRadius:"4px",border:"1px solid #ccc",fontSize:"0.95rem",backgroundColor:"#f9fafb"},children:[e.jsx("option",{value:"",children:"Unit (à¤‡à¤•à¤¾à¤ˆ)"}),e.jsx("option",{value:"Quintal",children:"Quintal"}),e.jsx("option",{value:"Ton",children:"Ton"}),e.jsx("option",{value:"Kg",children:"Kg"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"8px",flexWrap:"wrap",alignItems:"center"},children:[e.jsxs("span",{style:{fontSize:"0.8rem",color:"#666",marginRight:"4px"},children:[i("quick_pick"),":"]}),e.jsx("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap",flex:1},children:Se().map(r=>e.jsxs("button",{type:"button",onClick:()=>R({target:{name:"quantity",value:r.toString()}}),style:{padding:"4px 10px",borderRadius:"16px",border:"1px solid #e5e7eb",background:t.quantity===r.toString()?"#e0f2fe":"white",color:t.quantity===r.toString()?"#0284c7":"#4b5563",fontSize:"0.85rem",cursor:"pointer",fontWeight:"500",whiteSpace:"nowrap",flex:"1 0 auto",maxWidth:"fit-content"},children:["+",r]},r))})]})]}),t.type==="Sell"&&e.jsxs("div",{className:"slide-in",children:[e.jsxs("label",{className:"premium-label",children:[i("price")," ",e.jsx("span",{style:{color:"var(--color-error)"},children:"*"})]}),e.jsxs("div",{className:"pricing-mode-container",style:{display:"flex",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{className:`pricing-option ${t.pricingMode==="fixed"?"active":""}`,onClick:()=>S({...t,pricingMode:"fixed"}),style:{flex:1,padding:"1rem",border:`2px solid ${t.pricingMode==="fixed"?"var(--color-primary)":"#eee"}`,borderRadius:"var(--radius-md)",cursor:"pointer",backgroundColor:t.pricingMode==="fixed"?"#f0fdf4":"white",transition:"all 0.2s",textAlign:"center"},children:[e.jsx("span",{style:{fontSize:"1.2rem",display:"block",marginBottom:"4px"},children:"ðŸ·ï¸"}),e.jsx("div",{style:{fontWeight:"600",color:"var(--color-text)"},children:i("fixed_price")})]}),e.jsxs("div",{className:`pricing-option ${t.pricingMode==="market"?"active":""}`,onClick:()=>S({...t,pricingMode:"market"}),style:{flex:1,padding:"1rem",border:`2px solid ${t.pricingMode==="market"?"var(--color-secondary)":"#eee"}`,borderRadius:"var(--radius-md)",cursor:"pointer",backgroundColor:t.pricingMode==="market"?"#fff7ed":"white",transition:"all 0.2s",textAlign:"center"},children:[e.jsx("span",{style:{fontSize:"1.2rem",display:"block",marginBottom:"4px"},children:"ðŸ“ˆ"}),e.jsx("div",{style:{fontWeight:"600",color:"var(--color-text)"},children:i("best_market_price")})]})]}),t.pricingMode==="fixed"&&e.jsxs("div",{className:"fade-in",style:{display:"flex",gap:"1rem",alignItems:"stretch"},children:[e.jsx("div",{style:{flex:1,position:"relative"},children:e.jsx("input",{type:"text",name:"targetPrice",placeholder:"Enter price",value:t.targetPrice,onChange:r=>{const o=r.target.value.replace(/[^0-9]/g,"");R({target:{name:"targetPrice",value:o}})},className:"premium-input",style:{width:"100%",height:"100%",minHeight:"48px"},required:!0})}),e.jsxs("select",{name:"priceUnit",value:t.priceUnit,onChange:R,className:"premium-select",style:{width:"140px",minHeight:"48px"},required:!0,children:[e.jsx("option",{value:"",children:"Unit"}),e.jsx("option",{value:"Quintal",children:"Quintal"}),e.jsx("option",{value:"Ton",children:"Ton"}),e.jsx("option",{value:"Kg",children:"Kg"})]})]}),t.type==="Sell"&&t.pricingMode==="market"&&e.jsx("div",{className:"fade-in",children:e.jsx(ze,{commodity:t.commodity,district:t.district,enteredPrice:null,priceUnit:t.priceUnit})})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[e.jsxs("label",{className:"premium-label",style:{marginBottom:0},children:["ðŸ“ ",i("location")," ",e.jsx("span",{style:{color:"var(--color-error)"},children:"*"})]}),e.jsx("button",{type:"button",onClick:ve,disabled:T,style:{padding:"6px 12px",fontSize:"0.8rem",backgroundColor:T?"#e5e7eb":"#dcfce7",color:T?"#6b7280":"#166534",border:"1px solid #86efac",borderRadius:"20px",cursor:T?"not-allowed":"pointer",fontWeight:"600",transition:"all 0.2s"},children:T?"ðŸ”„ Detecting...":"ðŸŽ¯ Auto-detect"})]}),e.jsx(Ne,{selectedState:t.state,selectedDistrict:t.district,selectedTehsil:t.tehsil,onLocationChange:be,showTehsil:!0,vertical:!1})]}),t.type==="Sell"&&e.jsxs("div",{className:"slide-in",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[e.jsxs("label",{className:"premium-label",style:{marginBottom:0},id:"quality-section",children:[i("quality")," ",e.jsx("span",{style:{color:"var(--color-error)"},children:"*"})]}),e.jsx("button",{type:"button",onClick:()=>he(!ee),style:{background:"#e0f2fe",border:"1px solid #7dd3fc",borderRadius:"50%",width:"24px",height:"24px",cursor:"pointer",fontSize:"0.75rem",fontWeight:"bold",color:"#0369a1",display:"flex",alignItems:"center",justifyContent:"center"},title:"Click for quality guide",children:"â„¹ï¸"})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"12px",padding:P.quality?"10px":"0",border:P.quality?"2px solid #ef4444":"none",borderRadius:"var(--radius-md)",backgroundColor:P.quality?"#fef2f2":"transparent",transition:"all 0.3s"},id:"quality-options-container",children:[{value:"Premium",label:"Premium",labelHi:"à¤‰à¤¤à¥à¤¤à¤®",stars:"â­â­â­",color:"#4ade80"},{value:"Good",label:"Good",labelHi:"à¤…à¤šà¥à¤›à¤¾",stars:"â­â­",color:"#fbbf24"},{value:"Average",label:"Average",labelHi:"à¤¸à¤¾à¤®à¤¾à¤¨à¥à¤¯",stars:"â­",color:"#fb923c"}].map(r=>e.jsxs("label",{style:{padding:"16px 12px",border:`2px solid ${t.quality===r.value?"var(--color-primary)":"#e5e7eb"}`,borderRadius:"var(--radius-md)",cursor:"pointer",textAlign:"center",backgroundColor:t.quality===r.value?"#f0f9ff":"white",transition:"all 0.2s",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px"},children:[e.jsx("input",{type:"radio",name:"quality",value:r.value,checked:t.quality===r.value,onChange:R,required:!0,style:{display:"none"}}),e.jsx("div",{style:{fontSize:"1.5rem"},children:r.stars}),e.jsx("div",{style:{fontWeight:"600",fontSize:"0.9rem"},children:r.label}),e.jsx("div",{style:{fontSize:"0.8rem",color:"#6b7280"},children:r.labelHi})]},r.value))}),P.quality&&e.jsx("div",{style:{color:"#ef4444",fontSize:"0.8rem",marginTop:"4px",fontWeight:"bold"},children:i("quality_required")||"Please select a quality grade"}),ee&&e.jsxs("div",{className:"fade-in",style:{marginTop:"12px",padding:"12px",background:"#f9fafb",borderRadius:"var(--radius-md)",fontSize:"0.85rem",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontWeight:"600",marginBottom:"8px",color:"var(--color-primary)"},children:"Quality Guide:"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[e.jsxs("div",{children:["â­â­â­ ",e.jsx("strong",{children:"Premium:"})," Perfect size, uniform, bright color, no defects"]}),e.jsxs("div",{children:["â­â­ ",e.jsx("strong",{children:"Good:"})," Good quality, minor flaws, small spots"]}),e.jsxs("div",{children:["â­ ",e.jsx("strong",{children:"Average:"})," Usable, irregular shape, smaller size"]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#333",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:i("comments")}),e.jsx("textarea",{name:"comments",rows:"3",placeholder:"I want to buy good quality commodity.",value:t.comments,onChange:R,style:{width:"100%",padding:"0.8rem",borderRadius:"4px",border:"1px solid #ccc"}})]}),t.type==="Sell"&&e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#333"},children:[i("upload_photos")," ",e.jsx("span",{style:{fontSize:"0.8rem",color:"#666"},children:i("photo_constraints")})]}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:async r=>{const o=Array.from(r.target.files);if((t.images||[]).length+o.length>3){alert(i("max_images_error"));return}for(const s of o){const u=await je(s);S(a=>({...a,images:[...a.images||[],u]}))}},style:{width:"100%",padding:"0.5rem",border:"1px solid #ccc",borderRadius:"4px",background:"white"}}),e.jsxs("div",{style:{marginTop:"8px",fontSize:"0.9rem",color:"var(--color-primary)",fontWeight:"600",display:"flex",alignItems:"center",gap:"6px",backgroundColor:"#E8F5E9",padding:"8px 12px",borderRadius:"8px",border:"1px solid #C8E6C9"},children:["ðŸ’¡ ",e.jsx("span",{children:i("photo_speed_tip")})]}),t.images&&t.images.length>0&&e.jsx("div",{style:{marginTop:"10px",display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(100px, 1fr))",gap:"10px"},children:t.images.map((r,o)=>e.jsxs("div",{style:{position:"relative"},children:[e.jsx("img",{src:r,alt:`Preview ${o}`,style:{width:"100%",height:"100px",objectFit:"cover",borderRadius:"4px",border:"1px solid #ddd"}}),e.jsx("button",{type:"button",onClick:()=>{const m=[...t.images];m.splice(o,1),S(s=>({...s,images:m}))},style:{position:"absolute",top:"-5px",right:"-5px",background:"#ff4444",color:"white",border:"none",borderRadius:"50%",width:"20px",height:"20px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px"},children:"âœ•"})]},o))})]}),t.type==="Sell"&&e.jsxs("div",{style:{marginTop:"0.5rem"},children:[e.jsxs("button",{type:"button",onClick:()=>ge(!O),style:{display:"flex",alignItems:"center",gap:"8px",background:"none",border:"none",color:"var(--color-primary)",fontWeight:"600",fontSize:"0.95rem",padding:"0",cursor:"pointer"},children:[e.jsx("span",{children:O?"âž–":"âž•"}),O?`${i("hide_advanced")}`:`${i("show_advanced")}`]}),O&&e.jsx("div",{className:"slide-in",style:{display:"flex",flexDirection:"column",gap:"1rem",marginTop:"1.2rem",padding:"1.2rem",backgroundColor:"#f8fafc",borderRadius:"var(--radius-md)",border:"1px solid #e2e8f0"},children:[{label:i("is_organic"),name:"isOrganic",icon:"ðŸƒ"},{label:i("is_graded"),name:"isGraded",icon:"ðŸ“"},{label:i("is_packed"),name:"isPacked",icon:"ðŸ’°"}].map(r=>e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"12px",cursor:"pointer",padding:"4px 0"},children:[e.jsx("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:e.jsx("input",{type:"checkbox",name:r.name,checked:t[r.name],onChange:R,style:{width:"22px",height:"22px",accentColor:"var(--color-primary)",cursor:"pointer"}})}),e.jsxs("span",{style:{color:"#334155",fontSize:"1rem",fontWeight:"500"},children:[e.jsx("span",{style:{marginRight:"8px"},children:r.icon}),r.label]})]},r.name))})]}),e.jsx("div",{style:{margin:"1rem 0",borderTop:"1px solid #eee"}}),e.jsx("p",{style:{color:"#666",marginBottom:"1rem"},children:i("contact_info")}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#333",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[i("contact_name")," ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{type:"text",value:n,onChange:r=>{l(r.target.value),localStorage.setItem("kisan_user_name",r.target.value)},style:{width:"100%",padding:"0.8rem",borderRadius:"4px",border:"1px solid #eee",background:"#fff"}})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#333",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[i("phone_number")," ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("span",{style:{padding:"0.8rem",background:"#eee",borderRadius:"4px"},children:"+91"}),e.jsx("input",{type:"tel",name:"contactPhone",placeholder:"9876543210",maxLength:"10",value:_,onChange:r=>{const o=r.target.value.replace(/\D/g,"").slice(0,10);H(o),localStorage.setItem("kisan_user_mobile",o)},style:{flex:1,padding:"0.8rem",borderRadius:"4px",border:"1px solid #eee",background:"#fff"}})]})]}),t.type==="Buy"&&e.jsxs("div",{style:{backgroundColor:"#E3F2FD",color:"#0D47A1",padding:"12px",borderRadius:"8px",marginBottom:"1rem",border:"1px solid #BBDEFB",fontSize:"0.95rem",display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("span",{style:{fontSize:"1.5rem"},children:"â„¹ï¸"}),e.jsxs("span",{children:[e.jsxs("strong",{children:[i("buyer_note_title"),":"]}),e.jsx("br",{}),i("buyer_note_desc")]})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",marginBottom:"1.5rem"},children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,style:{width:"18px",height:"18px"}}),e.jsx("span",{style:{color:"var(--color-primary)",fontWeight:"500",fontSize:"0.9rem"},children:i("agree_terms")})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[d&&e.jsxs("button",{type:"button",onClick:()=>{window.confirm(i("confirm_cancel"))&&g("/my-products")},className:"btn",style:{flex:1,padding:"1rem",fontSize:"1rem",fontWeight:"bold",backgroundColor:"#f1f5f9",color:"#475569",border:"1px solid #cbd5e1"},children:["âŒ ",i("cancel")]}),e.jsx("button",{type:"submit",className:"btn btn-primary",style:{flex:1,padding:"1rem",fontSize:"1.1rem"},children:d?`âœï¸ ${i("update")||"Update"}`:`ðŸ“¤ ${i("next")}`}),e.jsxs(oe,{to:"/",style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",textDecoration:"none",color:"#555",backgroundColor:"#fff",borderRadius:"4px",padding:"1rem",fontWeight:"bold",fontSize:"1.1rem",border:"1px solid #ccc"},children:["ðŸ  ",i("back_to_home")]})]})]})})]}),fe&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.8)",zIndex:2e3,display:"flex",justifyContent:"center",alignItems:"center",padding:"1rem"},children:e.jsxs("div",{className:"card fade-in",style:{maxWidth:"500px",width:"100%",maxHeight:"90vh",overflowY:"auto"},children:[e.jsx("h3",{style:{borderBottom:"1px solid #eee",paddingBottom:"10px",marginBottom:"1rem",color:"var(--color-primary)"},children:i("confirm_details_title")}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",fontSize:"0.95rem",marginBottom:"1.5rem"},children:[e.jsxs("strong",{style:{color:"#666"},children:[i("type_label"),":"]}),e.jsx("span",{style:{fontWeight:"bold",color:t.type==="Buy"?"#D32F2F":"#2E7D32"},children:t.type==="Buy"?i("want_to_buy"):i("want_to_sell")}),e.jsxs("strong",{style:{color:"#666"},children:[i("commodity"),":"]}),e.jsx("span",{children:t.commodity}),e.jsxs("strong",{style:{color:"#666"},children:[i("quantity"),":"]}),e.jsxs("span",{children:[t.quantity," ",t.unit]}),e.jsxs("strong",{style:{color:"#666"},children:[i("price"),":"]}),e.jsxs("span",{children:["â‚¹",t.targetPrice," / ",t.priceUnit]}),e.jsxs("strong",{style:{color:"#666"},children:[i("location"),":"]}),e.jsxs("span",{children:[t.district,", ",t.state]})]}),e.jsx("p",{style:{fontSize:"0.9rem",color:"#666",fontStyle:"italic",marginBottom:"1.5rem",background:"#f9f9f9",padding:"10px",borderRadius:"4px"},children:i("verify_warning")}),e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsx("button",{onClick:()=>G(!1),className:"btn btn-outline",style:{flex:1},children:i("verify_edit")}),e.jsx("button",{onClick:Ce,className:"btn btn-primary",style:{flex:1,opacity:Q?.7:1},disabled:Q,children:i("confirm_post")})]})]})}),e.jsx(Le,{show:ue,onClose:()=>K(!1),type:t.type})]}):e.jsxs("div",{className:"container fade-in",style:{padding:"var(--spacing-xl) 0",maxWidth:"500px"},children:[e.jsx("h1",{style:{marginBottom:"var(--spacing-lg)",textAlign:"center"},children:t.type==="Buy"?i("i_want_buy"):i("list_product")}),e.jsxs("div",{className:"card",style:{padding:"2rem"},children:[e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:[i("contact_name")," *"]}),e.jsx("input",{ref:Z,type:"text",placeholder:i("placeholder_name"),value:n,onChange:r=>{/^[a-zA-Z\s]*$/.test(r.target.value)&&l(r.target.value)},style:{width:"100%",padding:"0.75rem",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:[i("phone_number")," *"]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("span",{style:{padding:"0.75rem",background:"#eee",borderRadius:"4px"},children:"+91"}),e.jsx("input",{ref:V,type:"tel",placeholder:"9876543210",maxLength:"10",value:_,onChange:r=>H(r.target.value.replace(/\D/g,"")),style:{flex:1,padding:"0.75rem",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]})]}),pe?e.jsxs("div",{className:"fade-in",children:[e.jsxs("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:[i("enter_otp")," *"]}),e.jsx("input",{type:"text",placeholder:"1234",value:J,onChange:r=>ce(r.target.value),style:{width:"100%",marginBottom:"1rem",padding:"0.75rem",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}}),e.jsx("button",{onClick:ye,className:"btn btn-primary",style:{width:"100%",padding:"0.8rem"},children:i("verify_signin")})]}):e.jsx("button",{onClick:xe,className:"btn btn-primary",style:{width:"100%",padding:"0.8rem"},children:i("generate_otp")})]})]})};export{We as default};
