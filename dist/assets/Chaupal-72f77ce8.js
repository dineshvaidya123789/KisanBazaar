import{a as z,u as E,r as o,R as L,j as t}from"./index-e04eb9d8.js";import{B as W}from"./BackToHomeButton-1e011a6b.js";const P=()=>{const{user:d,login:I}=z(),{t:n,language:x}=E(),_=[{id:1,author:"Ram Lal",district:"Ujjain",question:"My wheat crop leaves are turning yellow. What should I do?",questionHindi:"à¤®à¥‡à¤°à¥‡ à¤—à¥‡à¤¹à¥‚à¤‚ à¤•à¥‡ à¤ªà¤¤à¥à¤¤à¥‡ à¤ªà¥€à¤²à¥‡ à¤ªà¤¡à¤¼ à¤°à¤¹à¥‡ à¤¹à¥ˆà¤‚à¥¤ à¤®à¥à¤à¥‡ à¤•à¥à¤¯à¤¾ à¤•à¤°à¤¨à¤¾ à¤šà¤¾à¤¹à¤¿à¤?",likes:12,replies:[{id:101,author:"Dr. Singh (Agri Expert)",text:"Check for nitrogen deficiency. Apply urea if needed.",textHindi:"à¤¨à¤¾à¤‡à¤Ÿà¥à¤°à¥‹à¤œà¤¨ à¤•à¥€ à¤•à¤®à¥€ à¤•à¥€ à¤œà¤¾à¤à¤š à¤•à¤°à¥‡à¤‚à¥¤ à¤†à¤µà¤¶à¥à¤¯à¤•à¤¤à¤¾ à¤¹à¥‹ à¤¤à¥‹ à¤¯à¥‚à¤°à¤¿à¤¯à¤¾ à¤¡à¤¾à¤²à¥‡à¤‚à¥¤"},{id:102,author:"Shyam",text:"It could also be due to over-watering.",textHindi:"à¤¯à¤¹ à¤…à¤§à¤¿à¤• à¤ªà¤¾à¤¨à¥€ à¤¦à¥‡à¤¨à¥‡ à¤•à¥‡ à¤•à¤¾à¤°à¤£ à¤­à¥€ à¤¹à¥‹ à¤¸à¤•à¤¤à¤¾ à¤¹à¥ˆà¥¤"}],timestamp:"2 hours ago"},{id:2,author:"Mohan Patel",district:"Indore",question:"What is the best time to sow soybean in Malwa region?",questionHindi:"à¤®à¤¾à¤²à¤µà¤¾ à¤•à¥à¤·à¥‡à¤¤à¥à¤° à¤®à¥‡à¤‚ à¤¸à¥‹à¤¯à¤¾à¤¬à¥€à¤¨ à¤¬à¥‹à¤¨à¥‡ à¤•à¤¾ à¤¸à¤¬à¤¸à¥‡ à¤…à¤šà¥à¤›à¤¾ à¤¸à¤®à¤¯ à¤•à¥à¤¯à¤¾ à¤¹à¥ˆ?",likes:8,replies:[],timestamp:"5 hours ago"}],[l,a]=o.useState([]),[m,y]=o.useState(""),[F,R]=o.useState(!1),[p,f]=o.useState(null);o.useState(5);const[c,b]=o.useState({}),[j,v]=o.useState(null),[B,k]=o.useState(null),S=L.useRef(null),[N,h]=o.useState(!1);o.useState(""),o.useState("");const[w,T]=o.useState(!1),C=(e,s)=>x==="hi"&&e[`${s}Hindi`]?e[`${s}Hindi`]:x==="mr"&&e[`${s}Marathi`]?e[`${s}Marathi`]:e[s],A=(e,s=!1)=>{const i=e.target.files[0];if(i){const r=new FileReader;r.onloadend=()=>{s?k(r.result):v(r.result)},r.readAsDataURL(i)}};o.useEffect(()=>{const e=localStorage.getItem("kisan_chaupal_questions");if(e){const s=JSON.parse(e);a(s.sort((i,r)=>r.id-i.id))}else a(_.sort((s,i)=>i.id-s.id))},[]),o.useEffect(()=>{l.length>0&&localStorage.setItem("kisan_chaupal_questions",JSON.stringify(l))},[l]);const g=()=>d?!0:(h(!0),!1),H=e=>{var r;if(e.preventDefault(),!g())return;if(!m.trim()){(r=S.current)==null||r.focus();return}const i=[{id:Date.now(),author:d.name,district:d.village||"Madhya Pradesh",question:m,questionHindi:"",image:j,likes:0,replies:[],timestamp:"Just Now"},...l];a(i),y(""),v(null),R(!1)},Q=e=>{if(!g())return;const s=l.map(i=>i.id===e?{...i,likes:i.likes+1}:i);a(s)},M=e=>{if(!g())return;const s=c[e]||"";if(!s.trim())return;const i={id:Date.now(),author:d.name,text:s,image:B,textHindi:""},r=l.map(u=>u.id===e?{...u,replies:[i,...u.replies]}:u);a(r),b({...c,[e]:""}),k(null),f(null)},D=e=>{window.confirm("Are you sure you want to delete this question?")&&a(l.filter(s=>s.id!==e))};return t.jsxs("div",{className:"container fade-in",style:{padding:"2rem 1rem",maxWidth:"800px",margin:"0 auto",minHeight:"80vh"},children:[t.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[t.jsx("h1",{style:{color:"var(--color-primary)",marginBottom:"0.5rem"},children:n("chaupal_title")}),t.jsx("p",{style:{color:"#666",fontSize:"1.1rem"},children:n("chaupal_subtitle")}),t.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"center",marginTop:"10px"},children:[t.jsxs("button",{className:"btn btn-outline",onClick:()=>{localStorage.removeItem("kisan_chaupal_questions"),window.location.reload()},style:{fontSize:"0.8rem"},children:["âš ï¸ ",n("reset_demo")]}),t.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"5px",fontSize:"0.9rem",cursor:"pointer",userSelect:"none"},children:[t.jsx("input",{type:"checkbox",checked:w,onChange:e=>T(e.target.checked)}),"ðŸ›¡ï¸ ",n("admin_mode")]})]})]}),t.jsxs("div",{className:"card",style:{padding:"1.5rem",marginBottom:"2rem",borderTop:"4px solid var(--color-secondary)"},children:[t.jsx("h3",{style:{marginBottom:"1rem"},children:n("ask_question")}),t.jsx("textarea",{ref:S,value:m,onChange:e=>y(e.target.value),placeholder:n("type_question"),style:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid #ddd",minHeight:"80px",marginBottom:"1rem"}}),t.jsx("input",{type:"file",id:"questionImageInput",style:{display:"none"},accept:"image/*",onChange:e=>A(e,!1)}),t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsxs("button",{className:"btn btn-outline",style:{fontSize:"0.9rem"},onClick:()=>document.getElementById("questionImageInput").click(),children:["ðŸ“· ",j?"Image Selected":n("upload_image")]}),t.jsx("button",{className:"btn btn-primary",onClick:H,children:n("post_question")})]})]}),t.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:l.map(e=>t.jsxs("div",{className:"card",style:{padding:"0",overflow:"hidden"},children:[t.jsxs("div",{style:{padding:"1.5rem"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[t.jsxs("span",{style:{fontWeight:"bold",color:"#555"},children:["ðŸ‘¤ ",e.author]}),w&&t.jsx("button",{onClick:()=>D(e.id),style:{color:"red",border:"none",background:"none",cursor:"pointer"},children:n("delete")})]}),t.jsx("h3",{style:{fontSize:"1.2rem",marginBottom:"0.5rem",color:"#222"},children:C(e,"question")}),e.image&&t.jsx("img",{src:e.image,alt:"Crop issue",style:{width:"100%",maxHeight:"300px",objectFit:"cover",borderRadius:"8px",marginBottom:"1rem"}}),t.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem",borderTop:"1px solid #eee",paddingTop:"1rem"},children:[t.jsxs("button",{onClick:()=>Q(e.id),style:{background:"none",border:"none",cursor:"pointer",color:"#666",display:"flex",alignItems:"center",gap:"5px"},children:["ðŸ‘ ",e.likes," ",n("likes")]}),t.jsxs("button",{onClick:()=>f(p===e.id?null:e.id),style:{background:"none",border:"none",cursor:"pointer",color:"var(--color-primary)",display:"flex",alignItems:"center",gap:"5px"},children:["ðŸ’¬ ",e.replies.length," ",n("replies")]})]})]}),(p===e.id||e.replies.length>0)&&t.jsxs("div",{style:{backgroundColor:"#f9f9f9",padding:"1rem 1.5rem",borderTop:"1px solid #eee"},children:[e.replies.map(s=>t.jsxs("div",{style:{marginBottom:"1rem",paddingBottom:"1rem",borderBottom:"1px solid #eee"},children:[t.jsx("div",{style:{fontWeight:"bold",fontSize:"0.9rem",color:"#444"},children:s.author}),t.jsx("div",{style:{fontSize:"0.95rem",color:"#333"},children:C(s,"text")})]},s.id)),p===e.id&&t.jsxs("div",{style:{marginTop:"1rem",display:"flex",gap:"10px"},children:[t.jsx("input",{type:"text",value:c[e.id]||"",onChange:s=>b({...c,[e.id]:s.target.value}),placeholder:n("write_reply"),style:{flex:1,padding:"8px",borderRadius:"4px",border:"1px solid #ddd"}}),t.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>M(e.id),children:n("reply")})]})]})]},e.id))}),N&&t.jsx("div",{className:"modal-overlay",children:t.jsxs("div",{className:"modal-content",style:{maxWidth:"300px",textAlign:"center"},children:[t.jsx("h3",{children:n("login_required")}),t.jsx("p",{children:n("login_to_ask")}),t.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",marginTop:"1rem"},children:[t.jsx("button",{className:"btn btn-primary",onClick:()=>I("9876543210","1234").then(()=>h(!1)),children:"Login as Demo User"}),t.jsx("button",{className:"btn btn-outline",onClick:()=>h(!1),children:n("cancel_reply")})]})]})}),t.jsx(W,{})]})};export{P as default};
