import{d as ae,u as de,j as e,r as c,e as Ee,f as De,s as ce,b as Re,h as ze,R as oe,L as se,_ as ne,i as le}from"./index-4b40ff76.js";import{L as Ne}from"./LocationSelector-41d6aa7f.js";const Le=({show:S,onClose:_,type:R="Sell"})=>{const g=ae(),{t:x}=de();return S?e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.85)",zIndex:3e3,display:"flex",justifyContent:"center",alignItems:"center",padding:"1rem",animation:"fadeIn 0.3s ease-in"},children:e.jsxs("div",{className:"card fade-in",style:{maxWidth:"500px",width:"100%",textAlign:"center",padding:"2.5rem 2rem",position:"relative"},children:[e.jsx("div",{style:{width:"80px",height:"80px",margin:"0 auto 1.5rem",borderRadius:"50%",background:"linear-gradient(135deg, #2E7D32 0%, #4CAF50 100%)",display:"flex",alignItems:"center",justifyContent:"center",animation:"scaleIn 0.5s ease-out"},children:e.jsx("svg",{width:"50",height:"50",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})})}),e.jsx("h2",{style:{color:"#2E7D32",marginBottom:"0.5rem",fontSize:"1.8rem",fontWeight:"bold"},children:x("success_title")}),e.jsx("p",{style:{color:"#666",fontSize:"1rem",marginBottom:"2rem",lineHeight:"1.6"},children:x("success_msg")}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[e.jsx("button",{onClick:()=>{_(),g("/my-products")},style:{padding:"1rem 1.5rem",fontSize:"1.1rem",fontWeight:"bold",backgroundColor:"#2E7D32",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s",boxShadow:"0 4px 12px rgba(46, 125, 50, 0.3)"},onMouseOver:f=>f.target.style.backgroundColor="#1B5E20",onMouseOut:f=>f.target.style.backgroundColor="#2E7D32",children:x("view_my_listings")}),e.jsx("button",{onClick:()=>{_(),g("/")},style:{padding:"1rem 1.5rem",fontSize:"1rem",fontWeight:"500",backgroundColor:"white",color:"#2E7D32",border:"2px solid #2E7D32",borderRadius:"8px",cursor:"pointer",transition:"all 0.3s"},onMouseOver:f=>{f.target.style.backgroundColor="#f1f8f4"},onMouseOut:f=>{f.target.style.backgroundColor="white"},children:x("return_home")})]}),e.jsx("style",{children:`
                    @keyframes fadeIn {
                        from { opacity: 0; }
                        to { opacity: 1; }
                    }
                    @keyframes scaleIn {
                        from { transform: scale(0); }
                        to { transform: scale(1); }
                    }
                `})]})}):null},Me=({commodity:S,district:_,enteredPrice:R,priceUnit:g})=>{const[x,f]=c.useState(null),[i,y]=c.useState(null),[p,z]=c.useState(!1);if(c.useEffect(()=>{if(!S){f(null);return}let l=Ee(_||"").find(n=>n.name.toLowerCase().includes(S.toLowerCase())||S.toLowerCase().includes(n.name.split(" ")[0].toLowerCase()));if(l)f(l),z(!1);else{const n=De.find(v=>v.name.toLowerCase().includes(S.toLowerCase())||S.toLowerCase().includes(v.name.split(" ")[0].toLowerCase()));n?(f({...n,min:n.basePrice-200,max:n.basePrice+200,modal:n.basePrice}),z(!0)):f(null)}},[S,_]),c.useEffect(()=>{if(!x||!R||!g){y(null);return}const b=parseFloat(R);if(isNaN(b))return;let{min:N,max:l}=x,n=N,v=l;g==="Kg"?(n=N/100,v=l/100):g==="Ton"&&(n=N*10,v=l*10),b<n*.8?y({type:"warning",color:"#E65100",bg:"#FFF3E0",icon:"ðŸ“‰",message:"Price is much lower than market rates. You might be undervaluing your produce.",hindiMessage:"à¤®à¥‚à¤²à¥à¤¯ à¤¬à¤¾à¤œà¤¾à¤° à¤­à¤¾à¤µ à¤¸à¥‡ à¤¬à¤¹à¥à¤¤ à¤•à¤® à¤¹à¥ˆà¥¤ à¤†à¤ª à¤…à¤ªà¤¨à¥€ à¤‰à¤ªà¤œ à¤•à¤¾ à¤•à¤® à¤®à¥‚à¤²à¥à¤¯à¤¾à¤‚à¤•à¤¨ à¤•à¤° à¤°à¤¹à¥‡ à¤¹à¥ˆà¤‚à¥¤"}):b>v*1.3?y({type:"caution",color:"#C62828",bg:"#FFEBEE",icon:"ðŸ“ˆ",message:"Price is significantly higher than market rates. Buyers may not be interested.",hindiMessage:"à¤®à¥‚à¤²à¥à¤¯ à¤¬à¤¾à¤œà¤¾à¤° à¤­à¤¾à¤µ à¤¸à¥‡ à¤•à¤¾à¤«à¥€ à¤…à¤§à¤¿à¤• à¤¹à¥ˆà¥¤ à¤–à¤°à¥€à¤¦à¤¾à¤° à¤°à¥à¤šà¤¿ à¤¨à¤¹à¥€à¤‚ à¤²à¥‡ à¤¸à¤•à¤¤à¥‡ à¤¹à¥ˆà¤‚à¥¤"}):b>=n&&b<=v?y({type:"good",color:"#2E7D32",bg:"#E8F5E9",icon:"âœ…",message:"Perfect! This is a competitive market price.",hindiMessage:"à¤¸à¤¹à¥€ à¤¹à¥ˆ! à¤¯à¤¹ à¤à¤• à¤ªà¥à¤°à¤¤à¤¿à¤¸à¥à¤ªà¤°à¥à¤§à¥€ à¤¬à¤¾à¤œà¤¾à¤° à¤®à¥‚à¤²à¥à¤¯ à¤¹à¥ˆà¥¤"}):y({type:"neutral",color:"#1565C0",bg:"#E3F2FD",icon:"â„¹ï¸",message:"Price is reasonable.",hindiMessage:"à¤®à¥‚à¤²à¥à¤¯ à¤‰à¤šà¤¿à¤¤ à¤¹à¥ˆà¥¤"})},[x,R,g]),!x)return e.jsxs("div",{className:"fade-in",style:{marginTop:"10px",padding:"12px",borderRadius:"8px",border:"1px solid #ddd",backgroundColor:"#f8f9fa",color:"#666",fontSize:"0.9rem",textAlign:"center"},children:["Requires more market data for ",e.jsx("strong",{children:S}),".",e.jsx("br",{}),e.jsx("span",{style:{fontSize:"0.8rem"},children:"Please set your price competitively based on local trends."})]});const M=b=>g==="Kg"?(b/100).toFixed(1):g==="Ton"?(b*10).toFixed(0):b;return e.jsxs("div",{className:"fade-in",style:{marginTop:"10px",padding:"12px",borderRadius:"8px",border:"1px solid #ddd",backgroundColor:"white",boxShadow:"0 2px 4px rgba(0,0,0,0.05)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[e.jsxs("strong",{style:{color:"#555",fontSize:"0.9rem"},children:["ðŸ“Š ",p?"Est. Market Rate":`Market Rate in ${_}`," (",p?"à¤…à¤¨à¥à¤®à¤¾à¤¨à¤¿à¤¤ à¤¦à¤°":"à¤¬à¤¾à¤œà¤¾à¤° à¤­à¤¾à¤µ","):"]}),e.jsxs("span",{style:{backgroundColor:"#f5f5f5",padding:"4px 8px",borderRadius:"4px",fontWeight:"bold",fontSize:"0.9rem"},children:["â‚¹",M(x.min)," - â‚¹",M(x.max)," / ",g||"Quintal"]})]}),i&&e.jsxs("div",{style:{backgroundColor:i.bg,color:i.color,padding:"10px",borderRadius:"6px",fontSize:"0.9rem",display:"flex",gap:"10px",alignItems:"start"},children:[e.jsx("span",{style:{fontSize:"1.2rem"},children:i.icon}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold"},children:i.message}),e.jsx("div",{style:{opacity:.9},children:i.hindiMessage})]})]})]})},qe=({value:S,onChange:_,onSelect:R})=>{const[g,x]=c.useState([]),[f,i]=c.useState(!1),[y,p]=c.useState(-1),z=c.useRef(null);c.useEffect(()=>{const l=n=>{z.current&&!z.current.contains(n.target)&&i(!1)};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[]);const M=l=>{const n=l.target.value;if(_(l),n.length>=1){const v=ce(n);x(v),i(v.length>0),p(-1)}else x([]),i(!1)},b=l=>{R(l),i(!1),x([])},N=l=>{if(f)switch(l.key){case"ArrowDown":l.preventDefault(),p(n=>n<g.length-1?n+1:n);break;case"ArrowUp":l.preventDefault(),p(n=>n>0?n-1:-1);break;case"Enter":l.preventDefault(),y>=0&&y<g.length&&b(g[y]);break;case"Escape":i(!1);break}};return e.jsxs("div",{ref:z,style:{position:"relative",width:"100%"},children:[e.jsx("input",{type:"text",value:S,onChange:M,onKeyDown:N,onFocus:()=>{g.length>0&&i(!0)},placeholder:"Type: Tomato, à¤Ÿà¤®à¤¾à¤Ÿà¤°, à¤Ÿà¥‹à¤®à¥…à¤Ÿà¥‹...",className:"premium-input",required:!0}),f&&g.length>0&&e.jsx("div",{className:"fade-in",style:{position:"absolute",top:"100%",left:0,right:0,backgroundColor:"white",border:"2px solid var(--color-primary)",borderRadius:"var(--radius-md)",marginTop:"4px",maxHeight:"280px",overflowY:"auto",boxShadow:"var(--shadow-lg)",zIndex:1e3},children:g.map((l,n)=>e.jsxs("div",{onClick:()=>b(l),onMouseEnter:()=>p(n),style:{padding:"12px 16px",cursor:"pointer",backgroundColor:y===n?"#f0f9ff":"white",borderBottom:n<g.length-1?"1px solid #f1f5f9":"none",transition:"background-color 0.15s",display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx("span",{style:{fontSize:"1.5rem"},children:l.icon}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:"600",color:"#1e293b",marginBottom:"2px"},children:l.en}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"#64748b"},children:[l.hi," â€¢ ",l.mr]})]}),e.jsx("div",{style:{fontSize:"0.75rem",padding:"3px 8px",borderRadius:"12px",backgroundColor:"#e0f2fe",color:"#0369a1",fontWeight:"600"},children:l.category})]},l.id))})]})},Ae=()=>{const{addListing:S,updateListing:_,checkListingEligibility:R}=Re(),g=ae(),x=ze(),{language:f,t:i}=de(),y=r=>r.replace(/[à¥¦-à¥¯]/g,o=>"à¥¦à¥§à¥¨à¥©à¥ªà¥«à¥¬à¥­à¥®à¥¯".indexOf(o)),[p,z]=c.useState(!1),[M,b]=c.useState(null),[N,l]=c.useState(!1),[n,v]=c.useState(""),[J,Pe]=c.useState(""),[I,H]=c.useState(""),[X,pe]=c.useState(""),[me,ue]=c.useState(!1),[ge,K]=c.useState(!1),[P,Z]=c.useState({}),[Q,$]=c.useState(!1),ee=oe.useRef(null),V=oe.useRef(null),[t,k]=c.useState(()=>{const o=new URLSearchParams(window.location.search).get("type");return{type:o==="Buy"||o==="Sell"?o:"Sell",commodity:"",commodityId:"",quantity:"",unit:"",pricingMode:"market",targetPrice:"",priceUnit:"",state:"",district:"",tehsil:"",quality:"",comments:"",isOrganic:!1,isGraded:!1,isPacked:!1,images:[]}}),[O,he]=c.useState(!1),[T,U]=c.useState(!1),[te,xe]=c.useState(!1),fe=()=>{var r,o,a;if(!n){(r=ee.current)==null||r.focus();return}if(!I){(o=V.current)==null||o.focus();return}if(!/^\d{10}$/.test(I)){(a=V.current)==null||a.focus();return}ue(!0),alert(`Hello ${n}! ${i("otp_sent")} ${I}: 1234`)},[ye,G]=c.useState(!1),be=()=>{X==="1234"?(l(!0),localStorage.setItem("kisan_user_mobile",I),localStorage.setItem("kisan_user_name",n)):alert(i("invalid_otp"))};c.useEffect(()=>{const r=localStorage.getItem("kisan_user_mobile"),o=localStorage.getItem("kisan_user_name");r&&o&&(H(r),v(o),l(!0));const a=localStorage.getItem("edit_listing");if(a){const s=JSON.parse(a);z(!0),b(s.id),k({type:s.type,commodity:s.commodity,commodityId:s.commodityId||s.commodity,quantity:s.quantity,unit:s.unit,targetPrice:s.targetPrice,priceUnit:s.priceUnit,state:s.state,district:s.district,tehsil:s.tehsil||"",quality:s.quality,pricingMode:s.pricingMode||(s.targetPrice?"fixed":"market"),comments:s.comments,isOrganic:s.isOrganic||!1,isGraded:s.isGraded||!1,isPacked:s.isPacked||!1,images:s.images||(s.image?[s.image]:[])}),localStorage.removeItem("edit_listing")}else{const u=new URLSearchParams(x.search).get("type");u&&(u==="Buy"||u==="Sell")&&k(d=>({...d,type:u}))}},[x.search]);const E=r=>{const{name:o,value:a,type:s,checked:u}=r.target;k(d=>({...d,[o]:s==="checkbox"?u:a})),P[o]&&Z(d=>({...d,[o]:!1}))},ie=r=>{p||t.type!==r&&k(o=>({...o,type:r,commodity:"",commodityId:"",quantity:"",unit:"",targetPrice:"",priceUnit:"",quality:"",description:"",isOrganic:!1,isGraded:!1,isPacked:!1,pricingMode:"market"}))},ve=r=>{k(o=>({...o,state:r.state,district:r.district,tehsil:r.tehsil}))},je=()=>{if(!navigator.geolocation){alert(i("geolocation_unsupported"));return}U(!0),navigator.geolocation.getCurrentPosition(async r=>{const{latitude:o,longitude:a}=r.coords;try{const s=await fetch(`https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=${o}&lon=${a}&zoom=10`,{headers:{"Accept-Language":"en-US,en;q=0.9","User-Agent":"KisanBazaar-Mobile-App"}});if(!s.ok)throw new Error("Network error");const u=await s.json();if(u&&u.address){const d=u.address,j=d.state||"",h=d.city||d.district||d.county||d.state_district||"",m=d.suburb||d.town||d.village||d.neighbourhood||d.city_district||"";console.log("ðŸ” Nominatim API Response:",{detectedState:j,detectedDistrict:h,detectedTehsil:m,fullAddress:d});const{getCityToDistrict:w}=await ne(()=>import("./locationMapping-e858de36.js"),[]),{getStates:W,getDistricts:Ie,getTehsils:Be}=await ne(()=>import("./index-4b40ff76.js").then(B=>B.z),["assets/index-4b40ff76.js","assets/index-a019cad9.css"]),re=W();let A=w(h);A!==h&&console.log(`ðŸ”„ Mapped city "${h}" to district "${A}"`);let D=re.find(B=>B.toLowerCase()===j.toLowerCase())||"";console.log("ðŸ›ï¸ State Matching:",{detectedState:j,matchedState:D,availableStates:re.slice(0,5)+"..."});let C="",q="";if(D){const B=Ie(D);if(console.log("ðŸ™ï¸ Available Districts for",D,":",B),C=B.find(L=>L.toLowerCase()===A.toLowerCase()),C||(C=B.find(L=>L.toLowerCase().includes(A.toLowerCase())||A.toLowerCase().includes(L.toLowerCase()))||""),console.log("ðŸ™ï¸ District Matching:",{detectedDistrict:h,matchedDistrict:C,availableCount:B.length}),C){const L=Be(D,C);console.log("ðŸ˜ï¸ Available Tehsils for",C,":",L),q=L.find(Y=>Y.toLowerCase()===m.toLowerCase()||Y.toLowerCase().includes(m.toLowerCase())||m.toLowerCase().includes(Y.toLowerCase()))||"",console.log("ðŸ˜ï¸ Tehsil Matching:",{detectedTehsil:m,matchedTehsil:q,availableCount:L.length})}}console.log("âœ… Final Matched Values:",{state:D,district:C,tehsil:q}),k(B=>({...B,state:D,district:C,tehsil:q})),U(!1);const F=[];q&&F.push(q),C&&F.push(C),D&&F.push(D),F.length>0?alert(`ðŸ“ ${i("location_detected")}: ${F.join(", ")}

${i("manual_select")}`):alert(`ðŸ“ ${i("location_detect_failed")}

${i("manual_select")}`)}else throw new Error("Address not found")}catch(s){U(!1),alert(i("manual_select")),console.error("Reverse Geocoding error:",s)}},r=>{U(!1);let o=i("location_detect_error");r.code===1&&(o=i("location_permission_denied")),r.code===3&&(o=i("location_timeout")),alert(o),console.error("Geolocation error:",r)},{timeout:15e3,enableHighAccuracy:!0})},we=r=>new Promise(o=>{const a=new FileReader;a.readAsDataURL(r),a.onload=s=>{const u=new Image;u.src=s.target.result,u.onload=()=>{const d=document.createElement("canvas");let j=u.width,h=u.height;const m=800;j>h?j>m&&(h*=m/j,j=m):h>m&&(j*=m/h,h=m),d.width=j,d.height=h,d.getContext("2d").drawImage(u,0,0,j,h);const W=d.toDataURL("image/jpeg",.7);o(W)}}}),Se=r=>{const o=le(r.id);k(a=>({...a,commodity:r.en,commodityId:r.id,unit:o,priceUnit:o}))},ke=()=>t.unit==="Kg"?[50,100,200,500,1e3]:t.unit==="Quintal"?[10,20,50,100]:t.unit==="Ton"?[1,5,10,20]:[10,50,100],Ce=r=>{var o,a,s,u,d,j;if(r.preventDefault(),!t.state){(o=document.getElementsByName("state")[0])==null||o.focus();return}if(!t.commodityId)if(t.commodity){const m=ce(t.commodity).find(w=>w.en.toLowerCase()===t.commodity.toLowerCase().trim()||w.hi===t.commodity.trim()||w.mr===t.commodity.trim());if(m)if(t.commodityId=m.id,t.commodity=m.en,t.unit)k(w=>({...w,commodityId:m.id,commodity:m.en}));else{const w=le(m.id);k(W=>({...W,commodityId:m.id,commodity:m.en,unit:w})),t.unit=w}else{alert(i("invalid_commodity")||"Please select a valid crop from the suggestions");const w=document.querySelectorAll('input[placeholder*="Type: Tomato"]');w.length>0&&w[0].focus();return}}else{const h=document.querySelectorAll('input[placeholder*="Type: Tomato"]');h.length>0&&h[0].focus();return}if(!t.district){(a=document.getElementsByName("district")[0])==null||a.focus();return}if(t.type==="Sell"){if(!t.quality){Z(m=>({...m,quality:!0})),alert(i("quality_required")||"Please select a quality grade");const h=document.getElementById("quality-options-container");h&&h.scrollIntoView({behavior:"smooth",block:"center"});return}if(t.pricingMode==="fixed"&&(!t.targetPrice||Number(t.targetPrice)<=0)){(s=document.getElementsByName("targetPrice")[0])==null||s.focus();return}if(t.pricingMode==="fixed"&&!t.priceUnit){(u=document.getElementsByName("priceUnit")[0])==null||u.focus();return}}if(!t.unit){(d=document.getElementsByName("unit")[0])==null||d.focus();return}if(Number(t.quantity)<=0){(j=document.getElementsByName("quantity")[0])==null||j.focus();return}G(!0)},_e=()=>{if(console.log("Seller: confirmSubmit called"),Q){console.log("Seller: Already submitting, ignoring click");return}$(!0);try{console.log("Seller: Checking eligibility for",I,t.commodity);const r=R(I,t.commodity,p?M:null);if(console.log("Seller: Eligibility result:",r),!r.eligible){alert(r.message),G(!1),$(!1);return}G(!1),console.log("Seller: Proceeding with submission..."),setTimeout(()=>{try{if(p){const o={...t,seller:`${n} ${J}`,contactMobile:I,timestamp:new Date().toISOString()};_(M,o),K(!0)}else{const o={...t,seller:`${n} ${J}`,contactMobile:I,timestamp:new Date().toISOString()};S(o),K(!0)}}catch(o){console.error("Seller: Error in setTimeout submission:",o),alert(i("error_general"))}finally{$(!1)}},500)}catch(r){console.error("Seller: Error in confirmSubmit:",r),alert(i("error_general")),$(!1)}};return N?e.jsxs("div",{style:{background:"linear-gradient(rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.95)), url('/images/seller_bg.png') center/cover no-repeat fixed",minHeight:"90vh",padding:"var(--spacing-xl) 0"},children:[e.jsxs("div",{className:"container fade-in",style:{maxWidth:"800px"},children:[e.jsxs(se,{to:"/",style:{display:"inline-flex",alignItems:"center",marginBottom:"1rem",color:"#666",textDecoration:"none",fontWeight:"500",fontSize:"0.95rem"},children:["â† ",i("back_to_home")]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"var(--spacing-lg)",borderBottom:"2px solid var(--color-primary)",paddingBottom:"0.8rem"},children:[e.jsx("h2",{style:{margin:0,color:"var(--color-primary)",fontSize:"1.5rem"},children:p?t.type==="Buy"?i("update")+" "+i("buy"):i("update")+" "+i("sell"):t.type==="Buy"?i("i_want_buy"):i("list_product")}),e.jsx("span",{style:{padding:"4px 12px",borderRadius:"20px",backgroundColor:t.type==="Buy"?"#FFEBEE":"#E8F5E9",color:t.type==="Buy"?"#D32F2F":"#2E7D32",fontWeight:"bold",fontSize:"0.85rem",border:`1px solid ${t.type==="Buy"?"#FFCDD2":"#C8E6C9"}`},children:t.type==="Buy"?"ðŸ›’ "+i("buyer").toUpperCase():"ðŸšœ "+i("seller").toUpperCase()})]}),e.jsx("div",{className:"glass-card",style:{padding:"2.5rem"},children:e.jsxs("form",{onSubmit:Ce,style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[e.jsxs("div",{children:[e.jsxs("label",{className:"premium-label",children:[i("buy_sell_prompt")," ",e.jsx("span",{style:{color:"var(--color-error)"},children:"*"})]}),e.jsxs("div",{className:"toggle-container",style:{position:"relative",opacity:p?.8:1},children:[e.jsx("div",{style:{position:"absolute",top:0,left:t.type==="Buy"?0:"50%",width:"50%",height:"100%",background:t.type==="Buy"?"linear-gradient(135deg, #DC2626 0%, #EF4444 100%)":"linear-gradient(135deg, #059669 0%, #10b981 100%)",borderRadius:"var(--radius-xl)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)"}}),e.jsxs("button",{type:"button",onClick:()=>ie("Buy"),disabled:p,className:`toggle-btn ${t.type==="Buy"?"active":""}`,style:{padding:"0.75rem 1rem",cursor:p?"not-allowed":"pointer",color:p&&t.type==="Buy"?"white":void 0},children:[p&&t.type==="Buy"&&"ðŸ”’ ","ðŸ›’ ",i("buy")]}),e.jsxs("button",{type:"button",onClick:()=>ie("Sell"),disabled:p,className:`toggle-btn ${t.type==="Sell"?"active":""}`,style:{padding:"0.75rem 1rem",cursor:p?"not-allowed":"pointer",color:p&&t.type==="Sell"?"white":void 0},children:[p&&t.type==="Sell"&&"ðŸ”’ ","ðŸšœ ",i("sell")]})]}),p&&e.jsx("div",{style:{fontSize:"0.8rem",color:"#666",marginTop:"4px",textAlign:"center",fontStyle:"italic"},children:i("listing_type_locked")})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"premium-label",children:[i("commodity")," ",e.jsx("span",{style:{color:"var(--color-error)"},children:"*"})]}),e.jsx(qe,{value:t.commodity,onChange:r=>E({target:{name:"commodity",value:r.target.value}}),onSelect:Se}),t.commodityId&&e.jsxs("div",{style:{marginTop:"8px",fontSize:"0.85rem",color:"var(--color-success)",display:"flex",alignItems:"center",gap:"6px"},children:["âœ“ ",i("recommended_unit"),": ",e.jsx("strong",{children:t.unit})]})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#333",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[i("quantity")," *"]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"stretch"},children:[e.jsx("div",{style:{flex:1,position:"relative"},children:e.jsx("input",{type:"text",name:"quantity",required:!0,placeholder:"e.g. 100",value:t.quantity,onChange:r=>{let a=y(r.target.value).replace(/[^0-9]/g,"");a.length>1&&a.startsWith("0")&&(a=a.replace(/^0+/,"")),E({target:{name:"quantity",value:a}})},style:{width:"100%",padding:"0.8rem",borderRadius:"4px",border:"1px solid #ccc",height:"100%"},min:"1"})}),e.jsxs("select",{name:"unit",value:t.unit,onChange:E,required:!0,style:{width:"140px",padding:"0.8rem",borderRadius:"4px",border:"1px solid #ccc",fontSize:"0.95rem",backgroundColor:"#f9fafb"},children:[e.jsx("option",{value:"",children:"Unit (à¤‡à¤•à¤¾à¤ˆ)"}),e.jsx("option",{value:"Quintal",children:"Quintal"}),e.jsx("option",{value:"Ton",children:"Ton"}),e.jsx("option",{value:"Kg",children:"Kg"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"8px",flexWrap:"wrap",alignItems:"center"},children:[e.jsxs("span",{style:{fontSize:"0.8rem",color:"#666",marginRight:"4px"},children:[i("quick_pick"),":"]}),e.jsx("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap",flex:1},children:ke().map(r=>e.jsxs("button",{type:"button",onClick:()=>E({target:{name:"quantity",value:r.toString()}}),style:{padding:"4px 10px",borderRadius:"16px",border:"1px solid #e5e7eb",background:t.quantity===r.toString()?"#e0f2fe":"white",color:t.quantity===r.toString()?"#0284c7":"#4b5563",fontSize:"0.85rem",cursor:"pointer",fontWeight:"500",whiteSpace:"nowrap",flex:"1 0 auto",maxWidth:"fit-content"},children:["+",r]},r))})]})]}),t.type==="Sell"&&e.jsxs("div",{className:"slide-in",children:[e.jsxs("label",{className:"premium-label",children:[i("price")," ",e.jsx("span",{style:{color:"var(--color-error)"},children:"*"})]}),e.jsxs("div",{className:"pricing-mode-container",style:{display:"flex",gap:"1rem",marginBottom:"1rem"},children:[e.jsxs("div",{className:`pricing-option ${t.pricingMode==="fixed"?"active":""}`,onClick:()=>k({...t,pricingMode:"fixed"}),style:{flex:1,padding:"1rem",border:`2px solid ${t.pricingMode==="fixed"?"var(--color-primary)":"#eee"}`,borderRadius:"var(--radius-md)",cursor:"pointer",backgroundColor:t.pricingMode==="fixed"?"#f0fdf4":"white",transition:"all 0.2s",textAlign:"center"},children:[e.jsx("span",{style:{fontSize:"1.2rem",display:"block",marginBottom:"4px"},children:"ðŸ·ï¸"}),e.jsx("div",{style:{fontWeight:"600",color:"var(--color-text)"},children:i("fixed_price")})]}),e.jsxs("div",{className:`pricing-option ${t.pricingMode==="market"?"active":""}`,onClick:()=>k({...t,pricingMode:"market"}),style:{flex:1,padding:"1rem",border:`2px solid ${t.pricingMode==="market"?"var(--color-secondary)":"#eee"}`,borderRadius:"var(--radius-md)",cursor:"pointer",backgroundColor:t.pricingMode==="market"?"#fff7ed":"white",transition:"all 0.2s",textAlign:"center"},children:[e.jsx("span",{style:{fontSize:"1.2rem",display:"block",marginBottom:"4px"},children:"ðŸ“ˆ"}),e.jsx("div",{style:{fontWeight:"600",color:"var(--color-text)"},children:i("best_market_price")})]})]}),t.pricingMode==="fixed"&&e.jsxs("div",{className:"fade-in",style:{display:"flex",gap:"1rem",alignItems:"stretch"},children:[e.jsx("div",{style:{flex:1,position:"relative"},children:e.jsx("input",{type:"text",name:"targetPrice",placeholder:"Enter price",value:t.targetPrice,onChange:r=>{const a=y(r.target.value).replace(/[^0-9]/g,"");E({target:{name:"targetPrice",value:a}})},className:"premium-input",style:{width:"100%",height:"100%",minHeight:"48px"},required:!0})}),e.jsxs("select",{name:"priceUnit",value:t.priceUnit,onChange:E,className:"premium-select",style:{width:"140px",minHeight:"48px"},required:!0,children:[e.jsx("option",{value:"",children:"Unit"}),e.jsx("option",{value:"Quintal",children:"Quintal"}),e.jsx("option",{value:"Ton",children:"Ton"}),e.jsx("option",{value:"Kg",children:"Kg"})]})]}),t.type==="Sell"&&t.pricingMode==="market"&&e.jsx("div",{className:"fade-in",children:e.jsx(Me,{commodity:t.commodity,district:t.district,enteredPrice:null,priceUnit:t.priceUnit})})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[e.jsxs("label",{className:"premium-label",style:{marginBottom:0},children:["ðŸ“ ",i("location")," ",e.jsx("span",{style:{color:"var(--color-error)"},children:"*"})]}),e.jsx("button",{type:"button",onClick:je,disabled:T,style:{padding:"6px 12px",fontSize:"0.8rem",backgroundColor:T?"#e5e7eb":"#dcfce7",color:T?"#6b7280":"#166534",border:"1px solid #86efac",borderRadius:"20px",cursor:T?"not-allowed":"pointer",fontWeight:"600",transition:"all 0.2s"},children:T?"ðŸ”„ Detecting...":"ðŸŽ¯ Auto-detect"})]}),e.jsx(Ne,{selectedState:t.state,selectedDistrict:t.district,selectedTehsil:t.tehsil,onLocationChange:ve,showTehsil:!0,vertical:!1})]}),t.type==="Sell"&&e.jsxs("div",{className:"slide-in",children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[e.jsxs("label",{className:"premium-label",style:{marginBottom:0},id:"quality-section",children:[i("quality")," ",e.jsx("span",{style:{color:"var(--color-error)"},children:"*"})]}),e.jsx("button",{type:"button",onClick:()=>xe(!te),style:{background:"#e0f2fe",border:"1px solid #7dd3fc",borderRadius:"50%",width:"24px",height:"24px",cursor:"pointer",fontSize:"0.75rem",fontWeight:"bold",color:"#0369a1",display:"flex",alignItems:"center",justifyContent:"center"},title:"Click for quality guide",children:"â„¹ï¸"})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"12px",padding:P.quality?"10px":"0",border:P.quality?"2px solid #ef4444":"none",borderRadius:"var(--radius-md)",backgroundColor:P.quality?"#fef2f2":"transparent",transition:"all 0.3s"},id:"quality-options-container",children:[{value:"Premium",label:"Premium",labelHi:"à¤‰à¤¤à¥à¤¤à¤®",stars:"â­â­â­",color:"#4ade80"},{value:"Good",label:"Good",labelHi:"à¤…à¤šà¥à¤›à¤¾",stars:"â­â­",color:"#fbbf24"},{value:"Average",label:"Average",labelHi:"à¤¸à¤¾à¤®à¤¾à¤¨à¥à¤¯",stars:"â­",color:"#fb923c"}].map(r=>e.jsxs("label",{style:{padding:"16px 12px",border:`2px solid ${t.quality===r.value?"var(--color-primary)":"#e5e7eb"}`,borderRadius:"var(--radius-md)",cursor:"pointer",textAlign:"center",backgroundColor:t.quality===r.value?"#f0f9ff":"white",transition:"all 0.2s",display:"flex",flexDirection:"column",alignItems:"center",gap:"6px"},children:[e.jsx("input",{type:"radio",name:"quality",value:r.value,checked:t.quality===r.value,onChange:E,required:!0,style:{display:"none"}}),e.jsx("div",{style:{fontSize:"1.5rem"},children:r.stars}),e.jsx("div",{style:{fontWeight:"600",fontSize:"0.9rem"},children:r.label}),e.jsx("div",{style:{fontSize:"0.8rem",color:"#6b7280"},children:r.labelHi})]},r.value))}),P.quality&&e.jsx("div",{style:{color:"#ef4444",fontSize:"0.8rem",marginTop:"4px",fontWeight:"bold"},children:i("quality_required")||"Please select a quality grade"}),te&&e.jsxs("div",{className:"fade-in",style:{marginTop:"12px",padding:"12px",background:"#f9fafb",borderRadius:"var(--radius-md)",fontSize:"0.85rem",border:"1px solid #e5e7eb"},children:[e.jsx("div",{style:{fontWeight:"600",marginBottom:"8px",color:"var(--color-primary)"},children:"Quality Guide:"}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[e.jsxs("div",{children:["â­â­â­ ",e.jsx("strong",{children:"Premium:"})," Perfect size, uniform, bright color, no defects"]}),e.jsxs("div",{children:["â­â­ ",e.jsx("strong",{children:"Good:"})," Good quality, minor flaws, small spots"]}),e.jsxs("div",{children:["â­ ",e.jsx("strong",{children:"Average:"})," Usable, irregular shape, smaller size"]})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#333",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:i("comments")}),e.jsx("textarea",{name:"comments",rows:"3",placeholder:"I want to buy good quality commodity.",value:t.comments,onChange:E,style:{width:"100%",padding:"0.8rem",borderRadius:"4px",border:"1px solid #ccc"}})]}),t.type==="Sell"&&e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#333"},children:[i("upload_photos")," ",e.jsx("span",{style:{fontSize:"0.8rem",color:"#666"},children:i("photo_constraints")})]}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:async r=>{const o=Array.from(r.target.files);if((t.images||[]).length+o.length>3){alert(i("max_images_error"));return}for(const s of o){const u=await we(s);k(d=>({...d,images:[...d.images||[],u]}))}},style:{width:"100%",padding:"0.5rem",border:"1px solid #ccc",borderRadius:"4px",background:"white"}}),e.jsxs("div",{style:{marginTop:"8px",fontSize:"0.9rem",color:"var(--color-primary)",fontWeight:"600",display:"flex",alignItems:"center",gap:"6px",backgroundColor:"#E8F5E9",padding:"8px 12px",borderRadius:"8px",border:"1px solid #C8E6C9"},children:["ðŸ’¡ ",e.jsx("span",{children:i("photo_speed_tip")})]}),t.images&&t.images.length>0&&e.jsx("div",{style:{marginTop:"10px",display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(100px, 1fr))",gap:"10px"},children:t.images.map((r,o)=>e.jsxs("div",{style:{position:"relative"},children:[e.jsx("img",{src:r,alt:`Preview ${o}`,style:{width:"100%",height:"100px",objectFit:"cover",borderRadius:"4px",border:"1px solid #ddd"}}),e.jsx("button",{type:"button",onClick:()=>{const a=[...t.images];a.splice(o,1),k(s=>({...s,images:a}))},style:{position:"absolute",top:"-5px",right:"-5px",background:"#ff4444",color:"white",border:"none",borderRadius:"50%",width:"20px",height:"20px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px"},children:"âœ•"})]},o))})]}),t.type==="Sell"&&e.jsxs("div",{style:{marginTop:"0.5rem"},children:[e.jsxs("button",{type:"button",onClick:()=>he(!O),style:{display:"flex",alignItems:"center",gap:"8px",background:"none",border:"none",color:"var(--color-primary)",fontWeight:"600",fontSize:"0.95rem",padding:"0",cursor:"pointer"},children:[e.jsx("span",{children:O?"âž–":"âž•"}),O?`${i("hide_advanced")}`:`${i("show_advanced")}`]}),O&&e.jsx("div",{className:"slide-in",style:{display:"flex",flexDirection:"column",gap:"1rem",marginTop:"1.2rem",padding:"1.2rem",backgroundColor:"#f8fafc",borderRadius:"var(--radius-md)",border:"1px solid #e2e8f0"},children:[{label:i("is_organic"),name:"isOrganic",icon:"ðŸƒ"},{label:i("is_graded"),name:"isGraded",icon:"ðŸ“"},{label:i("is_packed"),name:"isPacked",icon:"ðŸ’°"}].map(r=>e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"12px",cursor:"pointer",padding:"4px 0"},children:[e.jsx("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:e.jsx("input",{type:"checkbox",name:r.name,checked:t[r.name],onChange:E,style:{width:"22px",height:"22px",accentColor:"var(--color-primary)",cursor:"pointer"}})}),e.jsxs("span",{style:{color:"#334155",fontSize:"1rem",fontWeight:"500"},children:[e.jsx("span",{style:{marginRight:"8px"},children:r.icon}),r.label]})]},r.name))})]}),e.jsx("div",{style:{margin:"1rem 0",borderTop:"1px solid #eee"}}),e.jsx("p",{style:{color:"#666",marginBottom:"1rem"},children:i("contact_info")}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#333",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[i("contact_name")," ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{type:"text",value:n,onChange:r=>{v(r.target.value),localStorage.setItem("kisan_user_name",r.target.value)},style:{width:"100%",padding:"0.8rem",borderRadius:"4px",border:"1px solid #eee",background:"#fff"}})]}),e.jsxs("div",{children:[e.jsxs("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#333",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[i("phone_number")," ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("span",{style:{padding:"0.8rem",background:"#eee",borderRadius:"4px"},children:"+91"}),e.jsx("input",{type:"tel",name:"contactPhone",placeholder:"9876543210",maxLength:"10",value:I,onChange:r=>{const o=y(r.target.value).replace(/\D/g,"").slice(0,10);H(o),localStorage.setItem("kisan_user_mobile",o)},style:{flex:1,padding:"0.8rem",borderRadius:"4px",border:"1px solid #eee",background:"#fff"}})]})]}),t.type==="Buy"&&e.jsxs("div",{style:{backgroundColor:"#E3F2FD",color:"#0D47A1",padding:"12px",borderRadius:"8px",marginBottom:"1rem",border:"1px solid #BBDEFB",fontSize:"0.95rem",display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("span",{style:{fontSize:"1.5rem"},children:"â„¹ï¸"}),e.jsxs("span",{children:[e.jsxs("strong",{children:[i("buyer_note_title"),":"]}),e.jsx("br",{}),i("buyer_note_desc")]})]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer",marginBottom:"1.5rem"},children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,style:{width:"18px",height:"18px"}}),e.jsx("span",{style:{color:"var(--color-primary)",fontWeight:"500",fontSize:"0.9rem"},children:i("agree_terms")})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[p&&e.jsxs("button",{type:"button",onClick:()=>{window.confirm(i("confirm_cancel"))&&g("/my-products")},className:"btn",style:{flex:1,padding:"1rem",fontSize:"1rem",fontWeight:"bold",backgroundColor:"#f1f5f9",color:"#475569",border:"1px solid #cbd5e1"},children:["âŒ ",i("cancel")]}),e.jsx("button",{type:"submit",className:"btn btn-primary",style:{flex:1,padding:"1rem",fontSize:"1.1rem"},children:p?`âœï¸ ${i("update")||"Update"}`:`ðŸ“¤ ${i("next")}`}),e.jsxs(se,{to:"/",style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",textDecoration:"none",color:"#555",backgroundColor:"#fff",borderRadius:"4px",padding:"1rem",fontWeight:"bold",fontSize:"1.1rem",border:"1px solid #ccc"},children:["ðŸ  ",i("back_to_home")]})]})]})})]}),ye&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.8)",zIndex:2e3,display:"flex",justifyContent:"center",alignItems:"center",padding:"1rem"},children:e.jsxs("div",{className:"card fade-in",style:{maxWidth:"500px",width:"100%",maxHeight:"90vh",overflowY:"auto"},children:[e.jsx("h3",{style:{borderBottom:"1px solid #eee",paddingBottom:"10px",marginBottom:"1rem",color:"var(--color-primary)"},children:i("confirm_details_title")}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",fontSize:"0.95rem",marginBottom:"1.5rem"},children:[e.jsxs("strong",{style:{color:"#666"},children:[i("type_label"),":"]}),e.jsx("span",{style:{fontWeight:"bold",color:t.type==="Buy"?"#D32F2F":"#2E7D32"},children:t.type==="Buy"?i("want_to_buy"):i("want_to_sell")}),e.jsxs("strong",{style:{color:"#666"},children:[i("commodity"),":"]}),e.jsx("span",{children:t.commodity}),e.jsxs("strong",{style:{color:"#666"},children:[i("quantity"),":"]}),e.jsxs("span",{children:[t.quantity," ",t.unit]}),e.jsxs("strong",{style:{color:"#666"},children:[i("price"),":"]}),e.jsxs("span",{children:["â‚¹",t.targetPrice," / ",t.priceUnit]}),e.jsxs("strong",{style:{color:"#666"},children:[i("location"),":"]}),e.jsxs("span",{children:[t.district,", ",t.state]})]}),e.jsx("p",{style:{fontSize:"0.9rem",color:"#666",fontStyle:"italic",marginBottom:"1.5rem",background:"#f9f9f9",padding:"10px",borderRadius:"4px"},children:i("verify_warning")}),e.jsxs("div",{style:{display:"flex",gap:"1rem"},children:[e.jsx("button",{onClick:()=>G(!1),className:"btn btn-outline",style:{flex:1},children:i("verify_edit")}),e.jsx("button",{onClick:_e,className:"btn btn-primary",style:{flex:1,opacity:Q?.7:1},disabled:Q,children:i("confirm_post")})]})]})}),e.jsx(Le,{show:ge,onClose:()=>K(!1),type:t.type})]}):e.jsxs("div",{className:"container fade-in",style:{padding:"var(--spacing-xl) 0",maxWidth:"500px"},children:[e.jsx("h1",{style:{marginBottom:"var(--spacing-lg)",textAlign:"center"},children:t.type==="Buy"?i("i_want_buy"):i("list_product")}),e.jsxs("div",{className:"card",style:{padding:"2rem"},children:[e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:[i("contact_name")," *"]}),e.jsx("input",{ref:ee,type:"text",placeholder:i("placeholder_name"),value:n,onChange:r=>{v(r.target.value)},style:{width:"100%",padding:"0.75rem",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsxs("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:[i("phone_number")," *"]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("span",{style:{padding:"0.75rem",background:"#eee",borderRadius:"4px"},children:"+91"}),e.jsx("input",{ref:V,type:"tel",placeholder:"9876543210",maxLength:"10",value:I,onChange:r=>{const o=y(r.target.value);H(o.replace(/\D/g,""))},style:{flex:1,padding:"0.75rem",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}})]})]}),me?e.jsxs("div",{className:"fade-in",children:[e.jsxs("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:[i("enter_otp")," *"]}),e.jsx("input",{type:"text",placeholder:"1234",value:X,onChange:r=>pe(r.target.value),style:{width:"100%",marginBottom:"1rem",padding:"0.75rem",borderRadius:"var(--radius-sm)",border:"1px solid var(--color-border)"}}),e.jsx("button",{onClick:be,className:"btn btn-primary",style:{width:"100%",padding:"0.8rem"},children:i("verify_signin")})]}):e.jsx("button",{onClick:fe,className:"btn btn-primary",style:{width:"100%",padding:"0.8rem"},children:i("generate_otp")})]})]})};export{Ae as default};
