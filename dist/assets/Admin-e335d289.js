import{a as m,e as h,r as g,j as e,N as y}from"./index-4e9e071d.js";import{S as f}from"./SEO-6590514f.js";const w=()=>{const{user:d,loading:o}=m(),{listings:s,deleteListing:c}=h(),[r,p]=g.useState("");if(o)return e.jsx("div",{children:"Loading..."});if(!d||d.role!=="Admin")return e.jsx(y,{to:"/",replace:!0});const n=s.map(t=>({id:t.id,type:t.type,title:t.commodity||t.title,user:t.seller||t.contactName,mobile:t.contactMobile,date:new Date(t.timestamp||Date.now()).toLocaleDateString(),price:t.targetPrice?`${t.targetPrice}/${t.priceUnit}`:"Market",location:`${t.district||""}, ${t.state||""}`})).filter(t=>{var i,l,a;return((i=t.title)==null?void 0:i.toLowerCase().includes(r.toLowerCase()))||((l=t.mobile)==null?void 0:l.includes(r))||((a=t.user)==null?void 0:a.toLowerCase().includes(r.toLowerCase()))}),x=async(t,i)=>{window.confirm(`Are you sure you want to delete listing for "${i}"?`)&&await c(t)};return e.jsxs("div",{className:"container",style:{padding:"2rem 0"},children:[e.jsx(f,{title:"Admin Dashboard",description:"Admin management area"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[e.jsx("h1",{style:{color:"#1e293b"},children:"ðŸ›¡ï¸ Admin Dashboard"}),e.jsxs("div",{style:{padding:"0.5rem 1rem",background:"#e2e8f0",borderRadius:"8px",fontWeight:"bold"},children:["Admin: ",d.phone]})]}),e.jsx("div",{className:"card",style:{padding:"1.5rem",marginBottom:"2rem"},children:e.jsx("div",{style:{display:"flex",gap:"2rem",flexWrap:"wrap"},children:e.jsxs("div",{style:{flex:1,minWidth:"200px",padding:"1rem",background:"#eff6ff",borderRadius:"8px"},children:[e.jsx("h3",{style:{margin:0,color:"#1e40af"},children:"Total Listings"}),e.jsx("p",{style:{fontSize:"2rem",fontWeight:"bold",margin:"0.5rem 0"},children:s.length})]})})}),e.jsxs("div",{className:"card",style:{padding:"0",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"1rem",borderBottom:"1px solid #e2e8f0",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem",flexWrap:"wrap"},children:[e.jsx("h3",{style:{margin:0},children:"Moderation Queue"}),e.jsx("input",{type:"text",placeholder:"Search by crop, name, mobile...",value:r,onChange:t=>p(t.target.value),style:{padding:"0.5rem",borderRadius:"4px",border:"1px solid #cbd5e1",width:"300px"}})]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",textAlign:"left"},children:[e.jsx("thead",{style:{background:"#f8fafc",color:"#64748b",fontSize:"0.9rem"},children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"1rem"},children:"Date"}),e.jsx("th",{style:{padding:"1rem"},children:"Type"}),e.jsx("th",{style:{padding:"1rem"},children:"Commodity"}),e.jsx("th",{style:{padding:"1rem"},children:"User (Mobile)"}),e.jsx("th",{style:{padding:"1rem"},children:"Location"}),e.jsx("th",{style:{padding:"1rem",textAlign:"center"},children:"Actions"})]})}),e.jsx("tbody",{children:n.length>0?n.map(t=>e.jsxs("tr",{style:{borderBottom:"1px solid #e2e8f0"},children:[e.jsx("td",{style:{padding:"1rem"},children:t.date}),e.jsx("td",{style:{padding:"1rem"},children:e.jsx("span",{style:{padding:"2px 8px",borderRadius:"12px",fontSize:"0.8rem",background:t.type==="Buy"?"#fee2e2":"#dcfce7",color:t.type==="Buy"?"#dc2626":"#166534"},children:t.type})}),e.jsx("td",{style:{padding:"1rem",fontWeight:"500"},children:t.title}),e.jsxs("td",{style:{padding:"1rem"},children:[e.jsx("div",{children:t.user}),e.jsx("div",{style:{fontSize:"0.8rem",color:"#666"},children:t.mobile})]}),e.jsx("td",{style:{padding:"1rem",fontSize:"0.9rem",color:"#475569"},children:t.location}),e.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:e.jsx("button",{onClick:()=>x(t.id,t.title),style:{background:"#fee2e2",color:"#dc2626",border:"1px solid #fca5a5",padding:"4px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"0.9rem"},children:"Delete"})})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"6",style:{padding:"2rem",textAlign:"center",color:"#94a3b8"},children:"No listings found found matching search."})})})]})})]})]})};export{w as default};
