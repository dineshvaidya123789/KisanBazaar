import{r as o,a as z,u as C,d as k,h as R,j as e}from"./index-2478cb7d.js";const L=()=>{var x,h;const[u,d]=o.useState(1),[s,y]=o.useState(""),[c,b]=o.useState(""),[p,f]=o.useState(""),[m,i]=o.useState(""),[l,a]=o.useState(!1),{login:j}=z(),{t}=C(),v=k(),_=((h=(x=R().state)==null?void 0:x.from)==null?void 0:h.pathname)||"/",g=r=>r.replace(/[०-९]/g,n=>"०१२३४५६७८९".indexOf(n)),S=r=>{if(r.preventDefault(),s.length!==10){i("Please enter a valid 10-digit number.");return}a(!0),setTimeout(()=>{a(!1),d(2),i("")},800)},B=async r=>{r.preventDefault(),a(!0),i("");try{await j(s,c,"Farmer",p),v(_,{replace:!0})}catch(n){i(n)}finally{a(!1)}};return e.jsx("div",{className:"container fade-in",style:{padding:"var(--spacing-xl) 0",display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh"},children:e.jsxs("div",{className:"card",style:{maxWidth:"400px",width:"100%",padding:"2rem"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[e.jsx("h1",{style:{color:"var(--color-primary)"},children:t("login_title")}),e.jsx("p",{style:{color:"#666"},children:t("login_subtitle")})]}),m&&e.jsx("div",{style:{backgroundColor:"#ffebee",color:"#c62828",padding:"0.8rem",borderRadius:"4px",marginBottom:"1rem",textAlign:"center"},children:m}),u===1?e.jsxs("form",{onSubmit:S,children:[e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:t("label_city")}),e.jsx("input",{type:"text",value:p,onChange:r=>f(r.target.value),placeholder:t("placeholder_city"),style:{width:"100%",padding:"0.8rem",borderRadius:"4px",border:"1px solid #ccc",fontSize:"1rem"}})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:t("label_phone")}),e.jsxs("div",{style:{display:"flex"},children:[e.jsx("span",{style:{padding:"0.8rem",backgroundColor:"#f0f0f0",border:"1px solid #ccc",borderRight:"none",borderRadius:"4px 0 0 4px",color:"#555"},children:"+91"}),e.jsx("input",{type:"tel",value:s,onChange:r=>{const n=g(r.target.value);y(n.replace(/\D/g,""))},placeholder:t("placeholder_phone"),maxLength:"10",style:{flex:1,padding:"0.8rem",borderRadius:"0 4px 4px 0",border:"1px solid #ccc",fontSize:"1rem"},required:!0})]})]}),e.jsx("button",{type:"submit",className:"btn btn-primary",style:{width:"100%",fontSize:"1.1rem",padding:"1rem"},disabled:l,children:t(l?"btn_sending":"btn_get_otp")})]}):e.jsxs("form",{onSubmit:B,children:[e.jsxs("p",{style:{textAlign:"center",marginBottom:"1rem",color:"#555"},children:[t("otp_sent_to")," ",e.jsxs("strong",{children:["+91 ",s]}),e.jsx("br",{}),e.jsx("span",{style:{fontSize:"0.8rem",color:"var(--color-primary)",cursor:"pointer",textDecoration:"underline"},onClick:()=>d(1),children:t("change_number")})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:t("label_enter_otp")}),e.jsx("input",{type:"text",value:c,onChange:r=>{const n=g(r.target.value);b(n)},placeholder:t("placeholder_otp"),style:{width:"100%",padding:"0.8rem",borderRadius:"4px",border:"1px solid #ccc",fontSize:"1.2rem",textAlign:"center",letterSpacing:"5px"},required:!0}),e.jsx("div",{style:{textAlign:"center",marginTop:"0.5rem",fontSize:"0.85rem",color:"#888"},children:t("mock_otp_msg")})]}),e.jsx("button",{type:"submit",className:"btn btn-primary",style:{width:"100%",fontSize:"1.1rem",padding:"1rem"},disabled:l,children:t(l?"btn_verifying":"btn_verify_login")})]})]})})};export{L as default};
