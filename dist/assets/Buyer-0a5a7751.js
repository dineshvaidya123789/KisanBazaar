import{R as z,u as B,j as e,b as L,r as c,c as _,g as T}from"./index-2478cb7d.js";const M=z.memo(({product:t})=>{const{t:s,language:i}=B(),n=t[`title_${i}`]||t[`title_${i==="hi"?"hi":"en"}`]||t.title||t.commodity||"Unknown Product",g=t.location||t.district||"Unknown Location",d=t.price||t.targetPrice||"0",x=t.unit||t.priceUnit||"unit",a=t.quantity||"0";t.seller;const b=Array.isArray(t.images)&&t.images.length>0&&t.images[0],m=t.image&&typeof t.image=="string"&&t.image.length>5,p=b?t.images:m?[t.image]:[],l=p.length>0?p[0]:null,f=t[`description_${i}`]||t.description||t.comments||"No description available",u=t.category||"Others";return e.jsxs("div",{className:"card",style:{display:"flex",flexDirection:"column",height:"100%",padding:"0",overflow:"hidden"},children:[e.jsxs("div",{style:{height:"200px",backgroundColor:"#eee",position:"relative"},children:[l?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:l,alt:n,style:{width:"100%",height:"100%",objectFit:"cover"},loading:"lazy"}),p.length>1&&e.jsxs("div",{style:{position:"absolute",bottom:"10px",right:"10px",background:"rgba(0,0,0,0.6)",color:"white",padding:"3px 8px",borderRadius:"4px",fontSize:"0.8rem",fontWeight:"bold"},children:["+",p.length-1," Photos"]})]}):e.jsxs("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",color:"#94a3b8",background:"#f8fafc",borderBottom:"1px solid #eee"},children:[e.jsx("div",{style:{fontSize:"3rem"},children:"ðŸ“¦"}),e.jsx("div",{style:{fontSize:"0.9rem",marginTop:"8px",fontWeight:"500"},children:s("no_photo")})]}),e.jsx("span",{style:{position:"absolute",top:"10px",left:"10px",backgroundColor:t.type==="Buy"?"#D32F2F":"#1E4A35",color:"white",padding:"4px 10px",borderRadius:"20px",fontSize:"0.75rem",fontWeight:"bold",textTransform:"uppercase"},children:t.type==="Buy"?s("want_to_buy"):s("want_to_sell")}),e.jsx("span",{style:{position:"absolute",top:"10px",right:"10px",backgroundColor:"rgba(0,0,0,0.6)",color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"0.8rem"},children:g})]}),e.jsxs("div",{style:{padding:"var(--spacing-md)",flex:1,display:"flex",flexDirection:"column"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"8px"},children:[e.jsx("h3",{style:{fontSize:"1.2rem",margin:0},children:n}),e.jsx("span",{style:{backgroundColor:"#E8F5E9",color:"var(--color-primary-light)",padding:"2px 8px",borderRadius:"10px",fontSize:"0.8rem",fontWeight:"600"},children:u})]}),e.jsx("p",{style:{color:"var(--color-text-light)",fontSize:"0.9rem",marginBottom:"var(--spacing-md)",flex:1},children:f}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--spacing-md)"},children:[e.jsxs("div",{children:[e.jsx("span",{style:{display:"block",fontSize:"0.8rem",color:"#888"},children:(t.type==="Buy",s("price"))}),e.jsxs("span",{style:{fontSize:"1.2rem",fontWeight:"bold",color:t.type==="Buy"?"#D32F2F":"var(--color-primary)"},children:["â‚¹",d,e.jsxs("span",{style:{fontSize:"0.9rem",color:"#666",fontWeight:"normal"},children:["/",x]})]})]}),e.jsxs("div",{children:[e.jsx("span",{style:{display:"block",fontSize:"0.8rem",color:"#888"},children:t.type==="Buy"?s("needed"):s("available")}),e.jsxs("span",{style:{fontWeight:"500"},children:[a," ",x]})]})]}),t.type==="Sell"&&t.quality&&e.jsxs("div",{style:{marginBottom:"12px",fontSize:"0.85rem",color:"#666",backgroundColor:"#f9f9f9",padding:"6px 10px",borderRadius:"4px",borderLeft:"3px solid #4CAF50"},children:[e.jsxs("strong",{children:[s("quality"),":"]})," ",t.quality]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsxs("a",{href:t.contactMobile?`tel:${t.contactMobile}`:"#",className:"btn btn-outline",style:{flex:1,textDecoration:"none",display:"flex",alignItems:"center",justifyContent:"center"},onClick:h=>{t.contactMobile||(h.preventDefault(),alert("Contact number not available for this listing."))},children:["ðŸ“ž ",s("call_now")]}),e.jsxs("a",{href:t.contactMobile?`https://wa.me/${t.contactMobile}?text=Hi, I am interested in your ${n} listing on KisanBazaar.`:"#",target:"_blank",rel:"noopener noreferrer",className:"btn",style:{flex:1,backgroundColor:"#25D366",color:"white",borderColor:"#25D366",display:"flex",alignItems:"center",justifyContent:"center",textDecoration:"none"},onClick:h=>{t.contactMobile||(h.preventDefault(),alert("Contact number not available for this listing."))},children:["ðŸ’¬ ",s("whatsapp")]})]})]})]})}),P=()=>{const{buyerPosts:t,sellerListings:s}=L(),{t:i}=B(),[n,g]=c.useState("buy"),[d,x]=c.useState(""),[a,b]=c.useState("All"),[m,p]=c.useState({min:0,max:1e5}),[l,f]=c.useState(!1);c.useEffect(()=>{window.scrollTo(0,0)},[]);const u=z.useMemo(()=>{const r=new Set([...Object.keys(_),...Object.values(_)]);return Array.from(r).sort()},[]),j=(()=>(n==="buy"?s:t).filter(o=>{var w,S,C;const y=d.toLowerCase(),I=T(y),F=!d||((w=o.commodity)==null?void 0:w.toLowerCase().includes(y))||((S=o.location)==null?void 0:S.toLowerCase().includes(y))||((C=o.title)==null?void 0:C.toLowerCase().includes(y))||I.some(A=>{var k;return(k=o.commodity)==null?void 0:k.toLowerCase().includes(A)}),W=a==="All"||o.category===a;let v=parseFloat(o.price||o.expectedPrice||0);const D=v>=m.min&&v<=m.max;return F&&W&&D}))(),R=[{id:"All",icon:"ðŸŒ¾",label:i("filter_all")},{id:"Vegetables",icon:"ðŸ…",label:i("filter_veg")},{id:"Fruits",icon:"ðŸ¥­",label:i("filter_fruits")},{id:"Grains",icon:"ðŸŒ¾",label:i("filter_grains")}];return e.jsxs("div",{className:"buyer-page fade-in",style:{paddingBottom:"80px"},children:[e.jsxs("div",{className:"page-header",style:{background:"linear-gradient(135deg, var(--color-primary) 0%, var(--color-secondary) 100%)",color:"white",padding:"var(--spacing-xl) var(--spacing-md)",textAlign:"center",borderRadius:"0 0 var(--radius-lg) var(--radius-lg)",marginBottom:"var(--spacing-lg)",boxShadow:"0 4px 20px rgba(46, 125, 50, 0.2)"},children:[e.jsx("h1",{style:{marginBottom:"8px",fontSize:"2rem"},children:i("marketplace_title")}),e.jsx("p",{style:{color:"rgba(255, 255, 255, 0.9)",fontSize:"1.1rem"},children:i("buy_sell_hub")}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",marginTop:"2rem",background:"rgba(255, 255, 255, 0.15)",padding:"6px",borderRadius:"var(--radius-xl)",maxWidth:"400px",margin:"2rem auto 0",backdropFilter:"blur(10px)"},children:[e.jsxs("button",{onClick:()=>g("buy"),style:{flex:1,padding:"12px 24px",borderRadius:"var(--radius-lg)",background:n==="buy"?"white":"transparent",color:n==="buy"?"var(--color-primary)":"white",border:"none",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:n==="buy"?"0 4px 12px rgba(0,0,0,0.1)":"none"},children:[e.jsx("span",{style:{fontSize:"1.2rem"},children:"ðŸ›’"})," ",i("i_want_buy")]}),e.jsxs("button",{onClick:()=>g("sell"),style:{flex:1,padding:"12px 24px",borderRadius:"var(--radius-lg)",background:n==="sell"?"white":"transparent",color:n==="sell"?"var(--color-secondary)":"white",border:"none",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:n==="sell"?"0 4px 12px rgba(0,0,0,0.1)":"none"},children:[e.jsx("span",{style:{fontSize:"1.2rem"},children:"ðŸšœ"})," ",i("i_want_sell")]})]})]}),e.jsxs("div",{className:"container",children:[e.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"var(--spacing-lg)",position:"sticky",top:"80px",zIndex:10,flexWrap:"wrap"},children:[e.jsxs("div",{style:{flex:1,position:"relative",minWidth:"280px"},children:[e.jsx("input",{type:"text",list:"marketplace-suggestions",placeholder:i("search_placeholder"),value:d,onChange:r=>x(r.target.value),style:{width:"100%",padding:"1rem 1rem 1rem 3rem",borderRadius:"var(--radius-xl)",border:"1px solid #e0e0e0",boxShadow:"0 4px 12px rgba(0,0,0,0.05)",fontSize:"1rem"}}),e.jsx("datalist",{id:"marketplace-suggestions",children:u.map((r,o)=>e.jsx("option",{value:r},o))}),e.jsx("span",{style:{position:"absolute",left:"1rem",top:"50%",transform:"translateY(-50%)",fontSize:"1.2rem",color:"#666"},children:"ðŸ”"})]}),e.jsxs("button",{className:"btn",onClick:()=>f(!l),style:{background:l?"var(--color-primary)":"white",color:l?"white":"var(--color-primary)",border:"1px solid var(--color-primary)",borderRadius:"var(--radius-xl)",padding:"0 1.5rem",display:"flex",alignItems:"center",gap:"8px",fontWeight:"600"},children:[e.jsx("span",{children:"âš™ï¸"})," ",i("filters")]})]}),l&&e.jsxs("div",{className:"fade-in",style:{background:"white",padding:"1.5rem",borderRadius:"var(--radius-lg)",marginBottom:"var(--spacing-lg)",boxShadow:"var(--shadow-md)",border:"1px solid #eee"},children:[e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#666"},children:i("category")}),e.jsx("div",{style:{display:"flex",gap:"10px",overflowX:"auto",paddingBottom:"4px"},children:R.map(r=>e.jsxs("button",{onClick:()=>b(r.id),style:{padding:"8px 16px",borderRadius:"20px",border:`1px solid ${a===r.id?"var(--color-primary)":"#ddd"}`,background:a===r.id?"#e8f5e9":"white",color:a===r.id?"var(--color-primary)":"#666",cursor:"pointer",whiteSpace:"nowrap",transition:"all 0.2s"},children:[r.icon," ",r.label]},r.id))})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#666"},children:i("price_range")}),e.jsx("input",{type:"range",min:"0",max:"100000",step:"1000",style:{width:"100%",accentColor:"var(--color-primary)"}}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"4px",fontSize:"0.9rem",color:"#666"},children:[e.jsx("span",{children:"â‚¹0"}),e.jsx("span",{children:"â‚¹1,00,000+"})]})]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"var(--spacing-lg)"},children:j.length===0?e.jsxs("div",{style:{gridColumn:"1/-1",textAlign:"center",padding:"4rem 2rem",color:"#666"},children:[e.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem",opacity:.5},children:"ðŸƒ"}),e.jsx("h3",{children:i("no_posts_found")}),e.jsx("p",{children:i("try_adjusting_filters")})]}):j.map(r=>e.jsx(M,{product:r},r.id))})]})]})};export{P as default};
