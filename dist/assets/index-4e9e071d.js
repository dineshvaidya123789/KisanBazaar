var iI=Object.defineProperty;var sI=(t,e,n)=>e in t?iI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var An=(t,e,n)=>(sI(t,typeof e!="symbol"?e+"":e,n),n);function oI(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function zc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Wv={exports:{}},$c={},Kv={exports:{}},ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ea=Symbol.for("react.element"),aI=Symbol.for("react.portal"),lI=Symbol.for("react.fragment"),cI=Symbol.for("react.strict_mode"),uI=Symbol.for("react.profiler"),hI=Symbol.for("react.provider"),dI=Symbol.for("react.context"),fI=Symbol.for("react.forward_ref"),pI=Symbol.for("react.suspense"),mI=Symbol.for("react.memo"),gI=Symbol.for("react.lazy"),Cg=Symbol.iterator;function _I(t){return t===null||typeof t!="object"?null:(t=Cg&&t[Cg]||t["@@iterator"],typeof t=="function"?t:null)}var Gv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Qv=Object.assign,Yv={};function As(t,e,n){this.props=t,this.context=e,this.refs=Yv,this.updater=n||Gv}As.prototype.isReactComponent={};As.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};As.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Jv(){}Jv.prototype=As.prototype;function Af(t,e,n){this.props=t,this.context=e,this.refs=Yv,this.updater=n||Gv}var Cf=Af.prototype=new Jv;Cf.constructor=Af;Qv(Cf,As.prototype);Cf.isPureReactComponent=!0;var Pg=Array.isArray,Xv=Object.prototype.hasOwnProperty,Pf={current:null},Zv={key:!0,ref:!0,__self:!0,__source:!0};function ew(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Xv.call(e,r)&&!Zv.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Ea,type:t,key:s,ref:o,props:i,_owner:Pf.current}}function yI(t,e){return{$$typeof:Ea,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Rf(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ea}function vI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Rg=/\/+/g;function Xu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?vI(""+t.key):e.toString(36)}function Tl(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ea:case aI:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Xu(o,0):r,Pg(i)?(n="",t!=null&&(n=t.replace(Rg,"$&/")+"/"),Tl(i,e,n,"",function(u){return u})):i!=null&&(Rf(i)&&(i=yI(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Rg,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Pg(t))for(var l=0;l<t.length;l++){s=t[l];var c=r+Xu(s,l);o+=Tl(s,e,n,c,i)}else if(c=_I(t),typeof c=="function")for(t=c.call(t),l=0;!(s=t.next()).done;)s=s.value,c=r+Xu(s,l++),o+=Tl(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Qa(t,e,n){if(t==null)return t;var r=[],i=0;return Tl(t,r,"","",function(s){return e.call(n,s,i++)}),r}function wI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ft={current:null},Sl={transition:null},EI={ReactCurrentDispatcher:ft,ReactCurrentBatchConfig:Sl,ReactCurrentOwner:Pf};function tw(){throw Error("act(...) is not supported in production builds of React.")}ee.Children={map:Qa,forEach:function(t,e,n){Qa(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Qa(t,function(){e++}),e},toArray:function(t){return Qa(t,function(e){return e})||[]},only:function(t){if(!Rf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ee.Component=As;ee.Fragment=lI;ee.Profiler=uI;ee.PureComponent=Af;ee.StrictMode=cI;ee.Suspense=pI;ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EI;ee.act=tw;ee.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Qv({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Pf.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Xv.call(e,c)&&!Zv.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Ea,type:t.type,key:i,ref:s,props:r,_owner:o}};ee.createContext=function(t){return t={$$typeof:dI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:hI,_context:t},t.Consumer=t};ee.createElement=ew;ee.createFactory=function(t){var e=ew.bind(null,t);return e.type=t,e};ee.createRef=function(){return{current:null}};ee.forwardRef=function(t){return{$$typeof:fI,render:t}};ee.isValidElement=Rf;ee.lazy=function(t){return{$$typeof:gI,_payload:{_status:-1,_result:t},_init:wI}};ee.memo=function(t,e){return{$$typeof:mI,type:t,compare:e===void 0?null:e}};ee.startTransition=function(t){var e=Sl.transition;Sl.transition={};try{t()}finally{Sl.transition=e}};ee.unstable_act=tw;ee.useCallback=function(t,e){return ft.current.useCallback(t,e)};ee.useContext=function(t){return ft.current.useContext(t)};ee.useDebugValue=function(){};ee.useDeferredValue=function(t){return ft.current.useDeferredValue(t)};ee.useEffect=function(t,e){return ft.current.useEffect(t,e)};ee.useId=function(){return ft.current.useId()};ee.useImperativeHandle=function(t,e,n){return ft.current.useImperativeHandle(t,e,n)};ee.useInsertionEffect=function(t,e){return ft.current.useInsertionEffect(t,e)};ee.useLayoutEffect=function(t,e){return ft.current.useLayoutEffect(t,e)};ee.useMemo=function(t,e){return ft.current.useMemo(t,e)};ee.useReducer=function(t,e,n){return ft.current.useReducer(t,e,n)};ee.useRef=function(t){return ft.current.useRef(t)};ee.useState=function(t){return ft.current.useState(t)};ee.useSyncExternalStore=function(t,e,n){return ft.current.useSyncExternalStore(t,e,n)};ee.useTransition=function(){return ft.current.useTransition()};ee.version="18.3.1";Kv.exports=ee;var D=Kv.exports;const Gt=zc(D),TI=oI({__proto__:null,default:Gt},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SI=D,II=Symbol.for("react.element"),bI=Symbol.for("react.fragment"),kI=Object.prototype.hasOwnProperty,AI=SI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,CI={key:!0,ref:!0,__self:!0,__source:!0};function nw(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)kI.call(e,r)&&!CI.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:II,type:t,key:s,ref:o,props:i,_owner:AI.current}}$c.Fragment=bI;$c.jsx=nw;$c.jsxs=nw;Wv.exports=$c;var S=Wv.exports,rw={exports:{}},Pt={},iw={exports:{}},sw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,G){var X=z.length;z.push(G);e:for(;0<X;){var ve=X-1>>>1,Pe=z[ve];if(0<i(Pe,G))z[ve]=G,z[X]=Pe,X=ve;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var G=z[0],X=z.pop();if(X!==G){z[0]=X;e:for(var ve=0,Pe=z.length,Hr=Pe>>>1;ve<Hr;){var xt=2*(ve+1)-1,qr=z[xt],zt=xt+1,Gn=z[zt];if(0>i(qr,X))zt<Pe&&0>i(Gn,qr)?(z[ve]=Gn,z[zt]=X,ve=zt):(z[ve]=qr,z[xt]=X,ve=xt);else if(zt<Pe&&0>i(Gn,X))z[ve]=Gn,z[zt]=X,ve=zt;else break e}}return G}function i(z,G){var X=z.sortIndex-G.sortIndex;return X!==0?X:z.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,m=3,y=!1,P=!1,C=!1,x=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(z){for(var G=n(u);G!==null;){if(G.callback===null)r(u);else if(G.startTime<=z)r(u),G.sortIndex=G.expirationTime,e(c,G);else break;G=n(u)}}function V(z){if(C=!1,A(z),!P)if(n(c)!==null)P=!0,Bt(j);else{var G=n(u);G!==null&&kn(V,G.startTime-z)}}function j(z,G){P=!1,C&&(C=!1,I(_),_=-1),y=!0;var X=m;try{for(A(G),f=n(c);f!==null&&(!(f.expirationTime>G)||z&&!T());){var ve=f.callback;if(typeof ve=="function"){f.callback=null,m=f.priorityLevel;var Pe=ve(f.expirationTime<=G);G=t.unstable_now(),typeof Pe=="function"?f.callback=Pe:f===n(c)&&r(c),A(G)}else r(c);f=n(c)}if(f!==null)var Hr=!0;else{var xt=n(u);xt!==null&&kn(V,xt.startTime-G),Hr=!1}return Hr}finally{f=null,m=X,y=!1}}var M=!1,w=null,_=-1,E=5,k=-1;function T(){return!(t.unstable_now()-k<E)}function R(){if(w!==null){var z=t.unstable_now();k=z;var G=!0;try{G=w(!0,z)}finally{G?b():(M=!1,w=null)}}else M=!1}var b;if(typeof v=="function")b=function(){v(R)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,ye=te.port2;te.port1.onmessage=R,b=function(){ye.postMessage(null)}}else b=function(){x(R,0)};function Bt(z){w=z,M||(M=!0,b())}function kn(z,G){_=x(function(){z(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){P||y||(P=!0,Bt(j))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(z){switch(m){case 1:case 2:case 3:var G=3;break;default:G=m}var X=m;m=G;try{return z()}finally{m=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,G){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var X=m;m=z;try{return G()}finally{m=X}},t.unstable_scheduleCallback=function(z,G,X){var ve=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ve+X:ve):X=ve,z){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=X+Pe,z={id:d++,callback:G,priorityLevel:z,startTime:X,expirationTime:Pe,sortIndex:-1},X>ve?(z.sortIndex=X,e(u,z),n(c)===null&&z===n(u)&&(C?(I(_),_=-1):C=!0,kn(V,X-ve))):(z.sortIndex=Pe,e(c,z),P||y||(P=!0,Bt(j))),z},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(z){var G=m;return function(){var X=m;m=G;try{return z.apply(this,arguments)}finally{m=X}}}})(sw);iw.exports=sw;var PI=iw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RI=D,Ct=PI;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ow=new Set,qo={};function Ei(t,e){hs(t,e),hs(t+"Capture",e)}function hs(t,e){for(qo[t]=e,t=0;t<e.length;t++)ow.add(e[t])}var Ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yh=Object.prototype.hasOwnProperty,xI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xg={},Ng={};function NI(t){return Yh.call(Ng,t)?!0:Yh.call(xg,t)?!1:xI.test(t)?Ng[t]=!0:(xg[t]=!0,!1)}function DI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function OI(t,e,n,r){if(e===null||typeof e>"u"||DI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function pt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Je[t]=new pt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Je[e]=new pt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Je[t]=new pt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Je[t]=new pt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Je[t]=new pt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Je[t]=new pt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Je[t]=new pt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Je[t]=new pt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Je[t]=new pt(t,5,!1,t.toLowerCase(),null,!1,!1)});var xf=/[\-:]([a-z])/g;function Nf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(xf,Nf);Je[e]=new pt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(xf,Nf);Je[e]=new pt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(xf,Nf);Je[e]=new pt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Je[t]=new pt(t,1,!1,t.toLowerCase(),null,!1,!1)});Je.xlinkHref=new pt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Je[t]=new pt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Df(t,e,n,r){var i=Je.hasOwnProperty(e)?Je[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(OI(e,n,i,r)&&(n=null),r||i===null?NI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Wn=RI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ya=Symbol.for("react.element"),Li=Symbol.for("react.portal"),Fi=Symbol.for("react.fragment"),Of=Symbol.for("react.strict_mode"),Jh=Symbol.for("react.profiler"),aw=Symbol.for("react.provider"),lw=Symbol.for("react.context"),Vf=Symbol.for("react.forward_ref"),Xh=Symbol.for("react.suspense"),Zh=Symbol.for("react.suspense_list"),Mf=Symbol.for("react.memo"),rr=Symbol.for("react.lazy"),cw=Symbol.for("react.offscreen"),Dg=Symbol.iterator;function ro(t){return t===null||typeof t!="object"?null:(t=Dg&&t[Dg]||t["@@iterator"],typeof t=="function"?t:null)}var Ie=Object.assign,Zu;function yo(t){if(Zu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Zu=e&&e[1]||""}return`
`+Zu+t}var eh=!1;function th(t,e){if(!t||eh)return"";eh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{eh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?yo(t):""}function VI(t){switch(t.tag){case 5:return yo(t.type);case 16:return yo("Lazy");case 13:return yo("Suspense");case 19:return yo("SuspenseList");case 0:case 2:case 15:return t=th(t.type,!1),t;case 11:return t=th(t.type.render,!1),t;case 1:return t=th(t.type,!0),t;default:return""}}function ed(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Fi:return"Fragment";case Li:return"Portal";case Jh:return"Profiler";case Of:return"StrictMode";case Xh:return"Suspense";case Zh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case lw:return(t.displayName||"Context")+".Consumer";case aw:return(t._context.displayName||"Context")+".Provider";case Vf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Mf:return e=t.displayName||null,e!==null?e:ed(t.type)||"Memo";case rr:e=t._payload,t=t._init;try{return ed(t(e))}catch{}}return null}function MI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ed(e);case 8:return e===Of?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Pr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function uw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function LI(t){var e=uw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ja(t){t._valueTracker||(t._valueTracker=LI(t))}function hw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=uw(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Wl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function td(t,e){var n=e.checked;return Ie({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Og(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Pr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function dw(t,e){e=e.checked,e!=null&&Df(t,"checked",e,!1)}function nd(t,e){dw(t,e);var n=Pr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?rd(t,e.type,n):e.hasOwnProperty("defaultValue")&&rd(t,e.type,Pr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Vg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function rd(t,e,n){(e!=="number"||Wl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var vo=Array.isArray;function Yi(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Pr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function id(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Ie({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Mg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(vo(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Pr(n)}}function fw(t,e){var n=Pr(e.value),r=Pr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Lg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function pw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function sd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?pw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Xa,mw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Xa=Xa||document.createElement("div"),Xa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Xa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Wo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ao={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},FI=["Webkit","ms","Moz","O"];Object.keys(Ao).forEach(function(t){FI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ao[e]=Ao[t]})});function gw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ao.hasOwnProperty(t)&&Ao[t]?(""+e).trim():e+"px"}function _w(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=gw(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var jI=Ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function od(t,e){if(e){if(jI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function ad(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ld=null;function Lf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var cd=null,Ji=null,Xi=null;function Fg(t){if(t=Ia(t)){if(typeof cd!="function")throw Error(U(280));var e=t.stateNode;e&&(e=Gc(e),cd(t.stateNode,t.type,e))}}function yw(t){Ji?Xi?Xi.push(t):Xi=[t]:Ji=t}function vw(){if(Ji){var t=Ji,e=Xi;if(Xi=Ji=null,Fg(t),e)for(t=0;t<e.length;t++)Fg(e[t])}}function ww(t,e){return t(e)}function Ew(){}var nh=!1;function Tw(t,e,n){if(nh)return t(e,n);nh=!0;try{return ww(t,e,n)}finally{nh=!1,(Ji!==null||Xi!==null)&&(Ew(),vw())}}function Ko(t,e){var n=t.stateNode;if(n===null)return null;var r=Gc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var ud=!1;if(Ln)try{var io={};Object.defineProperty(io,"passive",{get:function(){ud=!0}}),window.addEventListener("test",io,io),window.removeEventListener("test",io,io)}catch{ud=!1}function UI(t,e,n,r,i,s,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var Co=!1,Kl=null,Gl=!1,hd=null,BI={onError:function(t){Co=!0,Kl=t}};function zI(t,e,n,r,i,s,o,l,c){Co=!1,Kl=null,UI.apply(BI,arguments)}function $I(t,e,n,r,i,s,o,l,c){if(zI.apply(this,arguments),Co){if(Co){var u=Kl;Co=!1,Kl=null}else throw Error(U(198));Gl||(Gl=!0,hd=u)}}function Ti(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Sw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function jg(t){if(Ti(t)!==t)throw Error(U(188))}function HI(t){var e=t.alternate;if(!e){if(e=Ti(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return jg(i),t;if(s===r)return jg(i),e;s=s.sibling}throw Error(U(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function Iw(t){return t=HI(t),t!==null?bw(t):null}function bw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=bw(t);if(e!==null)return e;t=t.sibling}return null}var kw=Ct.unstable_scheduleCallback,Ug=Ct.unstable_cancelCallback,qI=Ct.unstable_shouldYield,WI=Ct.unstable_requestPaint,xe=Ct.unstable_now,KI=Ct.unstable_getCurrentPriorityLevel,Ff=Ct.unstable_ImmediatePriority,Aw=Ct.unstable_UserBlockingPriority,Ql=Ct.unstable_NormalPriority,GI=Ct.unstable_LowPriority,Cw=Ct.unstable_IdlePriority,Hc=null,pn=null;function QI(t){if(pn&&typeof pn.onCommitFiberRoot=="function")try{pn.onCommitFiberRoot(Hc,t,void 0,(t.current.flags&128)===128)}catch{}}var Jt=Math.clz32?Math.clz32:XI,YI=Math.log,JI=Math.LN2;function XI(t){return t>>>=0,t===0?32:31-(YI(t)/JI|0)|0}var Za=64,el=4194304;function wo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Yl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=wo(l):(s&=o,s!==0&&(r=wo(s)))}else o=n&~i,o!==0?r=wo(o):s!==0&&(r=wo(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Jt(e),i=1<<n,r|=t[n],e&=~i;return r}function ZI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function eb(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Jt(s),l=1<<o,c=i[o];c===-1?(!(l&n)||l&r)&&(i[o]=ZI(l,e)):c<=e&&(t.expiredLanes|=l),s&=~l}}function dd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Pw(){var t=Za;return Za<<=1,!(Za&4194240)&&(Za=64),t}function rh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ta(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Jt(e),t[e]=n}function tb(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Jt(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function jf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Jt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var le=0;function Rw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var xw,Uf,Nw,Dw,Ow,fd=!1,tl=[],mr=null,gr=null,_r=null,Go=new Map,Qo=new Map,sr=[],nb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Bg(t,e){switch(t){case"focusin":case"focusout":mr=null;break;case"dragenter":case"dragleave":gr=null;break;case"mouseover":case"mouseout":_r=null;break;case"pointerover":case"pointerout":Go.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qo.delete(e.pointerId)}}function so(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ia(e),e!==null&&Uf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function rb(t,e,n,r,i){switch(e){case"focusin":return mr=so(mr,t,e,n,r,i),!0;case"dragenter":return gr=so(gr,t,e,n,r,i),!0;case"mouseover":return _r=so(_r,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Go.set(s,so(Go.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Qo.set(s,so(Qo.get(s)||null,t,e,n,r,i)),!0}return!1}function Vw(t){var e=ti(t.target);if(e!==null){var n=Ti(e);if(n!==null){if(e=n.tag,e===13){if(e=Sw(n),e!==null){t.blockedOn=e,Ow(t.priority,function(){Nw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Il(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=pd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ld=r,n.target.dispatchEvent(r),ld=null}else return e=Ia(n),e!==null&&Uf(e),t.blockedOn=n,!1;e.shift()}return!0}function zg(t,e,n){Il(t)&&n.delete(e)}function ib(){fd=!1,mr!==null&&Il(mr)&&(mr=null),gr!==null&&Il(gr)&&(gr=null),_r!==null&&Il(_r)&&(_r=null),Go.forEach(zg),Qo.forEach(zg)}function oo(t,e){t.blockedOn===e&&(t.blockedOn=null,fd||(fd=!0,Ct.unstable_scheduleCallback(Ct.unstable_NormalPriority,ib)))}function Yo(t){function e(i){return oo(i,t)}if(0<tl.length){oo(tl[0],t);for(var n=1;n<tl.length;n++){var r=tl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(mr!==null&&oo(mr,t),gr!==null&&oo(gr,t),_r!==null&&oo(_r,t),Go.forEach(e),Qo.forEach(e),n=0;n<sr.length;n++)r=sr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<sr.length&&(n=sr[0],n.blockedOn===null);)Vw(n),n.blockedOn===null&&sr.shift()}var Zi=Wn.ReactCurrentBatchConfig,Jl=!0;function sb(t,e,n,r){var i=le,s=Zi.transition;Zi.transition=null;try{le=1,Bf(t,e,n,r)}finally{le=i,Zi.transition=s}}function ob(t,e,n,r){var i=le,s=Zi.transition;Zi.transition=null;try{le=4,Bf(t,e,n,r)}finally{le=i,Zi.transition=s}}function Bf(t,e,n,r){if(Jl){var i=pd(t,e,n,r);if(i===null)fh(t,e,r,Xl,n),Bg(t,r);else if(rb(i,t,e,n,r))r.stopPropagation();else if(Bg(t,r),e&4&&-1<nb.indexOf(t)){for(;i!==null;){var s=Ia(i);if(s!==null&&xw(s),s=pd(t,e,n,r),s===null&&fh(t,e,r,Xl,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else fh(t,e,r,null,n)}}var Xl=null;function pd(t,e,n,r){if(Xl=null,t=Lf(r),t=ti(t),t!==null)if(e=Ti(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Sw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Xl=t,null}function Mw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(KI()){case Ff:return 1;case Aw:return 4;case Ql:case GI:return 16;case Cw:return 536870912;default:return 16}default:return 16}}var hr=null,zf=null,bl=null;function Lw(){if(bl)return bl;var t,e=zf,n=e.length,r,i="value"in hr?hr.value:hr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return bl=i.slice(t,1<r?1-r:void 0)}function kl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function nl(){return!0}function $g(){return!1}function Rt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?nl:$g,this.isPropagationStopped=$g,this}return Ie(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=nl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=nl)},persist:function(){},isPersistent:nl}),e}var Cs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$f=Rt(Cs),Sa=Ie({},Cs,{view:0,detail:0}),ab=Rt(Sa),ih,sh,ao,qc=Ie({},Sa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ao&&(ao&&t.type==="mousemove"?(ih=t.screenX-ao.screenX,sh=t.screenY-ao.screenY):sh=ih=0,ao=t),ih)},movementY:function(t){return"movementY"in t?t.movementY:sh}}),Hg=Rt(qc),lb=Ie({},qc,{dataTransfer:0}),cb=Rt(lb),ub=Ie({},Sa,{relatedTarget:0}),oh=Rt(ub),hb=Ie({},Cs,{animationName:0,elapsedTime:0,pseudoElement:0}),db=Rt(hb),fb=Ie({},Cs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),pb=Rt(fb),mb=Ie({},Cs,{data:0}),qg=Rt(mb),gb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_b={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vb(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=yb[t])?!!e[t]:!1}function Hf(){return vb}var wb=Ie({},Sa,{key:function(t){if(t.key){var e=gb[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=kl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?_b[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hf,charCode:function(t){return t.type==="keypress"?kl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?kl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Eb=Rt(wb),Tb=Ie({},qc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wg=Rt(Tb),Sb=Ie({},Sa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hf}),Ib=Rt(Sb),bb=Ie({},Cs,{propertyName:0,elapsedTime:0,pseudoElement:0}),kb=Rt(bb),Ab=Ie({},qc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Cb=Rt(Ab),Pb=[9,13,27,32],qf=Ln&&"CompositionEvent"in window,Po=null;Ln&&"documentMode"in document&&(Po=document.documentMode);var Rb=Ln&&"TextEvent"in window&&!Po,Fw=Ln&&(!qf||Po&&8<Po&&11>=Po),Kg=String.fromCharCode(32),Gg=!1;function jw(t,e){switch(t){case"keyup":return Pb.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Uw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ji=!1;function xb(t,e){switch(t){case"compositionend":return Uw(e);case"keypress":return e.which!==32?null:(Gg=!0,Kg);case"textInput":return t=e.data,t===Kg&&Gg?null:t;default:return null}}function Nb(t,e){if(ji)return t==="compositionend"||!qf&&jw(t,e)?(t=Lw(),bl=zf=hr=null,ji=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Fw&&e.locale!=="ko"?null:e.data;default:return null}}var Db={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Db[t.type]:e==="textarea"}function Bw(t,e,n,r){yw(r),e=Zl(e,"onChange"),0<e.length&&(n=new $f("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ro=null,Jo=null;function Ob(t){Xw(t,0)}function Wc(t){var e=zi(t);if(hw(e))return t}function Vb(t,e){if(t==="change")return e}var zw=!1;if(Ln){var ah;if(Ln){var lh="oninput"in document;if(!lh){var Yg=document.createElement("div");Yg.setAttribute("oninput","return;"),lh=typeof Yg.oninput=="function"}ah=lh}else ah=!1;zw=ah&&(!document.documentMode||9<document.documentMode)}function Jg(){Ro&&(Ro.detachEvent("onpropertychange",$w),Jo=Ro=null)}function $w(t){if(t.propertyName==="value"&&Wc(Jo)){var e=[];Bw(e,Jo,t,Lf(t)),Tw(Ob,e)}}function Mb(t,e,n){t==="focusin"?(Jg(),Ro=e,Jo=n,Ro.attachEvent("onpropertychange",$w)):t==="focusout"&&Jg()}function Lb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Wc(Jo)}function Fb(t,e){if(t==="click")return Wc(e)}function jb(t,e){if(t==="input"||t==="change")return Wc(e)}function Ub(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var tn=typeof Object.is=="function"?Object.is:Ub;function Xo(t,e){if(tn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Yh.call(e,i)||!tn(t[i],e[i]))return!1}return!0}function Xg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Zg(t,e){var n=Xg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Xg(n)}}function Hw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Hw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function qw(){for(var t=window,e=Wl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Wl(t.document)}return e}function Wf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Bb(t){var e=qw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Hw(n.ownerDocument.documentElement,n)){if(r!==null&&Wf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Zg(n,s);var o=Zg(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var zb=Ln&&"documentMode"in document&&11>=document.documentMode,Ui=null,md=null,xo=null,gd=!1;function e_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;gd||Ui==null||Ui!==Wl(r)||(r=Ui,"selectionStart"in r&&Wf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),xo&&Xo(xo,r)||(xo=r,r=Zl(md,"onSelect"),0<r.length&&(e=new $f("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ui)))}function rl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Bi={animationend:rl("Animation","AnimationEnd"),animationiteration:rl("Animation","AnimationIteration"),animationstart:rl("Animation","AnimationStart"),transitionend:rl("Transition","TransitionEnd")},ch={},Ww={};Ln&&(Ww=document.createElement("div").style,"AnimationEvent"in window||(delete Bi.animationend.animation,delete Bi.animationiteration.animation,delete Bi.animationstart.animation),"TransitionEvent"in window||delete Bi.transitionend.transition);function Kc(t){if(ch[t])return ch[t];if(!Bi[t])return t;var e=Bi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Ww)return ch[t]=e[n];return t}var Kw=Kc("animationend"),Gw=Kc("animationiteration"),Qw=Kc("animationstart"),Yw=Kc("transitionend"),Jw=new Map,t_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lr(t,e){Jw.set(t,e),Ei(e,[t])}for(var uh=0;uh<t_.length;uh++){var hh=t_[uh],$b=hh.toLowerCase(),Hb=hh[0].toUpperCase()+hh.slice(1);Lr($b,"on"+Hb)}Lr(Kw,"onAnimationEnd");Lr(Gw,"onAnimationIteration");Lr(Qw,"onAnimationStart");Lr("dblclick","onDoubleClick");Lr("focusin","onFocus");Lr("focusout","onBlur");Lr(Yw,"onTransitionEnd");hs("onMouseEnter",["mouseout","mouseover"]);hs("onMouseLeave",["mouseout","mouseover"]);hs("onPointerEnter",["pointerout","pointerover"]);hs("onPointerLeave",["pointerout","pointerover"]);Ei("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ei("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ei("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ei("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ei("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ei("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Eo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qb=new Set("cancel close invalid load scroll toggle".split(" ").concat(Eo));function n_(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,$I(r,e,void 0,t),t.currentTarget=null}function Xw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==s&&i.isPropagationStopped())break e;n_(i,l,u),s=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==s&&i.isPropagationStopped())break e;n_(i,l,u),s=c}}}if(Gl)throw t=hd,Gl=!1,hd=null,t}function fe(t,e){var n=e[Ed];n===void 0&&(n=e[Ed]=new Set);var r=t+"__bubble";n.has(r)||(Zw(e,t,2,!1),n.add(r))}function dh(t,e,n){var r=0;e&&(r|=4),Zw(n,t,r,e)}var il="_reactListening"+Math.random().toString(36).slice(2);function Zo(t){if(!t[il]){t[il]=!0,ow.forEach(function(n){n!=="selectionchange"&&(qb.has(n)||dh(n,!1,t),dh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[il]||(e[il]=!0,dh("selectionchange",!1,e))}}function Zw(t,e,n,r){switch(Mw(e)){case 1:var i=sb;break;case 4:i=ob;break;default:i=Bf}n=i.bind(null,e,n,t),i=void 0,!ud||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function fh(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=ti(l),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}l=l.parentNode}}r=r.return}Tw(function(){var u=s,d=Lf(n),f=[];e:{var m=Jw.get(t);if(m!==void 0){var y=$f,P=t;switch(t){case"keypress":if(kl(n)===0)break e;case"keydown":case"keyup":y=Eb;break;case"focusin":P="focus",y=oh;break;case"focusout":P="blur",y=oh;break;case"beforeblur":case"afterblur":y=oh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Hg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=cb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Ib;break;case Kw:case Gw:case Qw:y=db;break;case Yw:y=kb;break;case"scroll":y=ab;break;case"wheel":y=Cb;break;case"copy":case"cut":case"paste":y=pb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Wg}var C=(e&4)!==0,x=!C&&t==="scroll",I=C?m!==null?m+"Capture":null:m;C=[];for(var v=u,A;v!==null;){A=v;var V=A.stateNode;if(A.tag===5&&V!==null&&(A=V,I!==null&&(V=Ko(v,I),V!=null&&C.push(ea(v,V,A)))),x)break;v=v.return}0<C.length&&(m=new y(m,P,null,n,d),f.push({event:m,listeners:C}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&n!==ld&&(P=n.relatedTarget||n.fromElement)&&(ti(P)||P[Fn]))break e;if((y||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,y?(P=n.relatedTarget||n.toElement,y=u,P=P?ti(P):null,P!==null&&(x=Ti(P),P!==x||P.tag!==5&&P.tag!==6)&&(P=null)):(y=null,P=u),y!==P)){if(C=Hg,V="onMouseLeave",I="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(C=Wg,V="onPointerLeave",I="onPointerEnter",v="pointer"),x=y==null?m:zi(y),A=P==null?m:zi(P),m=new C(V,v+"leave",y,n,d),m.target=x,m.relatedTarget=A,V=null,ti(d)===u&&(C=new C(I,v+"enter",P,n,d),C.target=A,C.relatedTarget=x,V=C),x=V,y&&P)t:{for(C=y,I=P,v=0,A=C;A;A=xi(A))v++;for(A=0,V=I;V;V=xi(V))A++;for(;0<v-A;)C=xi(C),v--;for(;0<A-v;)I=xi(I),A--;for(;v--;){if(C===I||I!==null&&C===I.alternate)break t;C=xi(C),I=xi(I)}C=null}else C=null;y!==null&&r_(f,m,y,C,!1),P!==null&&x!==null&&r_(f,x,P,C,!0)}}e:{if(m=u?zi(u):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var j=Vb;else if(Qg(m))if(zw)j=jb;else{j=Lb;var M=Mb}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(j=Fb);if(j&&(j=j(t,u))){Bw(f,j,n,d);break e}M&&M(t,m,u),t==="focusout"&&(M=m._wrapperState)&&M.controlled&&m.type==="number"&&rd(m,"number",m.value)}switch(M=u?zi(u):window,t){case"focusin":(Qg(M)||M.contentEditable==="true")&&(Ui=M,md=u,xo=null);break;case"focusout":xo=md=Ui=null;break;case"mousedown":gd=!0;break;case"contextmenu":case"mouseup":case"dragend":gd=!1,e_(f,n,d);break;case"selectionchange":if(zb)break;case"keydown":case"keyup":e_(f,n,d)}var w;if(qf)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else ji?jw(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(Fw&&n.locale!=="ko"&&(ji||_!=="onCompositionStart"?_==="onCompositionEnd"&&ji&&(w=Lw()):(hr=d,zf="value"in hr?hr.value:hr.textContent,ji=!0)),M=Zl(u,_),0<M.length&&(_=new qg(_,t,null,n,d),f.push({event:_,listeners:M}),w?_.data=w:(w=Uw(n),w!==null&&(_.data=w)))),(w=Rb?xb(t,n):Nb(t,n))&&(u=Zl(u,"onBeforeInput"),0<u.length&&(d=new qg("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=w))}Xw(f,e)})}function ea(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Zl(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ko(t,n),s!=null&&r.unshift(ea(t,s,i)),s=Ko(t,e),s!=null&&r.push(ea(t,s,i))),t=t.return}return r}function xi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function r_(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,i?(c=Ko(n,s),c!=null&&o.unshift(ea(n,c,l))):i||(c=Ko(n,s),c!=null&&o.push(ea(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Wb=/\r\n?/g,Kb=/\u0000|\uFFFD/g;function i_(t){return(typeof t=="string"?t:""+t).replace(Wb,`
`).replace(Kb,"")}function sl(t,e,n){if(e=i_(e),i_(t)!==e&&n)throw Error(U(425))}function ec(){}var _d=null,yd=null;function vd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var wd=typeof setTimeout=="function"?setTimeout:void 0,Gb=typeof clearTimeout=="function"?clearTimeout:void 0,s_=typeof Promise=="function"?Promise:void 0,Qb=typeof queueMicrotask=="function"?queueMicrotask:typeof s_<"u"?function(t){return s_.resolve(null).then(t).catch(Yb)}:wd;function Yb(t){setTimeout(function(){throw t})}function ph(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Yo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Yo(e)}function yr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function o_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ps=Math.random().toString(36).slice(2),fn="__reactFiber$"+Ps,ta="__reactProps$"+Ps,Fn="__reactContainer$"+Ps,Ed="__reactEvents$"+Ps,Jb="__reactListeners$"+Ps,Xb="__reactHandles$"+Ps;function ti(t){var e=t[fn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Fn]||n[fn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=o_(t);t!==null;){if(n=t[fn])return n;t=o_(t)}return e}t=n,n=t.parentNode}return null}function Ia(t){return t=t[fn]||t[Fn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function zi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function Gc(t){return t[ta]||null}var Td=[],$i=-1;function Fr(t){return{current:t}}function ge(t){0>$i||(t.current=Td[$i],Td[$i]=null,$i--)}function he(t,e){$i++,Td[$i]=t.current,t.current=e}var Rr={},ot=Fr(Rr),vt=Fr(!1),ci=Rr;function ds(t,e){var n=t.type.contextTypes;if(!n)return Rr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function wt(t){return t=t.childContextTypes,t!=null}function tc(){ge(vt),ge(ot)}function a_(t,e,n){if(ot.current!==Rr)throw Error(U(168));he(ot,e),he(vt,n)}function e0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(U(108,MI(t)||"Unknown",i));return Ie({},n,r)}function nc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Rr,ci=ot.current,he(ot,t),he(vt,vt.current),!0}function l_(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=e0(t,e,ci),r.__reactInternalMemoizedMergedChildContext=t,ge(vt),ge(ot),he(ot,t)):ge(vt),he(vt,n)}var Rn=null,Qc=!1,mh=!1;function t0(t){Rn===null?Rn=[t]:Rn.push(t)}function Zb(t){Qc=!0,t0(t)}function jr(){if(!mh&&Rn!==null){mh=!0;var t=0,e=le;try{var n=Rn;for(le=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Rn=null,Qc=!1}catch(i){throw Rn!==null&&(Rn=Rn.slice(t+1)),kw(Ff,jr),i}finally{le=e,mh=!1}}return null}var Hi=[],qi=0,rc=null,ic=0,Dt=[],Ot=0,ui=null,xn=1,Nn="";function Jr(t,e){Hi[qi++]=ic,Hi[qi++]=rc,rc=t,ic=e}function n0(t,e,n){Dt[Ot++]=xn,Dt[Ot++]=Nn,Dt[Ot++]=ui,ui=t;var r=xn;t=Nn;var i=32-Jt(r)-1;r&=~(1<<i),n+=1;var s=32-Jt(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,xn=1<<32-Jt(e)+i|n<<i|r,Nn=s+t}else xn=1<<s|n<<i|r,Nn=t}function Kf(t){t.return!==null&&(Jr(t,1),n0(t,1,0))}function Gf(t){for(;t===rc;)rc=Hi[--qi],Hi[qi]=null,ic=Hi[--qi],Hi[qi]=null;for(;t===ui;)ui=Dt[--Ot],Dt[Ot]=null,Nn=Dt[--Ot],Dt[Ot]=null,xn=Dt[--Ot],Dt[Ot]=null}var kt=null,It=null,we=!1,Wt=null;function r0(t,e){var n=Mt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function c_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,kt=t,It=yr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,kt=t,It=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ui!==null?{id:xn,overflow:Nn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Mt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,kt=t,It=null,!0):!1;default:return!1}}function Sd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Id(t){if(we){var e=It;if(e){var n=e;if(!c_(t,e)){if(Sd(t))throw Error(U(418));e=yr(n.nextSibling);var r=kt;e&&c_(t,e)?r0(r,n):(t.flags=t.flags&-4097|2,we=!1,kt=t)}}else{if(Sd(t))throw Error(U(418));t.flags=t.flags&-4097|2,we=!1,kt=t}}}function u_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;kt=t}function ol(t){if(t!==kt)return!1;if(!we)return u_(t),we=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!vd(t.type,t.memoizedProps)),e&&(e=It)){if(Sd(t))throw i0(),Error(U(418));for(;e;)r0(t,e),e=yr(e.nextSibling)}if(u_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){It=yr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}It=null}}else It=kt?yr(t.stateNode.nextSibling):null;return!0}function i0(){for(var t=It;t;)t=yr(t.nextSibling)}function fs(){It=kt=null,we=!1}function Qf(t){Wt===null?Wt=[t]:Wt.push(t)}var ek=Wn.ReactCurrentBatchConfig;function lo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function al(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function h_(t){var e=t._init;return e(t._payload)}function s0(t){function e(I,v){if(t){var A=I.deletions;A===null?(I.deletions=[v],I.flags|=16):A.push(v)}}function n(I,v){if(!t)return null;for(;v!==null;)e(I,v),v=v.sibling;return null}function r(I,v){for(I=new Map;v!==null;)v.key!==null?I.set(v.key,v):I.set(v.index,v),v=v.sibling;return I}function i(I,v){return I=Tr(I,v),I.index=0,I.sibling=null,I}function s(I,v,A){return I.index=A,t?(A=I.alternate,A!==null?(A=A.index,A<v?(I.flags|=2,v):A):(I.flags|=2,v)):(I.flags|=1048576,v)}function o(I){return t&&I.alternate===null&&(I.flags|=2),I}function l(I,v,A,V){return v===null||v.tag!==6?(v=Th(A,I.mode,V),v.return=I,v):(v=i(v,A),v.return=I,v)}function c(I,v,A,V){var j=A.type;return j===Fi?d(I,v,A.props.children,V,A.key):v!==null&&(v.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===rr&&h_(j)===v.type)?(V=i(v,A.props),V.ref=lo(I,v,A),V.return=I,V):(V=Dl(A.type,A.key,A.props,null,I.mode,V),V.ref=lo(I,v,A),V.return=I,V)}function u(I,v,A,V){return v===null||v.tag!==4||v.stateNode.containerInfo!==A.containerInfo||v.stateNode.implementation!==A.implementation?(v=Sh(A,I.mode,V),v.return=I,v):(v=i(v,A.children||[]),v.return=I,v)}function d(I,v,A,V,j){return v===null||v.tag!==7?(v=ai(A,I.mode,V,j),v.return=I,v):(v=i(v,A),v.return=I,v)}function f(I,v,A){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Th(""+v,I.mode,A),v.return=I,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ya:return A=Dl(v.type,v.key,v.props,null,I.mode,A),A.ref=lo(I,null,v),A.return=I,A;case Li:return v=Sh(v,I.mode,A),v.return=I,v;case rr:var V=v._init;return f(I,V(v._payload),A)}if(vo(v)||ro(v))return v=ai(v,I.mode,A,null),v.return=I,v;al(I,v)}return null}function m(I,v,A,V){var j=v!==null?v.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return j!==null?null:l(I,v,""+A,V);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Ya:return A.key===j?c(I,v,A,V):null;case Li:return A.key===j?u(I,v,A,V):null;case rr:return j=A._init,m(I,v,j(A._payload),V)}if(vo(A)||ro(A))return j!==null?null:d(I,v,A,V,null);al(I,A)}return null}function y(I,v,A,V,j){if(typeof V=="string"&&V!==""||typeof V=="number")return I=I.get(A)||null,l(v,I,""+V,j);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Ya:return I=I.get(V.key===null?A:V.key)||null,c(v,I,V,j);case Li:return I=I.get(V.key===null?A:V.key)||null,u(v,I,V,j);case rr:var M=V._init;return y(I,v,A,M(V._payload),j)}if(vo(V)||ro(V))return I=I.get(A)||null,d(v,I,V,j,null);al(v,V)}return null}function P(I,v,A,V){for(var j=null,M=null,w=v,_=v=0,E=null;w!==null&&_<A.length;_++){w.index>_?(E=w,w=null):E=w.sibling;var k=m(I,w,A[_],V);if(k===null){w===null&&(w=E);break}t&&w&&k.alternate===null&&e(I,w),v=s(k,v,_),M===null?j=k:M.sibling=k,M=k,w=E}if(_===A.length)return n(I,w),we&&Jr(I,_),j;if(w===null){for(;_<A.length;_++)w=f(I,A[_],V),w!==null&&(v=s(w,v,_),M===null?j=w:M.sibling=w,M=w);return we&&Jr(I,_),j}for(w=r(I,w);_<A.length;_++)E=y(w,I,_,A[_],V),E!==null&&(t&&E.alternate!==null&&w.delete(E.key===null?_:E.key),v=s(E,v,_),M===null?j=E:M.sibling=E,M=E);return t&&w.forEach(function(T){return e(I,T)}),we&&Jr(I,_),j}function C(I,v,A,V){var j=ro(A);if(typeof j!="function")throw Error(U(150));if(A=j.call(A),A==null)throw Error(U(151));for(var M=j=null,w=v,_=v=0,E=null,k=A.next();w!==null&&!k.done;_++,k=A.next()){w.index>_?(E=w,w=null):E=w.sibling;var T=m(I,w,k.value,V);if(T===null){w===null&&(w=E);break}t&&w&&T.alternate===null&&e(I,w),v=s(T,v,_),M===null?j=T:M.sibling=T,M=T,w=E}if(k.done)return n(I,w),we&&Jr(I,_),j;if(w===null){for(;!k.done;_++,k=A.next())k=f(I,k.value,V),k!==null&&(v=s(k,v,_),M===null?j=k:M.sibling=k,M=k);return we&&Jr(I,_),j}for(w=r(I,w);!k.done;_++,k=A.next())k=y(w,I,_,k.value,V),k!==null&&(t&&k.alternate!==null&&w.delete(k.key===null?_:k.key),v=s(k,v,_),M===null?j=k:M.sibling=k,M=k);return t&&w.forEach(function(R){return e(I,R)}),we&&Jr(I,_),j}function x(I,v,A,V){if(typeof A=="object"&&A!==null&&A.type===Fi&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case Ya:e:{for(var j=A.key,M=v;M!==null;){if(M.key===j){if(j=A.type,j===Fi){if(M.tag===7){n(I,M.sibling),v=i(M,A.props.children),v.return=I,I=v;break e}}else if(M.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===rr&&h_(j)===M.type){n(I,M.sibling),v=i(M,A.props),v.ref=lo(I,M,A),v.return=I,I=v;break e}n(I,M);break}else e(I,M);M=M.sibling}A.type===Fi?(v=ai(A.props.children,I.mode,V,A.key),v.return=I,I=v):(V=Dl(A.type,A.key,A.props,null,I.mode,V),V.ref=lo(I,v,A),V.return=I,I=V)}return o(I);case Li:e:{for(M=A.key;v!==null;){if(v.key===M)if(v.tag===4&&v.stateNode.containerInfo===A.containerInfo&&v.stateNode.implementation===A.implementation){n(I,v.sibling),v=i(v,A.children||[]),v.return=I,I=v;break e}else{n(I,v);break}else e(I,v);v=v.sibling}v=Sh(A,I.mode,V),v.return=I,I=v}return o(I);case rr:return M=A._init,x(I,v,M(A._payload),V)}if(vo(A))return P(I,v,A,V);if(ro(A))return C(I,v,A,V);al(I,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,v!==null&&v.tag===6?(n(I,v.sibling),v=i(v,A),v.return=I,I=v):(n(I,v),v=Th(A,I.mode,V),v.return=I,I=v),o(I)):n(I,v)}return x}var ps=s0(!0),o0=s0(!1),sc=Fr(null),oc=null,Wi=null,Yf=null;function Jf(){Yf=Wi=oc=null}function Xf(t){var e=sc.current;ge(sc),t._currentValue=e}function bd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function es(t,e){oc=t,Yf=Wi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(yt=!0),t.firstContext=null)}function jt(t){var e=t._currentValue;if(Yf!==t)if(t={context:t,memoizedValue:e,next:null},Wi===null){if(oc===null)throw Error(U(308));Wi=t,oc.dependencies={lanes:0,firstContext:t}}else Wi=Wi.next=t;return e}var ni=null;function Zf(t){ni===null?ni=[t]:ni.push(t)}function a0(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Zf(e)):(n.next=i.next,i.next=n),e.interleaved=n,jn(t,r)}function jn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ir=!1;function ep(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function l0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Vn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function vr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,oe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,jn(t,n)}return i=r.interleaved,i===null?(e.next=e,Zf(r)):(e.next=i.next,i.next=e),r.interleaved=e,jn(t,n)}function Al(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,jf(t,n)}}function d_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ac(t,e,n,r){var i=t.updateQueue;ir=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?s=u:o.next=u,o=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(s!==null){var f=i.baseState;o=0,d=u=c=null,l=s;do{var m=l.lane,y=l.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var P=t,C=l;switch(m=e,y=n,C.tag){case 1:if(P=C.payload,typeof P=="function"){f=P.call(y,f,m);break e}f=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=C.payload,m=typeof P=="function"?P.call(y,f,m):P,m==null)break e;f=Ie({},f,m);break e;case 2:ir=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[l]:m.push(l))}else y={eventTime:y,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=y,c=f):d=d.next=y,o|=m;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;m=l,l=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(1);if(d===null&&(c=f),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);di|=o,t.lanes=o,t.memoizedState=f}}function f_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(U(191,i));i.call(r)}}}var ba={},mn=Fr(ba),na=Fr(ba),ra=Fr(ba);function ri(t){if(t===ba)throw Error(U(174));return t}function tp(t,e){switch(he(ra,e),he(na,t),he(mn,ba),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:sd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=sd(e,t)}ge(mn),he(mn,e)}function ms(){ge(mn),ge(na),ge(ra)}function c0(t){ri(ra.current);var e=ri(mn.current),n=sd(e,t.type);e!==n&&(he(na,t),he(mn,n))}function np(t){na.current===t&&(ge(mn),ge(na))}var Ee=Fr(0);function lc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var gh=[];function rp(){for(var t=0;t<gh.length;t++)gh[t]._workInProgressVersionPrimary=null;gh.length=0}var Cl=Wn.ReactCurrentDispatcher,_h=Wn.ReactCurrentBatchConfig,hi=0,Te=null,Ue=null,qe=null,cc=!1,No=!1,ia=0,tk=0;function et(){throw Error(U(321))}function ip(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!tn(t[n],e[n]))return!1;return!0}function sp(t,e,n,r,i,s){if(hi=s,Te=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Cl.current=t===null||t.memoizedState===null?sk:ok,t=n(r,i),No){s=0;do{if(No=!1,ia=0,25<=s)throw Error(U(301));s+=1,qe=Ue=null,e.updateQueue=null,Cl.current=ak,t=n(r,i)}while(No)}if(Cl.current=uc,e=Ue!==null&&Ue.next!==null,hi=0,qe=Ue=Te=null,cc=!1,e)throw Error(U(300));return t}function op(){var t=ia!==0;return ia=0,t}function hn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qe===null?Te.memoizedState=qe=t:qe=qe.next=t,qe}function Ut(){if(Ue===null){var t=Te.alternate;t=t!==null?t.memoizedState:null}else t=Ue.next;var e=qe===null?Te.memoizedState:qe.next;if(e!==null)qe=e,Ue=t;else{if(t===null)throw Error(U(310));Ue=t,t={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},qe===null?Te.memoizedState=qe=t:qe=qe.next=t}return qe}function sa(t,e){return typeof e=="function"?e(t):e}function yh(t){var e=Ut(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=Ue,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,c=null,u=s;do{var d=u.lane;if((hi&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=r):c=c.next=f,Te.lanes|=d,di|=d}u=u.next}while(u!==null&&u!==s);c===null?o=r:c.next=l,tn(r,e.memoizedState)||(yt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Te.lanes|=s,di|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function vh(t){var e=Ut(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);tn(s,e.memoizedState)||(yt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function u0(){}function h0(t,e){var n=Te,r=Ut(),i=e(),s=!tn(r.memoizedState,i);if(s&&(r.memoizedState=i,yt=!0),r=r.queue,ap(p0.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||qe!==null&&qe.memoizedState.tag&1){if(n.flags|=2048,oa(9,f0.bind(null,n,r,i,e),void 0,null),We===null)throw Error(U(349));hi&30||d0(n,e,i)}return i}function d0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Te.updateQueue,e===null?(e={lastEffect:null,stores:null},Te.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function f0(t,e,n,r){e.value=n,e.getSnapshot=r,m0(e)&&g0(t)}function p0(t,e,n){return n(function(){m0(e)&&g0(t)})}function m0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!tn(t,n)}catch{return!0}}function g0(t){var e=jn(t,1);e!==null&&Xt(e,t,1,-1)}function p_(t){var e=hn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sa,lastRenderedState:t},e.queue=t,t=t.dispatch=ik.bind(null,Te,t),[e.memoizedState,t]}function oa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Te.updateQueue,e===null?(e={lastEffect:null,stores:null},Te.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function _0(){return Ut().memoizedState}function Pl(t,e,n,r){var i=hn();Te.flags|=t,i.memoizedState=oa(1|e,n,void 0,r===void 0?null:r)}function Yc(t,e,n,r){var i=Ut();r=r===void 0?null:r;var s=void 0;if(Ue!==null){var o=Ue.memoizedState;if(s=o.destroy,r!==null&&ip(r,o.deps)){i.memoizedState=oa(e,n,s,r);return}}Te.flags|=t,i.memoizedState=oa(1|e,n,s,r)}function m_(t,e){return Pl(8390656,8,t,e)}function ap(t,e){return Yc(2048,8,t,e)}function y0(t,e){return Yc(4,2,t,e)}function v0(t,e){return Yc(4,4,t,e)}function w0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function E0(t,e,n){return n=n!=null?n.concat([t]):null,Yc(4,4,w0.bind(null,e,t),n)}function lp(){}function T0(t,e){var n=Ut();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ip(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function S0(t,e){var n=Ut();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ip(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function I0(t,e,n){return hi&21?(tn(n,e)||(n=Pw(),Te.lanes|=n,di|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,yt=!0),t.memoizedState=n)}function nk(t,e){var n=le;le=n!==0&&4>n?n:4,t(!0);var r=_h.transition;_h.transition={};try{t(!1),e()}finally{le=n,_h.transition=r}}function b0(){return Ut().memoizedState}function rk(t,e,n){var r=Er(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},k0(t))A0(e,n);else if(n=a0(t,e,n,r),n!==null){var i=ht();Xt(n,t,r,i),C0(n,e,r)}}function ik(t,e,n){var r=Er(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(k0(t))A0(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,tn(l,o)){var c=e.interleaved;c===null?(i.next=i,Zf(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=a0(t,e,i,r),n!==null&&(i=ht(),Xt(n,t,r,i),C0(n,e,r))}}function k0(t){var e=t.alternate;return t===Te||e!==null&&e===Te}function A0(t,e){No=cc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function C0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,jf(t,n)}}var uc={readContext:jt,useCallback:et,useContext:et,useEffect:et,useImperativeHandle:et,useInsertionEffect:et,useLayoutEffect:et,useMemo:et,useReducer:et,useRef:et,useState:et,useDebugValue:et,useDeferredValue:et,useTransition:et,useMutableSource:et,useSyncExternalStore:et,useId:et,unstable_isNewReconciler:!1},sk={readContext:jt,useCallback:function(t,e){return hn().memoizedState=[t,e===void 0?null:e],t},useContext:jt,useEffect:m_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Pl(4194308,4,w0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Pl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Pl(4,2,t,e)},useMemo:function(t,e){var n=hn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=hn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=rk.bind(null,Te,t),[r.memoizedState,t]},useRef:function(t){var e=hn();return t={current:t},e.memoizedState=t},useState:p_,useDebugValue:lp,useDeferredValue:function(t){return hn().memoizedState=t},useTransition:function(){var t=p_(!1),e=t[0];return t=nk.bind(null,t[1]),hn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Te,i=hn();if(we){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),We===null)throw Error(U(349));hi&30||d0(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,m_(p0.bind(null,r,s,t),[t]),r.flags|=2048,oa(9,f0.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=hn(),e=We.identifierPrefix;if(we){var n=Nn,r=xn;n=(r&~(1<<32-Jt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ia++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=tk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ok={readContext:jt,useCallback:T0,useContext:jt,useEffect:ap,useImperativeHandle:E0,useInsertionEffect:y0,useLayoutEffect:v0,useMemo:S0,useReducer:yh,useRef:_0,useState:function(){return yh(sa)},useDebugValue:lp,useDeferredValue:function(t){var e=Ut();return I0(e,Ue.memoizedState,t)},useTransition:function(){var t=yh(sa)[0],e=Ut().memoizedState;return[t,e]},useMutableSource:u0,useSyncExternalStore:h0,useId:b0,unstable_isNewReconciler:!1},ak={readContext:jt,useCallback:T0,useContext:jt,useEffect:ap,useImperativeHandle:E0,useInsertionEffect:y0,useLayoutEffect:v0,useMemo:S0,useReducer:vh,useRef:_0,useState:function(){return vh(sa)},useDebugValue:lp,useDeferredValue:function(t){var e=Ut();return Ue===null?e.memoizedState=t:I0(e,Ue.memoizedState,t)},useTransition:function(){var t=vh(sa)[0],e=Ut().memoizedState;return[t,e]},useMutableSource:u0,useSyncExternalStore:h0,useId:b0,unstable_isNewReconciler:!1};function Ht(t,e){if(t&&t.defaultProps){e=Ie({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function kd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ie({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Jc={isMounted:function(t){return(t=t._reactInternals)?Ti(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ht(),i=Er(t),s=Vn(r,i);s.payload=e,n!=null&&(s.callback=n),e=vr(t,s,i),e!==null&&(Xt(e,t,i,r),Al(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ht(),i=Er(t),s=Vn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=vr(t,s,i),e!==null&&(Xt(e,t,i,r),Al(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ht(),r=Er(t),i=Vn(n,r);i.tag=2,e!=null&&(i.callback=e),e=vr(t,i,r),e!==null&&(Xt(e,t,r,n),Al(e,t,r))}};function g_(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Xo(n,r)||!Xo(i,s):!0}function P0(t,e,n){var r=!1,i=Rr,s=e.contextType;return typeof s=="object"&&s!==null?s=jt(s):(i=wt(e)?ci:ot.current,r=e.contextTypes,s=(r=r!=null)?ds(t,i):Rr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Jc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function __(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Jc.enqueueReplaceState(e,e.state,null)}function Ad(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},ep(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=jt(s):(s=wt(e)?ci:ot.current,i.context=ds(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(kd(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Jc.enqueueReplaceState(i,i.state,null),ac(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function gs(t,e){try{var n="",r=e;do n+=VI(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function wh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Cd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var lk=typeof WeakMap=="function"?WeakMap:Map;function R0(t,e,n){n=Vn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){dc||(dc=!0,Fd=r),Cd(t,e)},n}function x0(t,e,n){n=Vn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Cd(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Cd(t,e),typeof r!="function"&&(wr===null?wr=new Set([this]):wr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function y_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new lk;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Tk.bind(null,t,e,n),e.then(t,t))}function v_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function w_(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Vn(-1,1),e.tag=2,vr(n,e,1))),n.lanes|=1),t)}var ck=Wn.ReactCurrentOwner,yt=!1;function ut(t,e,n,r){e.child=t===null?o0(e,null,n,r):ps(e,t.child,n,r)}function E_(t,e,n,r,i){n=n.render;var s=e.ref;return es(e,i),r=sp(t,e,n,r,s,i),n=op(),t!==null&&!yt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Un(t,e,i)):(we&&n&&Kf(e),e.flags|=1,ut(t,e,r,i),e.child)}function T_(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!gp(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,N0(t,e,s,r,i)):(t=Dl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Xo,n(o,r)&&t.ref===e.ref)return Un(t,e,i)}return e.flags|=1,t=Tr(s,r),t.ref=e.ref,t.return=e,e.child=t}function N0(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Xo(s,r)&&t.ref===e.ref)if(yt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(yt=!0);else return e.lanes=t.lanes,Un(t,e,i)}return Pd(t,e,n,r,i)}function D0(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},he(Gi,St),St|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,he(Gi,St),St|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,he(Gi,St),St|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,he(Gi,St),St|=r;return ut(t,e,i,n),e.child}function O0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Pd(t,e,n,r,i){var s=wt(n)?ci:ot.current;return s=ds(e,s),es(e,i),n=sp(t,e,n,r,s,i),r=op(),t!==null&&!yt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Un(t,e,i)):(we&&r&&Kf(e),e.flags|=1,ut(t,e,n,i),e.child)}function S_(t,e,n,r,i){if(wt(n)){var s=!0;nc(e)}else s=!1;if(es(e,i),e.stateNode===null)Rl(t,e),P0(e,n,r),Ad(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=jt(u):(u=wt(n)?ci:ot.current,u=ds(e,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&__(e,o,r,u),ir=!1;var m=e.memoizedState;o.state=m,ac(e,r,o,i),c=e.memoizedState,l!==r||m!==c||vt.current||ir?(typeof d=="function"&&(kd(e,n,d,r),c=e.memoizedState),(l=ir||g_(e,n,l,r,m,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,l0(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Ht(e.type,l),o.props=u,f=e.pendingProps,m=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=jt(c):(c=wt(n)?ci:ot.current,c=ds(e,c));var y=n.getDerivedStateFromProps;(d=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||m!==c)&&__(e,o,r,c),ir=!1,m=e.memoizedState,o.state=m,ac(e,r,o,i);var P=e.memoizedState;l!==f||m!==P||vt.current||ir?(typeof y=="function"&&(kd(e,n,y,r),P=e.memoizedState),(u=ir||g_(e,n,u,r,m,P,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,P,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,P,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=P),o.props=r,o.state=P,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Rd(t,e,n,r,s,i)}function Rd(t,e,n,r,i,s){O0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&l_(e,n,!1),Un(t,e,s);r=e.stateNode,ck.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ps(e,t.child,null,s),e.child=ps(e,null,l,s)):ut(t,e,l,s),e.memoizedState=r.state,i&&l_(e,n,!0),e.child}function V0(t){var e=t.stateNode;e.pendingContext?a_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&a_(t,e.context,!1),tp(t,e.containerInfo)}function I_(t,e,n,r,i){return fs(),Qf(i),e.flags|=256,ut(t,e,n,r),e.child}var xd={dehydrated:null,treeContext:null,retryLane:0};function Nd(t){return{baseLanes:t,cachePool:null,transitions:null}}function M0(t,e,n){var r=e.pendingProps,i=Ee.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),he(Ee,i&1),t===null)return Id(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=eu(o,r,0,null),t=ai(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Nd(n),e.memoizedState=xd,t):cp(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return uk(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Tr(i,c),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Tr(l,s):(s=ai(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Nd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=xd,r}return s=t.child,t=s.sibling,r=Tr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function cp(t,e){return e=eu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ll(t,e,n,r){return r!==null&&Qf(r),ps(e,t.child,null,n),t=cp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function uk(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=wh(Error(U(422))),ll(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=eu({mode:"visible",children:r.children},i,0,null),s=ai(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ps(e,t.child,null,o),e.child.memoizedState=Nd(o),e.memoizedState=xd,s);if(!(e.mode&1))return ll(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(U(419)),r=wh(s,r,void 0),ll(t,e,o,r)}if(l=(o&t.childLanes)!==0,yt||l){if(r=We,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,jn(t,i),Xt(r,t,i,-1))}return mp(),r=wh(Error(U(421))),ll(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Sk.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,It=yr(i.nextSibling),kt=e,we=!0,Wt=null,t!==null&&(Dt[Ot++]=xn,Dt[Ot++]=Nn,Dt[Ot++]=ui,xn=t.id,Nn=t.overflow,ui=e),e=cp(e,r.children),e.flags|=4096,e)}function b_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),bd(t.return,e,n)}function Eh(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function L0(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(ut(t,e,r.children,n),r=Ee.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&b_(t,n,e);else if(t.tag===19)b_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(he(Ee,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&lc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Eh(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&lc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Eh(e,!0,n,null,s);break;case"together":Eh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Rl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Un(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),di|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Tr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Tr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function hk(t,e,n){switch(e.tag){case 3:V0(e),fs();break;case 5:c0(e);break;case 1:wt(e.type)&&nc(e);break;case 4:tp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;he(sc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(he(Ee,Ee.current&1),e.flags|=128,null):n&e.child.childLanes?M0(t,e,n):(he(Ee,Ee.current&1),t=Un(t,e,n),t!==null?t.sibling:null);he(Ee,Ee.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return L0(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),he(Ee,Ee.current),r)break;return null;case 22:case 23:return e.lanes=0,D0(t,e,n)}return Un(t,e,n)}var F0,Dd,j0,U0;F0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Dd=function(){};j0=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ri(mn.current);var s=null;switch(n){case"input":i=td(t,i),r=td(t,r),s=[];break;case"select":i=Ie({},i,{value:void 0}),r=Ie({},r,{value:void 0}),s=[];break;case"textarea":i=id(t,i),r=id(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ec)}od(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(qo.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(qo.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&fe("scroll",t),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};U0=function(t,e,n,r){n!==r&&(e.flags|=4)};function co(t,e){if(!we)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function tt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function dk(t,e,n){var r=e.pendingProps;switch(Gf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tt(e),null;case 1:return wt(e.type)&&tc(),tt(e),null;case 3:return r=e.stateNode,ms(),ge(vt),ge(ot),rp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ol(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Wt!==null&&(Bd(Wt),Wt=null))),Dd(t,e),tt(e),null;case 5:np(e);var i=ri(ra.current);if(n=e.type,t!==null&&e.stateNode!=null)j0(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return tt(e),null}if(t=ri(mn.current),ol(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[fn]=e,r[ta]=s,t=(e.mode&1)!==0,n){case"dialog":fe("cancel",r),fe("close",r);break;case"iframe":case"object":case"embed":fe("load",r);break;case"video":case"audio":for(i=0;i<Eo.length;i++)fe(Eo[i],r);break;case"source":fe("error",r);break;case"img":case"image":case"link":fe("error",r),fe("load",r);break;case"details":fe("toggle",r);break;case"input":Og(r,s),fe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},fe("invalid",r);break;case"textarea":Mg(r,s),fe("invalid",r)}od(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&sl(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&sl(r.textContent,l,t),i=["children",""+l]):qo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&fe("scroll",r)}switch(n){case"input":Ja(r),Vg(r,s,!0);break;case"textarea":Ja(r),Lg(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ec)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=pw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[fn]=e,t[ta]=r,F0(t,e,!1,!1),e.stateNode=t;e:{switch(o=ad(n,r),n){case"dialog":fe("cancel",t),fe("close",t),i=r;break;case"iframe":case"object":case"embed":fe("load",t),i=r;break;case"video":case"audio":for(i=0;i<Eo.length;i++)fe(Eo[i],t);i=r;break;case"source":fe("error",t),i=r;break;case"img":case"image":case"link":fe("error",t),fe("load",t),i=r;break;case"details":fe("toggle",t),i=r;break;case"input":Og(t,r),i=td(t,r),fe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ie({},r,{value:void 0}),fe("invalid",t);break;case"textarea":Mg(t,r),i=id(t,r),fe("invalid",t);break;default:i=r}od(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?_w(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&mw(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Wo(t,c):typeof c=="number"&&Wo(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(qo.hasOwnProperty(s)?c!=null&&s==="onScroll"&&fe("scroll",t):c!=null&&Df(t,s,c,o))}switch(n){case"input":Ja(t),Vg(t,r,!1);break;case"textarea":Ja(t),Lg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Pr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Yi(t,!!r.multiple,s,!1):r.defaultValue!=null&&Yi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ec)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return tt(e),null;case 6:if(t&&e.stateNode!=null)U0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=ri(ra.current),ri(mn.current),ol(e)){if(r=e.stateNode,n=e.memoizedProps,r[fn]=e,(s=r.nodeValue!==n)&&(t=kt,t!==null))switch(t.tag){case 3:sl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&sl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[fn]=e,e.stateNode=r}return tt(e),null;case 13:if(ge(Ee),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(we&&It!==null&&e.mode&1&&!(e.flags&128))i0(),fs(),e.flags|=98560,s=!1;else if(s=ol(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(U(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[fn]=e}else fs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;tt(e),s=!1}else Wt!==null&&(Bd(Wt),Wt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ee.current&1?Be===0&&(Be=3):mp())),e.updateQueue!==null&&(e.flags|=4),tt(e),null);case 4:return ms(),Dd(t,e),t===null&&Zo(e.stateNode.containerInfo),tt(e),null;case 10:return Xf(e.type._context),tt(e),null;case 17:return wt(e.type)&&tc(),tt(e),null;case 19:if(ge(Ee),s=e.memoizedState,s===null)return tt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)co(s,!1);else{if(Be!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=lc(t),o!==null){for(e.flags|=128,co(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return he(Ee,Ee.current&1|2),e.child}t=t.sibling}s.tail!==null&&xe()>_s&&(e.flags|=128,r=!0,co(s,!1),e.lanes=4194304)}else{if(!r)if(t=lc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),co(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!we)return tt(e),null}else 2*xe()-s.renderingStartTime>_s&&n!==1073741824&&(e.flags|=128,r=!0,co(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=xe(),e.sibling=null,n=Ee.current,he(Ee,r?n&1|2:n&1),e):(tt(e),null);case 22:case 23:return pp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?St&1073741824&&(tt(e),e.subtreeFlags&6&&(e.flags|=8192)):tt(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function fk(t,e){switch(Gf(e),e.tag){case 1:return wt(e.type)&&tc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ms(),ge(vt),ge(ot),rp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return np(e),null;case 13:if(ge(Ee),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));fs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ge(Ee),null;case 4:return ms(),null;case 10:return Xf(e.type._context),null;case 22:case 23:return pp(),null;case 24:return null;default:return null}}var cl=!1,it=!1,pk=typeof WeakSet=="function"?WeakSet:Set,q=null;function Ki(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ce(t,e,r)}else n.current=null}function Od(t,e,n){try{n()}catch(r){Ce(t,e,r)}}var k_=!1;function mk(t,e){if(_d=Jl,t=qw(),Wf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,f=t,m=null;t:for(;;){for(var y;f!==n||i!==0&&f.nodeType!==3||(l=o+i),f!==s||r!==0&&f.nodeType!==3||(c=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(y=f.firstChild)!==null;)m=f,f=y;for(;;){if(f===t)break t;if(m===n&&++u===i&&(l=o),m===s&&++d===r&&(c=o),(y=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=y}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(yd={focusedElem:t,selectionRange:n},Jl=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var P=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var C=P.memoizedProps,x=P.memoizedState,I=e.stateNode,v=I.getSnapshotBeforeUpdate(e.elementType===e.type?C:Ht(e.type,C),x);I.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(V){Ce(e,e.return,V)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return P=k_,k_=!1,P}function Do(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Od(e,n,s)}i=i.next}while(i!==r)}}function Xc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Vd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function B0(t){var e=t.alternate;e!==null&&(t.alternate=null,B0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[fn],delete e[ta],delete e[Ed],delete e[Jb],delete e[Xb])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function z0(t){return t.tag===5||t.tag===3||t.tag===4}function A_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||z0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Md(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ec));else if(r!==4&&(t=t.child,t!==null))for(Md(t,e,n),t=t.sibling;t!==null;)Md(t,e,n),t=t.sibling}function Ld(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ld(t,e,n),t=t.sibling;t!==null;)Ld(t,e,n),t=t.sibling}var Ke=null,qt=!1;function tr(t,e,n){for(n=n.child;n!==null;)$0(t,e,n),n=n.sibling}function $0(t,e,n){if(pn&&typeof pn.onCommitFiberUnmount=="function")try{pn.onCommitFiberUnmount(Hc,n)}catch{}switch(n.tag){case 5:it||Ki(n,e);case 6:var r=Ke,i=qt;Ke=null,tr(t,e,n),Ke=r,qt=i,Ke!==null&&(qt?(t=Ke,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ke.removeChild(n.stateNode));break;case 18:Ke!==null&&(qt?(t=Ke,n=n.stateNode,t.nodeType===8?ph(t.parentNode,n):t.nodeType===1&&ph(t,n),Yo(t)):ph(Ke,n.stateNode));break;case 4:r=Ke,i=qt,Ke=n.stateNode.containerInfo,qt=!0,tr(t,e,n),Ke=r,qt=i;break;case 0:case 11:case 14:case 15:if(!it&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Od(n,e,o),i=i.next}while(i!==r)}tr(t,e,n);break;case 1:if(!it&&(Ki(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ce(n,e,l)}tr(t,e,n);break;case 21:tr(t,e,n);break;case 22:n.mode&1?(it=(r=it)||n.memoizedState!==null,tr(t,e,n),it=r):tr(t,e,n);break;default:tr(t,e,n)}}function C_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new pk),e.forEach(function(r){var i=Ik.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function $t(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ke=l.stateNode,qt=!1;break e;case 3:Ke=l.stateNode.containerInfo,qt=!0;break e;case 4:Ke=l.stateNode.containerInfo,qt=!0;break e}l=l.return}if(Ke===null)throw Error(U(160));$0(s,o,i),Ke=null,qt=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){Ce(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)H0(e,t),e=e.sibling}function H0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if($t(e,t),ln(t),r&4){try{Do(3,t,t.return),Xc(3,t)}catch(C){Ce(t,t.return,C)}try{Do(5,t,t.return)}catch(C){Ce(t,t.return,C)}}break;case 1:$t(e,t),ln(t),r&512&&n!==null&&Ki(n,n.return);break;case 5:if($t(e,t),ln(t),r&512&&n!==null&&Ki(n,n.return),t.flags&32){var i=t.stateNode;try{Wo(i,"")}catch(C){Ce(t,t.return,C)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&dw(i,s),ad(l,o);var u=ad(l,s);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?_w(i,f):d==="dangerouslySetInnerHTML"?mw(i,f):d==="children"?Wo(i,f):Df(i,d,f,u)}switch(l){case"input":nd(i,s);break;case"textarea":fw(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?Yi(i,!!s.multiple,y,!1):m!==!!s.multiple&&(s.defaultValue!=null?Yi(i,!!s.multiple,s.defaultValue,!0):Yi(i,!!s.multiple,s.multiple?[]:"",!1))}i[ta]=s}catch(C){Ce(t,t.return,C)}}break;case 6:if($t(e,t),ln(t),r&4){if(t.stateNode===null)throw Error(U(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(C){Ce(t,t.return,C)}}break;case 3:if($t(e,t),ln(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Yo(e.containerInfo)}catch(C){Ce(t,t.return,C)}break;case 4:$t(e,t),ln(t);break;case 13:$t(e,t),ln(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(dp=xe())),r&4&&C_(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(it=(u=it)||d,$t(e,t),it=u):$t(e,t),ln(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(q=t,d=t.child;d!==null;){for(f=q=d;q!==null;){switch(m=q,y=m.child,m.tag){case 0:case 11:case 14:case 15:Do(4,m,m.return);break;case 1:Ki(m,m.return);var P=m.stateNode;if(typeof P.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,P.props=e.memoizedProps,P.state=e.memoizedState,P.componentWillUnmount()}catch(C){Ce(r,n,C)}}break;case 5:Ki(m,m.return);break;case 22:if(m.memoizedState!==null){R_(f);continue}}y!==null?(y.return=m,q=y):R_(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=gw("display",o))}catch(C){Ce(t,t.return,C)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(C){Ce(t,t.return,C)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:$t(e,t),ln(t),r&4&&C_(t);break;case 21:break;default:$t(e,t),ln(t)}}function ln(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(z0(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Wo(i,""),r.flags&=-33);var s=A_(t);Ld(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=A_(t);Md(t,l,o);break;default:throw Error(U(161))}}catch(c){Ce(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function gk(t,e,n){q=t,q0(t)}function q0(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var i=q,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||cl;if(!o){var l=i.alternate,c=l!==null&&l.memoizedState!==null||it;l=cl;var u=it;if(cl=o,(it=c)&&!u)for(q=i;q!==null;)o=q,c=o.child,o.tag===22&&o.memoizedState!==null?x_(i):c!==null?(c.return=o,q=c):x_(i);for(;s!==null;)q=s,q0(s),s=s.sibling;q=i,cl=l,it=u}P_(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,q=s):P_(t)}}function P_(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:it||Xc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!it)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ht(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&f_(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}f_(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Yo(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}it||e.flags&512&&Vd(e)}catch(m){Ce(e,e.return,m)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function R_(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function x_(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Xc(4,e)}catch(c){Ce(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){Ce(e,i,c)}}var s=e.return;try{Vd(e)}catch(c){Ce(e,s,c)}break;case 5:var o=e.return;try{Vd(e)}catch(c){Ce(e,o,c)}}}catch(c){Ce(e,e.return,c)}if(e===t){q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,q=l;break}q=e.return}}var _k=Math.ceil,hc=Wn.ReactCurrentDispatcher,up=Wn.ReactCurrentOwner,Lt=Wn.ReactCurrentBatchConfig,oe=0,We=null,Me=null,Ye=0,St=0,Gi=Fr(0),Be=0,aa=null,di=0,Zc=0,hp=0,Oo=null,gt=null,dp=0,_s=1/0,Cn=null,dc=!1,Fd=null,wr=null,ul=!1,dr=null,fc=0,Vo=0,jd=null,xl=-1,Nl=0;function ht(){return oe&6?xe():xl!==-1?xl:xl=xe()}function Er(t){return t.mode&1?oe&2&&Ye!==0?Ye&-Ye:ek.transition!==null?(Nl===0&&(Nl=Pw()),Nl):(t=le,t!==0||(t=window.event,t=t===void 0?16:Mw(t.type)),t):1}function Xt(t,e,n,r){if(50<Vo)throw Vo=0,jd=null,Error(U(185));Ta(t,n,r),(!(oe&2)||t!==We)&&(t===We&&(!(oe&2)&&(Zc|=n),Be===4&&or(t,Ye)),Et(t,r),n===1&&oe===0&&!(e.mode&1)&&(_s=xe()+500,Qc&&jr()))}function Et(t,e){var n=t.callbackNode;eb(t,e);var r=Yl(t,t===We?Ye:0);if(r===0)n!==null&&Ug(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ug(n),e===1)t.tag===0?Zb(N_.bind(null,t)):t0(N_.bind(null,t)),Qb(function(){!(oe&6)&&jr()}),n=null;else{switch(Rw(r)){case 1:n=Ff;break;case 4:n=Aw;break;case 16:n=Ql;break;case 536870912:n=Cw;break;default:n=Ql}n=Z0(n,W0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function W0(t,e){if(xl=-1,Nl=0,oe&6)throw Error(U(327));var n=t.callbackNode;if(ts()&&t.callbackNode!==n)return null;var r=Yl(t,t===We?Ye:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=pc(t,r);else{e=r;var i=oe;oe|=2;var s=G0();(We!==t||Ye!==e)&&(Cn=null,_s=xe()+500,oi(t,e));do try{wk();break}catch(l){K0(t,l)}while(1);Jf(),hc.current=s,oe=i,Me!==null?e=0:(We=null,Ye=0,e=Be)}if(e!==0){if(e===2&&(i=dd(t),i!==0&&(r=i,e=Ud(t,i))),e===1)throw n=aa,oi(t,0),or(t,r),Et(t,xe()),n;if(e===6)or(t,r);else{if(i=t.current.alternate,!(r&30)&&!yk(i)&&(e=pc(t,r),e===2&&(s=dd(t),s!==0&&(r=s,e=Ud(t,s))),e===1))throw n=aa,oi(t,0),or(t,r),Et(t,xe()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:Xr(t,gt,Cn);break;case 3:if(or(t,r),(r&130023424)===r&&(e=dp+500-xe(),10<e)){if(Yl(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){ht(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=wd(Xr.bind(null,t,gt,Cn),e);break}Xr(t,gt,Cn);break;case 4:if(or(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Jt(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=xe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_k(r/1960))-r,10<r){t.timeoutHandle=wd(Xr.bind(null,t,gt,Cn),r);break}Xr(t,gt,Cn);break;case 5:Xr(t,gt,Cn);break;default:throw Error(U(329))}}}return Et(t,xe()),t.callbackNode===n?W0.bind(null,t):null}function Ud(t,e){var n=Oo;return t.current.memoizedState.isDehydrated&&(oi(t,e).flags|=256),t=pc(t,e),t!==2&&(e=gt,gt=n,e!==null&&Bd(e)),t}function Bd(t){gt===null?gt=t:gt.push.apply(gt,t)}function yk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!tn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function or(t,e){for(e&=~hp,e&=~Zc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Jt(e),r=1<<n;t[n]=-1,e&=~r}}function N_(t){if(oe&6)throw Error(U(327));ts();var e=Yl(t,0);if(!(e&1))return Et(t,xe()),null;var n=pc(t,e);if(t.tag!==0&&n===2){var r=dd(t);r!==0&&(e=r,n=Ud(t,r))}if(n===1)throw n=aa,oi(t,0),or(t,e),Et(t,xe()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Xr(t,gt,Cn),Et(t,xe()),null}function fp(t,e){var n=oe;oe|=1;try{return t(e)}finally{oe=n,oe===0&&(_s=xe()+500,Qc&&jr())}}function fi(t){dr!==null&&dr.tag===0&&!(oe&6)&&ts();var e=oe;oe|=1;var n=Lt.transition,r=le;try{if(Lt.transition=null,le=1,t)return t()}finally{le=r,Lt.transition=n,oe=e,!(oe&6)&&jr()}}function pp(){St=Gi.current,ge(Gi)}function oi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Gb(n)),Me!==null)for(n=Me.return;n!==null;){var r=n;switch(Gf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&tc();break;case 3:ms(),ge(vt),ge(ot),rp();break;case 5:np(r);break;case 4:ms();break;case 13:ge(Ee);break;case 19:ge(Ee);break;case 10:Xf(r.type._context);break;case 22:case 23:pp()}n=n.return}if(We=t,Me=t=Tr(t.current,null),Ye=St=e,Be=0,aa=null,hp=Zc=di=0,gt=Oo=null,ni!==null){for(e=0;e<ni.length;e++)if(n=ni[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ni=null}return t}function K0(t,e){do{var n=Me;try{if(Jf(),Cl.current=uc,cc){for(var r=Te.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}cc=!1}if(hi=0,qe=Ue=Te=null,No=!1,ia=0,up.current=null,n===null||n.return===null){Be=1,aa=e,Me=null;break}e:{var s=t,o=n.return,l=n,c=e;if(e=Ye,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=v_(o);if(y!==null){y.flags&=-257,w_(y,o,l,s,e),y.mode&1&&y_(s,u,e),e=y,c=u;var P=e.updateQueue;if(P===null){var C=new Set;C.add(c),e.updateQueue=C}else P.add(c);break e}else{if(!(e&1)){y_(s,u,e),mp();break e}c=Error(U(426))}}else if(we&&l.mode&1){var x=v_(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),w_(x,o,l,s,e),Qf(gs(c,l));break e}}s=c=gs(c,l),Be!==4&&(Be=2),Oo===null?Oo=[s]:Oo.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var I=R0(s,c,e);d_(s,I);break e;case 1:l=c;var v=s.type,A=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(wr===null||!wr.has(A)))){s.flags|=65536,e&=-e,s.lanes|=e;var V=x0(s,l,e);d_(s,V);break e}}s=s.return}while(s!==null)}Y0(n)}catch(j){e=j,Me===n&&n!==null&&(Me=n=n.return);continue}break}while(1)}function G0(){var t=hc.current;return hc.current=uc,t===null?uc:t}function mp(){(Be===0||Be===3||Be===2)&&(Be=4),We===null||!(di&268435455)&&!(Zc&268435455)||or(We,Ye)}function pc(t,e){var n=oe;oe|=2;var r=G0();(We!==t||Ye!==e)&&(Cn=null,oi(t,e));do try{vk();break}catch(i){K0(t,i)}while(1);if(Jf(),oe=n,hc.current=r,Me!==null)throw Error(U(261));return We=null,Ye=0,Be}function vk(){for(;Me!==null;)Q0(Me)}function wk(){for(;Me!==null&&!qI();)Q0(Me)}function Q0(t){var e=X0(t.alternate,t,St);t.memoizedProps=t.pendingProps,e===null?Y0(t):Me=e,up.current=null}function Y0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=fk(n,e),n!==null){n.flags&=32767,Me=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Be=6,Me=null;return}}else if(n=dk(n,e,St),n!==null){Me=n;return}if(e=e.sibling,e!==null){Me=e;return}Me=e=t}while(e!==null);Be===0&&(Be=5)}function Xr(t,e,n){var r=le,i=Lt.transition;try{Lt.transition=null,le=1,Ek(t,e,n,r)}finally{Lt.transition=i,le=r}return null}function Ek(t,e,n,r){do ts();while(dr!==null);if(oe&6)throw Error(U(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(tb(t,s),t===We&&(Me=We=null,Ye=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ul||(ul=!0,Z0(Ql,function(){return ts(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Lt.transition,Lt.transition=null;var o=le;le=1;var l=oe;oe|=4,up.current=null,mk(t,n),H0(n,t),Bb(yd),Jl=!!_d,yd=_d=null,t.current=n,gk(n),WI(),oe=l,le=o,Lt.transition=s}else t.current=n;if(ul&&(ul=!1,dr=t,fc=i),s=t.pendingLanes,s===0&&(wr=null),QI(n.stateNode),Et(t,xe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(dc)throw dc=!1,t=Fd,Fd=null,t;return fc&1&&t.tag!==0&&ts(),s=t.pendingLanes,s&1?t===jd?Vo++:(Vo=0,jd=t):Vo=0,jr(),null}function ts(){if(dr!==null){var t=Rw(fc),e=Lt.transition,n=le;try{if(Lt.transition=null,le=16>t?16:t,dr===null)var r=!1;else{if(t=dr,dr=null,fc=0,oe&6)throw Error(U(331));var i=oe;for(oe|=4,q=t.current;q!==null;){var s=q,o=s.child;if(q.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(q=u;q!==null;){var d=q;switch(d.tag){case 0:case 11:case 15:Do(8,d,s)}var f=d.child;if(f!==null)f.return=d,q=f;else for(;q!==null;){d=q;var m=d.sibling,y=d.return;if(B0(d),d===u){q=null;break}if(m!==null){m.return=y,q=m;break}q=y}}}var P=s.alternate;if(P!==null){var C=P.child;if(C!==null){P.child=null;do{var x=C.sibling;C.sibling=null,C=x}while(C!==null)}}q=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,q=o;else e:for(;q!==null;){if(s=q,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Do(9,s,s.return)}var I=s.sibling;if(I!==null){I.return=s.return,q=I;break e}q=s.return}}var v=t.current;for(q=v;q!==null;){o=q;var A=o.child;if(o.subtreeFlags&2064&&A!==null)A.return=o,q=A;else e:for(o=v;q!==null;){if(l=q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Xc(9,l)}}catch(j){Ce(l,l.return,j)}if(l===o){q=null;break e}var V=l.sibling;if(V!==null){V.return=l.return,q=V;break e}q=l.return}}if(oe=i,jr(),pn&&typeof pn.onPostCommitFiberRoot=="function")try{pn.onPostCommitFiberRoot(Hc,t)}catch{}r=!0}return r}finally{le=n,Lt.transition=e}}return!1}function D_(t,e,n){e=gs(n,e),e=R0(t,e,1),t=vr(t,e,1),e=ht(),t!==null&&(Ta(t,1,e),Et(t,e))}function Ce(t,e,n){if(t.tag===3)D_(t,t,n);else for(;e!==null;){if(e.tag===3){D_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(wr===null||!wr.has(r))){t=gs(n,t),t=x0(e,t,1),e=vr(e,t,1),t=ht(),e!==null&&(Ta(e,1,t),Et(e,t));break}}e=e.return}}function Tk(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ht(),t.pingedLanes|=t.suspendedLanes&n,We===t&&(Ye&n)===n&&(Be===4||Be===3&&(Ye&130023424)===Ye&&500>xe()-dp?oi(t,0):hp|=n),Et(t,e)}function J0(t,e){e===0&&(t.mode&1?(e=el,el<<=1,!(el&130023424)&&(el=4194304)):e=1);var n=ht();t=jn(t,e),t!==null&&(Ta(t,e,n),Et(t,n))}function Sk(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),J0(t,n)}function Ik(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),J0(t,n)}var X0;X0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||vt.current)yt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return yt=!1,hk(t,e,n);yt=!!(t.flags&131072)}else yt=!1,we&&e.flags&1048576&&n0(e,ic,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Rl(t,e),t=e.pendingProps;var i=ds(e,ot.current);es(e,n),i=sp(null,e,r,t,i,n);var s=op();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,wt(r)?(s=!0,nc(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ep(e),i.updater=Jc,e.stateNode=i,i._reactInternals=e,Ad(e,r,t,n),e=Rd(null,e,r,!0,s,n)):(e.tag=0,we&&s&&Kf(e),ut(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Rl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=kk(r),t=Ht(r,t),i){case 0:e=Pd(null,e,r,t,n);break e;case 1:e=S_(null,e,r,t,n);break e;case 11:e=E_(null,e,r,t,n);break e;case 14:e=T_(null,e,r,Ht(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ht(r,i),Pd(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ht(r,i),S_(t,e,r,i,n);case 3:e:{if(V0(e),t===null)throw Error(U(387));r=e.pendingProps,s=e.memoizedState,i=s.element,l0(t,e),ac(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=gs(Error(U(423)),e),e=I_(t,e,r,n,i);break e}else if(r!==i){i=gs(Error(U(424)),e),e=I_(t,e,r,n,i);break e}else for(It=yr(e.stateNode.containerInfo.firstChild),kt=e,we=!0,Wt=null,n=o0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(fs(),r===i){e=Un(t,e,n);break e}ut(t,e,r,n)}e=e.child}return e;case 5:return c0(e),t===null&&Id(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,vd(r,i)?o=null:s!==null&&vd(r,s)&&(e.flags|=32),O0(t,e),ut(t,e,o,n),e.child;case 6:return t===null&&Id(e),null;case 13:return M0(t,e,n);case 4:return tp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ps(e,null,r,n):ut(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ht(r,i),E_(t,e,r,i,n);case 7:return ut(t,e,e.pendingProps,n),e.child;case 8:return ut(t,e,e.pendingProps.children,n),e.child;case 12:return ut(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,he(sc,r._currentValue),r._currentValue=o,s!==null)if(tn(s.value,o)){if(s.children===i.children&&!vt.current){e=Un(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=Vn(-1,n&-n),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),bd(s.return,n,e),l.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(U(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),bd(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ut(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,es(e,n),i=jt(i),r=r(i),e.flags|=1,ut(t,e,r,n),e.child;case 14:return r=e.type,i=Ht(r,e.pendingProps),i=Ht(r.type,i),T_(t,e,r,i,n);case 15:return N0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ht(r,i),Rl(t,e),e.tag=1,wt(r)?(t=!0,nc(e)):t=!1,es(e,n),P0(e,r,i),Ad(e,r,i,n),Rd(null,e,r,!0,t,n);case 19:return L0(t,e,n);case 22:return D0(t,e,n)}throw Error(U(156,e.tag))};function Z0(t,e){return kw(t,e)}function bk(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mt(t,e,n,r){return new bk(t,e,n,r)}function gp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function kk(t){if(typeof t=="function")return gp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Vf)return 11;if(t===Mf)return 14}return 2}function Tr(t,e){var n=t.alternate;return n===null?(n=Mt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Dl(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")gp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Fi:return ai(n.children,i,s,e);case Of:o=8,i|=8;break;case Jh:return t=Mt(12,n,e,i|2),t.elementType=Jh,t.lanes=s,t;case Xh:return t=Mt(13,n,e,i),t.elementType=Xh,t.lanes=s,t;case Zh:return t=Mt(19,n,e,i),t.elementType=Zh,t.lanes=s,t;case cw:return eu(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case aw:o=10;break e;case lw:o=9;break e;case Vf:o=11;break e;case Mf:o=14;break e;case rr:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Mt(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ai(t,e,n,r){return t=Mt(7,t,r,e),t.lanes=n,t}function eu(t,e,n,r){return t=Mt(22,t,r,e),t.elementType=cw,t.lanes=n,t.stateNode={isHidden:!1},t}function Th(t,e,n){return t=Mt(6,t,null,e),t.lanes=n,t}function Sh(t,e,n){return e=Mt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ak(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rh(0),this.expirationTimes=rh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rh(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function _p(t,e,n,r,i,s,o,l,c){return t=new Ak(t,e,n,l,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Mt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ep(s),t}function Ck(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Li,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function eE(t){if(!t)return Rr;t=t._reactInternals;e:{if(Ti(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(wt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(wt(n))return e0(t,n,e)}return e}function tE(t,e,n,r,i,s,o,l,c){return t=_p(n,r,!0,t,i,s,o,l,c),t.context=eE(null),n=t.current,r=ht(),i=Er(n),s=Vn(r,i),s.callback=e??null,vr(n,s,i),t.current.lanes=i,Ta(t,i,r),Et(t,r),t}function tu(t,e,n,r){var i=e.current,s=ht(),o=Er(i);return n=eE(n),e.context===null?e.context=n:e.pendingContext=n,e=Vn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=vr(i,e,o),t!==null&&(Xt(t,i,o,s),Al(t,i,o)),o}function mc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function O_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function yp(t,e){O_(t,e),(t=t.alternate)&&O_(t,e)}function Pk(){return null}var nE=typeof reportError=="function"?reportError:function(t){console.error(t)};function vp(t){this._internalRoot=t}nu.prototype.render=vp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));tu(t,e,null,null)};nu.prototype.unmount=vp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;fi(function(){tu(null,t,null,null)}),e[Fn]=null}};function nu(t){this._internalRoot=t}nu.prototype.unstable_scheduleHydration=function(t){if(t){var e=Dw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<sr.length&&e!==0&&e<sr[n].priority;n++);sr.splice(n,0,t),n===0&&Vw(t)}};function wp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ru(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function V_(){}function Rk(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=mc(o);s.call(u)}}var o=tE(e,r,t,0,null,!1,!1,"",V_);return t._reactRootContainer=o,t[Fn]=o.current,Zo(t.nodeType===8?t.parentNode:t),fi(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=mc(c);l.call(u)}}var c=_p(t,0,!1,null,null,!1,!1,"",V_);return t._reactRootContainer=c,t[Fn]=c.current,Zo(t.nodeType===8?t.parentNode:t),fi(function(){tu(e,c,n,r)}),c}function iu(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var c=mc(o);l.call(c)}}tu(e,o,t,i)}else o=Rk(n,e,t,i,r);return mc(o)}xw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=wo(e.pendingLanes);n!==0&&(jf(e,n|1),Et(e,xe()),!(oe&6)&&(_s=xe()+500,jr()))}break;case 13:fi(function(){var r=jn(t,1);if(r!==null){var i=ht();Xt(r,t,1,i)}}),yp(t,1)}};Uf=function(t){if(t.tag===13){var e=jn(t,134217728);if(e!==null){var n=ht();Xt(e,t,134217728,n)}yp(t,134217728)}};Nw=function(t){if(t.tag===13){var e=Er(t),n=jn(t,e);if(n!==null){var r=ht();Xt(n,t,e,r)}yp(t,e)}};Dw=function(){return le};Ow=function(t,e){var n=le;try{return le=t,e()}finally{le=n}};cd=function(t,e,n){switch(e){case"input":if(nd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Gc(r);if(!i)throw Error(U(90));hw(r),nd(r,i)}}}break;case"textarea":fw(t,n);break;case"select":e=n.value,e!=null&&Yi(t,!!n.multiple,e,!1)}};ww=fp;Ew=fi;var xk={usingClientEntryPoint:!1,Events:[Ia,zi,Gc,yw,vw,fp]},uo={findFiberByHostInstance:ti,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Nk={bundleType:uo.bundleType,version:uo.version,rendererPackageName:uo.rendererPackageName,rendererConfig:uo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Iw(t),t===null?null:t.stateNode},findFiberByHostInstance:uo.findFiberByHostInstance||Pk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hl.isDisabled&&hl.supportsFiber)try{Hc=hl.inject(Nk),pn=hl}catch{}}Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xk;Pt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wp(e))throw Error(U(200));return Ck(t,e,null,n)};Pt.createRoot=function(t,e){if(!wp(t))throw Error(U(299));var n=!1,r="",i=nE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=_p(t,1,!1,null,null,n,!1,r,i),t[Fn]=e.current,Zo(t.nodeType===8?t.parentNode:t),new vp(e)};Pt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=Iw(e),t=t===null?null:t.stateNode,t};Pt.flushSync=function(t){return fi(t)};Pt.hydrate=function(t,e,n){if(!ru(e))throw Error(U(200));return iu(null,t,e,!0,n)};Pt.hydrateRoot=function(t,e,n){if(!wp(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=nE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=tE(e,null,t,1,n??null,i,!1,s,o),t[Fn]=e.current,Zo(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new nu(e)};Pt.render=function(t,e,n){if(!ru(e))throw Error(U(200));return iu(null,t,e,!1,n)};Pt.unmountComponentAtNode=function(t){if(!ru(t))throw Error(U(40));return t._reactRootContainer?(fi(function(){iu(null,null,t,!1,function(){t._reactRootContainer=null,t[Fn]=null})}),!0):!1};Pt.unstable_batchedUpdates=fp;Pt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ru(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return iu(t,e,n,!1,r)};Pt.version="18.3.1-next-f1338f8080-20240426";function rE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rE)}catch(t){console.error(t)}}rE(),rw.exports=Pt;var Dk=rw.exports,iE,M_=Dk;iE=M_.createRoot,M_.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function la(){return la=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},la.apply(this,arguments)}var fr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(fr||(fr={}));const L_="popstate";function Ok(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:l}=r.location;return zd("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:gc(i)}return Mk(e,n,null,t)}function Se(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ep(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Vk(){return Math.random().toString(36).substr(2,8)}function F_(t,e){return{usr:t.state,key:t.key,idx:e}}function zd(t,e,n,r){return n===void 0&&(n=null),la({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Rs(e):e,{state:n,key:e&&e.key||r||Vk()})}function gc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Rs(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Mk(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=fr.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(la({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function f(){l=fr.Pop;let x=d(),I=x==null?null:x-u;u=x,c&&c({action:l,location:C.location,delta:I})}function m(x,I){l=fr.Push;let v=zd(C.location,x,I);n&&n(v,x),u=d()+1;let A=F_(v,u),V=C.createHref(v);try{o.pushState(A,"",V)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;i.location.assign(V)}s&&c&&c({action:l,location:C.location,delta:1})}function y(x,I){l=fr.Replace;let v=zd(C.location,x,I);n&&n(v,x),u=d();let A=F_(v,u),V=C.createHref(v);o.replaceState(A,"",V),s&&c&&c({action:l,location:C.location,delta:0})}function P(x){let I=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof x=="string"?x:gc(x);return v=v.replace(/ $/,"%20"),Se(I,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,I)}let C={get action(){return l},get location(){return t(i,o)},listen(x){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(L_,f),c=x,()=>{i.removeEventListener(L_,f),c=null}},createHref(x){return e(i,x)},createURL:P,encodeLocation(x){let I=P(x);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:m,replace:y,go(x){return o.go(x)}};return C}var j_;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(j_||(j_={}));function Lk(t,e,n){return n===void 0&&(n="/"),Fk(t,e,n,!1)}function Fk(t,e,n,r){let i=typeof e=="string"?Rs(e):e,s=ys(i.pathname||"/",n);if(s==null)return null;let o=sE(t);jk(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=Yk(s);l=Gk(o[c],u,r)}return l}function sE(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(Se(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=Sr([r,c.relativePath]),d=n.concat(c);s.children&&s.children.length>0&&(Se(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),sE(s.children,e,d,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:Wk(u,s.index),routesMeta:d})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let c of oE(s.path))i(s,o,c)}),e}function oE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=oE(r.join("/")),l=[];return l.push(...o.map(c=>c===""?s:[s,c].join("/"))),i&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function jk(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Kk(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Uk=/^:[\w-]+$/,Bk=3,zk=2,$k=1,Hk=10,qk=-2,U_=t=>t==="*";function Wk(t,e){let n=t.split("/"),r=n.length;return n.some(U_)&&(r+=qk),e&&(r+=zk),n.filter(i=>!U_(i)).reduce((i,s)=>i+(Uk.test(s)?Bk:s===""?$k:Hk),r)}function Kk(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function Gk(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",f=_c({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!f&&u&&n&&!r[r.length-1].route.index&&(f=_c({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:Sr([s,f.pathname]),pathnameBase:tA(Sr([s,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(s=Sr([s,f.pathnameBase]))}return o}function _c(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Qk(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((u,d,f)=>{let{paramName:m,isOptional:y}=d;if(m==="*"){let C=l[f]||"";o=s.slice(0,s.length-C.length).replace(/(.)\/+$/,"$1")}const P=l[f];return y&&!P?u[m]=void 0:u[m]=(P||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function Qk(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Ep(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Yk(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ep(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ys(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const Jk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xk=t=>Jk.test(t);function Zk(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Rs(t):t,s;if(n)if(Xk(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Ep(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=B_(n.substring(1),"/"):s=B_(n,e)}else s=e;return{pathname:s,search:nA(r),hash:rA(i)}}function B_(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Ih(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function eA(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Tp(t,e){let n=eA(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Sp(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Rs(t):(i=la({},t),Se(!i.pathname||!i.pathname.includes("?"),Ih("?","pathname","search",i)),Se(!i.pathname||!i.pathname.includes("#"),Ih("#","pathname","hash",i)),Se(!i.search||!i.search.includes("#"),Ih("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;i.pathname=m.join("/")}l=f>=0?e[f]:"/"}let c=Zk(i,l),u=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const Sr=t=>t.join("/").replace(/\/\/+/g,"/"),tA=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),nA=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,rA=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function iA(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const aE=["post","put","patch","delete"];new Set(aE);const sA=["get",...aE];new Set(sA);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ca(){return ca=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ca.apply(this,arguments)}const su=D.createContext(null),lE=D.createContext(null),Kn=D.createContext(null),ou=D.createContext(null),Ur=D.createContext({outlet:null,matches:[],isDataRoute:!1}),cE=D.createContext(null);function oA(t,e){let{relative:n}=e===void 0?{}:e;xs()||Se(!1);let{basename:r,navigator:i}=D.useContext(Kn),{hash:s,pathname:o,search:l}=au(t,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:Sr([r,o])),i.createHref({pathname:c,search:l,hash:s})}function xs(){return D.useContext(ou)!=null}function Sn(){return xs()||Se(!1),D.useContext(ou).location}function uE(t){D.useContext(Kn).static||D.useLayoutEffect(t)}function ka(){let{isDataRoute:t}=D.useContext(Ur);return t?vA():aA()}function aA(){xs()||Se(!1);let t=D.useContext(su),{basename:e,future:n,navigator:r}=D.useContext(Kn),{matches:i}=D.useContext(Ur),{pathname:s}=Sn(),o=JSON.stringify(Tp(i,n.v7_relativeSplatPath)),l=D.useRef(!1);return uE(()=>{l.current=!0}),D.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let f=Sp(u,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Sr([e,f.pathname])),(d.replace?r.replace:r.push)(f,d.state,d)},[e,r,o,s,t])}function au(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=D.useContext(Kn),{matches:i}=D.useContext(Ur),{pathname:s}=Sn(),o=JSON.stringify(Tp(i,r.v7_relativeSplatPath));return D.useMemo(()=>Sp(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function lA(t,e){return cA(t,e)}function cA(t,e,n,r){xs()||Se(!1);let{navigator:i}=D.useContext(Kn),{matches:s}=D.useContext(Ur),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Sn(),d;if(e){var f;let x=typeof e=="string"?Rs(e):e;c==="/"||(f=x.pathname)!=null&&f.startsWith(c)||Se(!1),d=x}else d=u;let m=d.pathname||"/",y=m;if(c!=="/"){let x=c.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(x.length).join("/")}let P=Lk(t,{pathname:y}),C=pA(P&&P.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:Sr([c,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:Sr([c,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),s,n,r);return e&&C?D.createElement(ou.Provider,{value:{location:ca({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:fr.Pop}},C):C}function uA(){let t=yA(),e=iA(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:i},n):null,s)}const hA=D.createElement(uA,null);class dA extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?D.createElement(Ur.Provider,{value:this.props.routeContext},D.createElement(cE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function fA(t){let{routeContext:e,match:n,children:r}=t,i=D.useContext(su);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(Ur.Provider,{value:e},r)}function pA(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let d=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);d>=0||Se(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let f=o[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:m,errors:y}=n,P=f.route.loader&&m[f.route.id]===void 0&&(!y||y[f.route.id]===void 0);if(f.route.lazy||P){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,f,m)=>{let y,P=!1,C=null,x=null;n&&(y=l&&f.route.id?l[f.route.id]:void 0,C=f.route.errorElement||hA,c&&(u<0&&m===0?(wA("route-fallback",!1),P=!0,x=null):u===m&&(P=!0,x=f.route.hydrateFallbackElement||null)));let I=e.concat(o.slice(0,m+1)),v=()=>{let A;return y?A=C:P?A=x:f.route.Component?A=D.createElement(f.route.Component,null):f.route.element?A=f.route.element:A=d,D.createElement(fA,{match:f,routeContext:{outlet:d,matches:I,isDataRoute:n!=null},children:A})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?D.createElement(dA,{location:n.location,revalidation:n.revalidation,component:C,error:y,children:v(),routeContext:{outlet:null,matches:I,isDataRoute:!0}}):v()},null)}var hE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(hE||{}),yc=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(yc||{});function mA(t){let e=D.useContext(su);return e||Se(!1),e}function gA(t){let e=D.useContext(lE);return e||Se(!1),e}function _A(t){let e=D.useContext(Ur);return e||Se(!1),e}function dE(t){let e=_A(),n=e.matches[e.matches.length-1];return n.route.id||Se(!1),n.route.id}function yA(){var t;let e=D.useContext(cE),n=gA(yc.UseRouteError),r=dE(yc.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function vA(){let{router:t}=mA(hE.UseNavigateStable),e=dE(yc.UseNavigateStable),n=D.useRef(!1);return uE(()=>{n.current=!0}),D.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,ca({fromRouteId:e},s)))},[t,e])}const z_={};function wA(t,e,n){!e&&!z_[t]&&(z_[t]=!0)}function EA(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function TA(t){let{to:e,replace:n,state:r,relative:i}=t;xs()||Se(!1);let{future:s,static:o}=D.useContext(Kn),{matches:l}=D.useContext(Ur),{pathname:c}=Sn(),u=ka(),d=Sp(e,Tp(l,s.v7_relativeSplatPath),c,i==="path"),f=JSON.stringify(d);return D.useEffect(()=>u(JSON.parse(f),{replace:n,state:r,relative:i}),[u,f,i,n,r]),null}function pe(t){Se(!1)}function SA(t){let{basename:e="/",children:n=null,location:r,navigationType:i=fr.Pop,navigator:s,static:o=!1,future:l}=t;xs()&&Se(!1);let c=e.replace(/^\/*/,"/"),u=D.useMemo(()=>({basename:c,navigator:s,static:o,future:ca({v7_relativeSplatPath:!1},l)}),[c,l,s,o]);typeof r=="string"&&(r=Rs(r));let{pathname:d="/",search:f="",hash:m="",state:y=null,key:P="default"}=r,C=D.useMemo(()=>{let x=ys(d,c);return x==null?null:{location:{pathname:x,search:f,hash:m,state:y,key:P},navigationType:i}},[c,d,f,m,y,P,i]);return C==null?null:D.createElement(Kn.Provider,{value:u},D.createElement(ou.Provider,{children:n,value:C}))}function IA(t){let{children:e,location:n}=t;return lA($d(e),n)}new Promise(()=>{});function $d(t,e){e===void 0&&(e=[]);let n=[];return D.Children.forEach(t,(r,i)=>{if(!D.isValidElement(r))return;let s=[...e,i];if(r.type===D.Fragment){n.push.apply(n,$d(r.props.children,s));return}r.type!==pe&&Se(!1),!r.props.index||!r.props.children||Se(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=$d(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vc(){return vc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vc.apply(this,arguments)}function fE(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function bA(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function kA(t,e){return t.button===0&&(!e||e==="_self")&&!bA(t)}function Hd(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function AA(t,e){let n=Hd(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(s=>{n.append(i,s)})}),n}const CA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],PA=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],RA="6";try{window.__reactRouterVersion=RA}catch{}const xA=D.createContext({isTransitioning:!1}),NA="startTransition",$_=TI[NA];function DA(t){let{basename:e,children:n,future:r,window:i}=t,s=D.useRef();s.current==null&&(s.current=Ok({window:i,v5Compat:!0}));let o=s.current,[l,c]=D.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=D.useCallback(f=>{u&&$_?$_(()=>c(f)):c(f)},[c,u]);return D.useLayoutEffect(()=>o.listen(d),[o,d]),D.useEffect(()=>EA(r),[r]),D.createElement(SA,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const OA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",VA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ae=D.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f}=e,m=fE(e,CA),{basename:y}=D.useContext(Kn),P,C=!1;if(typeof u=="string"&&VA.test(u)&&(P=u,OA))try{let A=new URL(window.location.href),V=u.startsWith("//")?new URL(A.protocol+u):new URL(u),j=ys(V.pathname,y);V.origin===A.origin&&j!=null?u=j+V.search+V.hash:C=!0}catch{}let x=oA(u,{relative:i}),I=LA(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:i,viewTransition:f});function v(A){r&&r(A),A.defaultPrevented||I(A)}return D.createElement("a",vc({},m,{href:P||x,onClick:C||s?r:v,ref:n,target:c}))}),ho=D.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:o=!1,style:l,to:c,viewTransition:u,children:d}=e,f=fE(e,PA),m=au(c,{relative:f.relative}),y=Sn(),P=D.useContext(lE),{navigator:C,basename:x}=D.useContext(Kn),I=P!=null&&FA(m)&&u===!0,v=C.encodeLocation?C.encodeLocation(m).pathname:m.pathname,A=y.pathname,V=P&&P.navigation&&P.navigation.location?P.navigation.location.pathname:null;i||(A=A.toLowerCase(),V=V?V.toLowerCase():null,v=v.toLowerCase()),V&&x&&(V=ys(V,x)||V);const j=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let M=A===v||!o&&A.startsWith(v)&&A.charAt(j)==="/",w=V!=null&&(V===v||!o&&V.startsWith(v)&&V.charAt(v.length)==="/"),_={isActive:M,isPending:w,isTransitioning:I},E=M?r:void 0,k;typeof s=="function"?k=s(_):k=[s,M?"active":null,w?"pending":null,I?"transitioning":null].filter(Boolean).join(" ");let T=typeof l=="function"?l(_):l;return D.createElement(Ae,vc({},f,{"aria-current":E,className:k,ref:n,style:T,to:c,viewTransition:u}),typeof d=="function"?d(_):d)});var qd;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(qd||(qd={}));var H_;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(H_||(H_={}));function MA(t){let e=D.useContext(su);return e||Se(!1),e}function LA(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:l}=e===void 0?{}:e,c=ka(),u=Sn(),d=au(t,{relative:o});return D.useCallback(f=>{if(kA(f,n)){f.preventDefault();let m=r!==void 0?r:gc(u)===gc(d);c(t,{replace:m,state:i,preventScrollReset:s,relative:o,viewTransition:l})}},[u,c,d,r,i,n,t,s,o,l])}function bL(t){let e=D.useRef(Hd(t)),n=D.useRef(!1),r=Sn(),i=D.useMemo(()=>AA(r.search,n.current?null:e.current),[r.search]),s=ka(),o=D.useCallback((l,c)=>{const u=Hd(typeof l=="function"?l(i):l);n.current=!0,s("?"+u,c)},[s,i]);return[i,o]}function FA(t,e){e===void 0&&(e={});let n=D.useContext(xA);n==null&&Se(!1);let{basename:r}=MA(qd.useViewTransitionState),i=au(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=ys(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=ys(n.nextLocation.pathname,r)||n.nextLocation.pathname;return _c(i.pathname,o)!=null||_c(i.pathname,s)!=null}const jA=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},UA=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},mE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,d=s>>2,f=(s&3)<<4|l>>4;let m=(l&15)<<2|u>>6,y=u&63;c||(y=64,o||(m=64)),r.push(n[d],n[f],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(pE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):UA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||u==null||f==null)throw new BA;const m=s<<2|l>>4;if(r.push(m),u!==64){const y=l<<4&240|u>>2;if(r.push(y),f!==64){const P=u<<6&192|f;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class BA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zA=function(t){const e=pE(t);return mE.encodeByteArray(e,!0)},wc=function(t){return zA(t).replace(/\./g,"")},gE=function(t){try{return mE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA=()=>$A().__FIREBASE_DEFAULTS__,qA=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},WA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&gE(t[1]);return e&&JSON.parse(e)},lu=()=>{try{return jA()||HA()||qA()||WA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},_E=t=>{var e,n;return(n=(e=lu())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},KA=t=>{const e=_E(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},yE=()=>{var t;return(t=lu())==null?void 0:t.config},vE=t=>{var e;return(e=lu())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ns(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function wE(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t},l="";return[wc(JSON.stringify(n)),wc(JSON.stringify(o)),l].join(".")}const Mo={};function YA(){const t={prod:[],emulator:[]};for(const e of Object.keys(Mo))Mo[e]?t.emulator.push(e):t.prod.push(e);return t}function JA(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let q_=!1;function EE(t,e){if(typeof window>"u"||typeof document>"u"||!Ns(window.location.host)||Mo[t]===e||Mo[t]||q_)return;Mo[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",s=YA().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{q_=!0,o()},m}function d(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=JA(r),y=n("text"),P=document.getElementById(y)||document.createElement("span"),C=n("learnmore"),x=document.getElementById(C)||document.createElement("a"),I=n("preprendIcon"),v=document.getElementById(I)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const A=m.element;l(A),d(x,C);const V=u();c(v,I),A.append(v,P,x,V),document.body.appendChild(A)}s?(P.innerText="Preview backend disconnected.",v.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(v.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function XA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(at())}function ZA(){var e;const t=(e=lu())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function tC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function nC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function rC(){const t=at();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function iC(){return!ZA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function TE(){try{return typeof indexedDB=="object"}catch{return!1}}function SE(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}function sC(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC="FirebaseError";class In extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=oC,Object.setPrototypeOf(this,In.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Si.prototype.create)}}class Si{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?aC(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new In(i,l,r)}}function aC(t,e){return t.replace(lC,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const lC=/\{\$([^}]+)}/g;function cC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function pi(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(W_(s)&&W_(o)){if(!pi(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function W_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ds(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function uC(t,e){const n=new hC(t,e);return n.subscribe.bind(n)}class hC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");dC(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=bh),i.error===void 0&&(i.error=bh),i.complete===void 0&&(i.complete=bh);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function bh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(t){return t&&t._delegate?t._delegate:t}class nn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new GA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mC(e))try{this.getOrInitializeService({instanceIdentifier:Zr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Zr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Zr){return this.instances.has(e)}getOptions(e=Zr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:pC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Zr){return this.component?this.component.multipleInstances?e:Zr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function pC(t){return t===Zr?void 0:t}function mC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new fC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ne||(ne={}));const _C={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},yC=ne.INFO,vC={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},wC=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=vC[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ip{constructor(e){this.name=e,this._logLevel=yC,this._logHandler=wC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?_C[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...e),this._logHandler(this,ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...e),this._logHandler(this,ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...e),this._logHandler(this,ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...e),this._logHandler(this,ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...e),this._logHandler(this,ne.ERROR,...e)}}const EC=(t,e)=>e.some(n=>t instanceof n);let K_,G_;function TC(){return K_||(K_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function SC(){return G_||(G_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const IE=new WeakMap,Wd=new WeakMap,bE=new WeakMap,kh=new WeakMap,bp=new WeakMap;function IC(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Mn(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&IE.set(n,t)}).catch(()=>{}),bp.set(e,t),e}function bC(t){if(Wd.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Wd.set(t,e)}let Kd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Wd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||bE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Mn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function kC(t){Kd=t(Kd)}function AC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ah(this),e,...n);return bE.set(r,e.sort?e.sort():[e]),Mn(r)}:SC().includes(t)?function(...e){return t.apply(Ah(this),e),Mn(IE.get(this))}:function(...e){return Mn(t.apply(Ah(this),e))}}function CC(t){return typeof t=="function"?AC(t):(t instanceof IDBTransaction&&bC(t),EC(t,TC())?new Proxy(t,Kd):t)}function Mn(t){if(t instanceof IDBRequest)return IC(t);if(kh.has(t))return kh.get(t);const e=CC(t);return e!==t&&(kh.set(t,e),bp.set(e,t)),e}const Ah=t=>bp.get(t);function cu(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=Mn(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Mn(o.result),c.oldVersion,c.newVersion,Mn(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}function Ch(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),Mn(n).then(()=>{})}const PC=["get","getKey","getAll","getAllKeys","count"],RC=["put","add","delete","clear"],Ph=new Map;function Q_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ph.get(e))return Ph.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=RC.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||PC.includes(n)))return;const s=async function(o,...l){const c=this.transaction(o,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),i&&c.done]))[0]};return Ph.set(e,s),s}kC(t=>({...t,get:(e,n,r)=>Q_(e,n)||t.get(e,n,r),has:(e,n)=>!!Q_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(NC(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function NC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Gd="@firebase/app",Y_="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bn=new Ip("@firebase/app"),DC="@firebase/app-compat",OC="@firebase/analytics-compat",VC="@firebase/analytics",MC="@firebase/app-check-compat",LC="@firebase/app-check",FC="@firebase/auth",jC="@firebase/auth-compat",UC="@firebase/database",BC="@firebase/data-connect",zC="@firebase/database-compat",$C="@firebase/functions",HC="@firebase/functions-compat",qC="@firebase/installations",WC="@firebase/installations-compat",KC="@firebase/messaging",GC="@firebase/messaging-compat",QC="@firebase/performance",YC="@firebase/performance-compat",JC="@firebase/remote-config",XC="@firebase/remote-config-compat",ZC="@firebase/storage",eP="@firebase/storage-compat",tP="@firebase/firestore",nP="@firebase/ai",rP="@firebase/firestore-compat",iP="firebase",sP="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qd="[DEFAULT]",oP={[Gd]:"fire-core",[DC]:"fire-core-compat",[VC]:"fire-analytics",[OC]:"fire-analytics-compat",[LC]:"fire-app-check",[MC]:"fire-app-check-compat",[FC]:"fire-auth",[jC]:"fire-auth-compat",[UC]:"fire-rtdb",[BC]:"fire-data-connect",[zC]:"fire-rtdb-compat",[$C]:"fire-fn",[HC]:"fire-fn-compat",[qC]:"fire-iid",[WC]:"fire-iid-compat",[KC]:"fire-fcm",[GC]:"fire-fcm-compat",[QC]:"fire-perf",[YC]:"fire-perf-compat",[JC]:"fire-rc",[XC]:"fire-rc-compat",[ZC]:"fire-gcs",[eP]:"fire-gcs-compat",[tP]:"fire-fst",[rP]:"fire-fst-compat",[nP]:"fire-vertex","fire-js":"fire-js",[iP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ec=new Map,aP=new Map,Yd=new Map;function J_(t,e){try{t.container.addComponent(e)}catch(n){Bn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function En(t){const e=t.name;if(Yd.has(e))return Bn.debug(`There were multiple attempts to register component ${e}.`),!1;Yd.set(e,t);for(const n of Ec.values())J_(n,t);for(const n of aP.values())J_(n,t);return!0}function Os(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Kt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ir=new Si("app","Firebase",lP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new nn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ir.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs=sP;function kE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Qd,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Ir.create("bad-app-name",{appName:String(i)});if(n||(n=yE()),!n)throw Ir.create("no-options");const s=Ec.get(i);if(s){if(pi(n,s.options)&&pi(r,s.config))return s;throw Ir.create("duplicate-app",{appName:i})}const o=new gC(i);for(const c of Yd.values())o.addComponent(c);const l=new cP(n,r,o);return Ec.set(i,l),l}function kp(t=Qd){const e=Ec.get(t);if(!e&&t===Qd&&yE())return kE();if(!e)throw Ir.create("no-app",{appName:t});return e}function Ft(t,e,n){let r=oP[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Bn.warn(o.join(" "));return}En(new nn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uP="firebase-heartbeat-database",hP=1,ua="firebase-heartbeat-store";let Rh=null;function AE(){return Rh||(Rh=cu(uP,hP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ua)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ir.create("idb-open",{originalErrorMessage:t.message})})),Rh}async function dP(t){try{const n=(await AE()).transaction(ua),r=await n.objectStore(ua).get(CE(t));return await n.done,r}catch(e){if(e instanceof In)Bn.warn(e.message);else{const n=Ir.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Bn.warn(n.message)}}}async function X_(t,e){try{const r=(await AE()).transaction(ua,"readwrite");await r.objectStore(ua).put(e,CE(t)),await r.done}catch(n){if(n instanceof In)Bn.warn(n.message);else{const r=Ir.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Bn.warn(r.message)}}}function CE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP=1024,pP=30;class mP{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new _P(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Z_();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>pP){const o=yP(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Bn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Z_(),{heartbeatsToSend:r,unsentEntries:i}=gP(this._heartbeatsCache.heartbeats),s=wc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Bn.warn(n),""}}}function Z_(){return new Date().toISOString().substring(0,10)}function gP(t,e=fP){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),ey(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ey(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class _P{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return TE()?SE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await dP(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return X_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return X_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function ey(t){return wc(JSON.stringify({version:2,heartbeats:t})).length}function yP(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vP(t){En(new nn("platform-logger",e=>new xC(e),"PRIVATE")),En(new nn("heartbeat",e=>new mP(e),"PRIVATE")),Ft(Gd,Y_,t),Ft(Gd,Y_,"esm2020"),Ft("fire-js","")}vP("");var wP="firebase",EP="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ft(wP,EP,"app");var ty=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var br,PE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(w,_){function E(){}E.prototype=_.prototype,w.F=_.prototype,w.prototype=new E,w.prototype.constructor=w,w.D=function(k,T,R){for(var b=Array(arguments.length-2),te=2;te<arguments.length;te++)b[te-2]=arguments[te];return _.prototype[T].apply(k,b)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,_,E){E||(E=0);const k=Array(16);if(typeof _=="string")for(var T=0;T<16;++T)k[T]=_.charCodeAt(E++)|_.charCodeAt(E++)<<8|_.charCodeAt(E++)<<16|_.charCodeAt(E++)<<24;else for(T=0;T<16;++T)k[T]=_[E++]|_[E++]<<8|_[E++]<<16|_[E++]<<24;_=w.g[0],E=w.g[1],T=w.g[2];let R=w.g[3],b;b=_+(R^E&(T^R))+k[0]+3614090360&4294967295,_=E+(b<<7&4294967295|b>>>25),b=R+(T^_&(E^T))+k[1]+3905402710&4294967295,R=_+(b<<12&4294967295|b>>>20),b=T+(E^R&(_^E))+k[2]+606105819&4294967295,T=R+(b<<17&4294967295|b>>>15),b=E+(_^T&(R^_))+k[3]+3250441966&4294967295,E=T+(b<<22&4294967295|b>>>10),b=_+(R^E&(T^R))+k[4]+4118548399&4294967295,_=E+(b<<7&4294967295|b>>>25),b=R+(T^_&(E^T))+k[5]+1200080426&4294967295,R=_+(b<<12&4294967295|b>>>20),b=T+(E^R&(_^E))+k[6]+2821735955&4294967295,T=R+(b<<17&4294967295|b>>>15),b=E+(_^T&(R^_))+k[7]+4249261313&4294967295,E=T+(b<<22&4294967295|b>>>10),b=_+(R^E&(T^R))+k[8]+1770035416&4294967295,_=E+(b<<7&4294967295|b>>>25),b=R+(T^_&(E^T))+k[9]+2336552879&4294967295,R=_+(b<<12&4294967295|b>>>20),b=T+(E^R&(_^E))+k[10]+4294925233&4294967295,T=R+(b<<17&4294967295|b>>>15),b=E+(_^T&(R^_))+k[11]+2304563134&4294967295,E=T+(b<<22&4294967295|b>>>10),b=_+(R^E&(T^R))+k[12]+1804603682&4294967295,_=E+(b<<7&4294967295|b>>>25),b=R+(T^_&(E^T))+k[13]+4254626195&4294967295,R=_+(b<<12&4294967295|b>>>20),b=T+(E^R&(_^E))+k[14]+2792965006&4294967295,T=R+(b<<17&4294967295|b>>>15),b=E+(_^T&(R^_))+k[15]+1236535329&4294967295,E=T+(b<<22&4294967295|b>>>10),b=_+(T^R&(E^T))+k[1]+4129170786&4294967295,_=E+(b<<5&4294967295|b>>>27),b=R+(E^T&(_^E))+k[6]+3225465664&4294967295,R=_+(b<<9&4294967295|b>>>23),b=T+(_^E&(R^_))+k[11]+643717713&4294967295,T=R+(b<<14&4294967295|b>>>18),b=E+(R^_&(T^R))+k[0]+3921069994&4294967295,E=T+(b<<20&4294967295|b>>>12),b=_+(T^R&(E^T))+k[5]+3593408605&4294967295,_=E+(b<<5&4294967295|b>>>27),b=R+(E^T&(_^E))+k[10]+38016083&4294967295,R=_+(b<<9&4294967295|b>>>23),b=T+(_^E&(R^_))+k[15]+3634488961&4294967295,T=R+(b<<14&4294967295|b>>>18),b=E+(R^_&(T^R))+k[4]+3889429448&4294967295,E=T+(b<<20&4294967295|b>>>12),b=_+(T^R&(E^T))+k[9]+568446438&4294967295,_=E+(b<<5&4294967295|b>>>27),b=R+(E^T&(_^E))+k[14]+3275163606&4294967295,R=_+(b<<9&4294967295|b>>>23),b=T+(_^E&(R^_))+k[3]+4107603335&4294967295,T=R+(b<<14&4294967295|b>>>18),b=E+(R^_&(T^R))+k[8]+1163531501&4294967295,E=T+(b<<20&4294967295|b>>>12),b=_+(T^R&(E^T))+k[13]+2850285829&4294967295,_=E+(b<<5&4294967295|b>>>27),b=R+(E^T&(_^E))+k[2]+4243563512&4294967295,R=_+(b<<9&4294967295|b>>>23),b=T+(_^E&(R^_))+k[7]+1735328473&4294967295,T=R+(b<<14&4294967295|b>>>18),b=E+(R^_&(T^R))+k[12]+2368359562&4294967295,E=T+(b<<20&4294967295|b>>>12),b=_+(E^T^R)+k[5]+4294588738&4294967295,_=E+(b<<4&4294967295|b>>>28),b=R+(_^E^T)+k[8]+2272392833&4294967295,R=_+(b<<11&4294967295|b>>>21),b=T+(R^_^E)+k[11]+1839030562&4294967295,T=R+(b<<16&4294967295|b>>>16),b=E+(T^R^_)+k[14]+4259657740&4294967295,E=T+(b<<23&4294967295|b>>>9),b=_+(E^T^R)+k[1]+2763975236&4294967295,_=E+(b<<4&4294967295|b>>>28),b=R+(_^E^T)+k[4]+1272893353&4294967295,R=_+(b<<11&4294967295|b>>>21),b=T+(R^_^E)+k[7]+4139469664&4294967295,T=R+(b<<16&4294967295|b>>>16),b=E+(T^R^_)+k[10]+3200236656&4294967295,E=T+(b<<23&4294967295|b>>>9),b=_+(E^T^R)+k[13]+681279174&4294967295,_=E+(b<<4&4294967295|b>>>28),b=R+(_^E^T)+k[0]+3936430074&4294967295,R=_+(b<<11&4294967295|b>>>21),b=T+(R^_^E)+k[3]+3572445317&4294967295,T=R+(b<<16&4294967295|b>>>16),b=E+(T^R^_)+k[6]+76029189&4294967295,E=T+(b<<23&4294967295|b>>>9),b=_+(E^T^R)+k[9]+3654602809&4294967295,_=E+(b<<4&4294967295|b>>>28),b=R+(_^E^T)+k[12]+3873151461&4294967295,R=_+(b<<11&4294967295|b>>>21),b=T+(R^_^E)+k[15]+530742520&4294967295,T=R+(b<<16&4294967295|b>>>16),b=E+(T^R^_)+k[2]+3299628645&4294967295,E=T+(b<<23&4294967295|b>>>9),b=_+(T^(E|~R))+k[0]+4096336452&4294967295,_=E+(b<<6&4294967295|b>>>26),b=R+(E^(_|~T))+k[7]+1126891415&4294967295,R=_+(b<<10&4294967295|b>>>22),b=T+(_^(R|~E))+k[14]+2878612391&4294967295,T=R+(b<<15&4294967295|b>>>17),b=E+(R^(T|~_))+k[5]+4237533241&4294967295,E=T+(b<<21&4294967295|b>>>11),b=_+(T^(E|~R))+k[12]+1700485571&4294967295,_=E+(b<<6&4294967295|b>>>26),b=R+(E^(_|~T))+k[3]+2399980690&4294967295,R=_+(b<<10&4294967295|b>>>22),b=T+(_^(R|~E))+k[10]+4293915773&4294967295,T=R+(b<<15&4294967295|b>>>17),b=E+(R^(T|~_))+k[1]+2240044497&4294967295,E=T+(b<<21&4294967295|b>>>11),b=_+(T^(E|~R))+k[8]+1873313359&4294967295,_=E+(b<<6&4294967295|b>>>26),b=R+(E^(_|~T))+k[15]+4264355552&4294967295,R=_+(b<<10&4294967295|b>>>22),b=T+(_^(R|~E))+k[6]+2734768916&4294967295,T=R+(b<<15&4294967295|b>>>17),b=E+(R^(T|~_))+k[13]+1309151649&4294967295,E=T+(b<<21&4294967295|b>>>11),b=_+(T^(E|~R))+k[4]+4149444226&4294967295,_=E+(b<<6&4294967295|b>>>26),b=R+(E^(_|~T))+k[11]+3174756917&4294967295,R=_+(b<<10&4294967295|b>>>22),b=T+(_^(R|~E))+k[2]+718787259&4294967295,T=R+(b<<15&4294967295|b>>>17),b=E+(R^(T|~_))+k[9]+3951481745&4294967295,w.g[0]=w.g[0]+_&4294967295,w.g[1]=w.g[1]+(T+(b<<21&4294967295|b>>>11))&4294967295,w.g[2]=w.g[2]+T&4294967295,w.g[3]=w.g[3]+R&4294967295}r.prototype.v=function(w,_){_===void 0&&(_=w.length);const E=_-this.blockSize,k=this.C;let T=this.h,R=0;for(;R<_;){if(T==0)for(;R<=E;)i(this,w,R),R+=this.blockSize;if(typeof w=="string"){for(;R<_;)if(k[T++]=w.charCodeAt(R++),T==this.blockSize){i(this,k),T=0;break}}else for(;R<_;)if(k[T++]=w[R++],T==this.blockSize){i(this,k),T=0;break}}this.h=T,this.o+=_},r.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var _=1;_<w.length-8;++_)w[_]=0;_=this.o*8;for(var E=w.length-8;E<w.length;++E)w[E]=_&255,_/=256;for(this.v(w),w=Array(16),_=0,E=0;E<4;++E)for(let k=0;k<32;k+=8)w[_++]=this.g[E]>>>k&255;return w};function s(w,_){var E=l;return Object.prototype.hasOwnProperty.call(E,w)?E[w]:E[w]=_(w)}function o(w,_){this.h=_;const E=[];let k=!0;for(let T=w.length-1;T>=0;T--){const R=w[T]|0;k&&R==_||(E[T]=R,k=!1)}this.g=E}var l={};function c(w){return-128<=w&&w<128?s(w,function(_){return new o([_|0],_<0?-1:0)}):new o([w|0],w<0?-1:0)}function u(w){if(isNaN(w)||!isFinite(w))return f;if(w<0)return x(u(-w));const _=[];let E=1;for(let k=0;w>=E;k++)_[k]=w/E|0,E*=4294967296;return new o(_,0)}function d(w,_){if(w.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(w.charAt(0)=="-")return x(d(w.substring(1),_));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');const E=u(Math.pow(_,8));let k=f;for(let R=0;R<w.length;R+=8){var T=Math.min(8,w.length-R);const b=parseInt(w.substring(R,R+T),_);T<8?(T=u(Math.pow(_,T)),k=k.j(T).add(u(b))):(k=k.j(E),k=k.add(u(b)))}return k}var f=c(0),m=c(1),y=c(16777216);t=o.prototype,t.m=function(){if(C(this))return-x(this).m();let w=0,_=1;for(let E=0;E<this.g.length;E++){const k=this.i(E);w+=(k>=0?k:4294967296+k)*_,_*=4294967296}return w},t.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(P(this))return"0";if(C(this))return"-"+x(this).toString(w);const _=u(Math.pow(w,6));var E=this;let k="";for(;;){const T=V(E,_).g;E=I(E,T.j(_));let R=((E.g.length>0?E.g[0]:E.h)>>>0).toString(w);if(E=T,P(E))return R+k;for(;R.length<6;)R="0"+R;k=R+k}},t.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function P(w){if(w.h!=0)return!1;for(let _=0;_<w.g.length;_++)if(w.g[_]!=0)return!1;return!0}function C(w){return w.h==-1}t.l=function(w){return w=I(this,w),C(w)?-1:P(w)?0:1};function x(w){const _=w.g.length,E=[];for(let k=0;k<_;k++)E[k]=~w.g[k];return new o(E,~w.h).add(m)}t.abs=function(){return C(this)?x(this):this},t.add=function(w){const _=Math.max(this.g.length,w.g.length),E=[];let k=0;for(let T=0;T<=_;T++){let R=k+(this.i(T)&65535)+(w.i(T)&65535),b=(R>>>16)+(this.i(T)>>>16)+(w.i(T)>>>16);k=b>>>16,R&=65535,b&=65535,E[T]=b<<16|R}return new o(E,E[E.length-1]&-2147483648?-1:0)};function I(w,_){return w.add(x(_))}t.j=function(w){if(P(this)||P(w))return f;if(C(this))return C(w)?x(this).j(x(w)):x(x(this).j(w));if(C(w))return x(this.j(x(w)));if(this.l(y)<0&&w.l(y)<0)return u(this.m()*w.m());const _=this.g.length+w.g.length,E=[];for(var k=0;k<2*_;k++)E[k]=0;for(k=0;k<this.g.length;k++)for(let T=0;T<w.g.length;T++){const R=this.i(k)>>>16,b=this.i(k)&65535,te=w.i(T)>>>16,ye=w.i(T)&65535;E[2*k+2*T]+=b*ye,v(E,2*k+2*T),E[2*k+2*T+1]+=R*ye,v(E,2*k+2*T+1),E[2*k+2*T+1]+=b*te,v(E,2*k+2*T+1),E[2*k+2*T+2]+=R*te,v(E,2*k+2*T+2)}for(w=0;w<_;w++)E[w]=E[2*w+1]<<16|E[2*w];for(w=_;w<2*_;w++)E[w]=0;return new o(E,0)};function v(w,_){for(;(w[_]&65535)!=w[_];)w[_+1]+=w[_]>>>16,w[_]&=65535,_++}function A(w,_){this.g=w,this.h=_}function V(w,_){if(P(_))throw Error("division by zero");if(P(w))return new A(f,f);if(C(w))return _=V(x(w),_),new A(x(_.g),x(_.h));if(C(_))return _=V(w,x(_)),new A(x(_.g),_.h);if(w.g.length>30){if(C(w)||C(_))throw Error("slowDivide_ only works with positive integers.");for(var E=m,k=_;k.l(w)<=0;)E=j(E),k=j(k);var T=M(E,1),R=M(k,1);for(k=M(k,2),E=M(E,2);!P(k);){var b=R.add(k);b.l(w)<=0&&(T=T.add(E),R=b),k=M(k,1),E=M(E,1)}return _=I(w,T.j(_)),new A(T,_)}for(T=f;w.l(_)>=0;){for(E=Math.max(1,Math.floor(w.m()/_.m())),k=Math.ceil(Math.log(E)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),R=u(E),b=R.j(_);C(b)||b.l(w)>0;)E-=k,R=u(E),b=R.j(_);P(R)&&(R=m),T=T.add(R),w=I(w,b)}return new A(T,w)}t.B=function(w){return V(this,w).h},t.and=function(w){const _=Math.max(this.g.length,w.g.length),E=[];for(let k=0;k<_;k++)E[k]=this.i(k)&w.i(k);return new o(E,this.h&w.h)},t.or=function(w){const _=Math.max(this.g.length,w.g.length),E=[];for(let k=0;k<_;k++)E[k]=this.i(k)|w.i(k);return new o(E,this.h|w.h)},t.xor=function(w){const _=Math.max(this.g.length,w.g.length),E=[];for(let k=0;k<_;k++)E[k]=this.i(k)^w.i(k);return new o(E,this.h^w.h)};function j(w){const _=w.g.length+1,E=[];for(let k=0;k<_;k++)E[k]=w.i(k)<<1|w.i(k-1)>>>31;return new o(E,w.h)}function M(w,_){const E=_>>5;_%=32;const k=w.g.length-E,T=[];for(let R=0;R<k;R++)T[R]=_>0?w.i(R+E)>>>_|w.i(R+E+1)<<32-_:w.i(R+E);return new o(T,w.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,PE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,br=o}).apply(typeof ty<"u"?ty:typeof self<"u"?self:typeof window<"u"?window:{});var dl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var RE,To,xE,Ol,Jd,NE,DE,OE;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof dl=="object"&&dl];for(var h=0;h<a.length;++h){var p=a[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function i(a,h){if(h)e:{var p=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var N=a[g];if(!(N in p))break e;p=p[N]}a=a[a.length-1],g=p[a],h=h(g),h!=g&&h!=null&&e(p,a,{configurable:!0,writable:!0,value:h})}}i("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(a){return a||function(h){var p=[],g;for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&p.push([g,h[g]]);return p}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function l(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function c(a,h,p){return a.call.apply(a.bind,arguments)}function u(a,h,p){return u=c,u.apply(null,arguments)}function d(a,h){var p=Array.prototype.slice.call(arguments,1);return function(){var g=p.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function f(a,h){function p(){}p.prototype=h.prototype,a.Z=h.prototype,a.prototype=new p,a.prototype.constructor=a,a.Ob=function(g,N,O){for(var B=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)B[Z-2]=arguments[Z];return h.prototype[N].apply(g,B)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function y(a){const h=a.length;if(h>0){const p=Array(h);for(let g=0;g<h;g++)p[g]=a[g];return p}return[]}function P(a,h){for(let g=1;g<arguments.length;g++){const N=arguments[g];var p=typeof N;if(p=p!="object"?p:N?Array.isArray(N)?"array":p:"null",p=="array"||p=="object"&&typeof N.length=="number"){p=a.length||0;const O=N.length||0;a.length=p+O;for(let B=0;B<O;B++)a[p+B]=N[B]}else a.push(N)}}class C{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function x(a){o.setTimeout(()=>{throw a},0)}function I(){var a=w;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class v{constructor(){this.h=this.g=null}add(h,p){const g=A.get();g.set(h,p),this.h?this.h.next=g:this.g=g,this.h=g}}var A=new C(()=>new V,a=>a.reset());class V{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let j,M=!1,w=new v,_=()=>{const a=Promise.resolve(void 0);j=()=>{a.then(E)}};function E(){for(var a;a=I();){try{a.h.call(a.g)}catch(p){x(p)}var h=A;h.j(a),h.h<100&&(h.h++,a.next=h.g,h.g=a)}M=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function T(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}T.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const p=()=>{};o.addEventListener("test",p,h),o.removeEventListener("test",p,h)}catch{}return a}();function b(a){return/^[\s\xa0]*$/.test(a)}function te(a,h){T.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,h)}f(te,T),te.prototype.init=function(a,h){const p=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget,h||(p=="mouseover"?h=a.fromElement:p=="mouseout"&&(h=a.toElement)),this.relatedTarget=h,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&te.Z.h.call(this)},te.prototype.h=function(){te.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var ye="closure_listenable_"+(Math.random()*1e6|0),Bt=0;function kn(a,h,p,g,N){this.listener=a,this.proxy=null,this.src=h,this.type=p,this.capture=!!g,this.ha=N,this.key=++Bt,this.da=this.fa=!1}function z(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function G(a,h,p){for(const g in a)h.call(p,a[g],g,a)}function X(a,h){for(const p in a)h.call(void 0,a[p],p,a)}function ve(a){const h={};for(const p in a)h[p]=a[p];return h}const Pe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Hr(a,h){let p,g;for(let N=1;N<arguments.length;N++){g=arguments[N];for(p in g)a[p]=g[p];for(let O=0;O<Pe.length;O++)p=Pe[O],Object.prototype.hasOwnProperty.call(g,p)&&(a[p]=g[p])}}function xt(a){this.src=a,this.g={},this.h=0}xt.prototype.add=function(a,h,p,g,N){const O=a.toString();a=this.g[O],a||(a=this.g[O]=[],this.h++);const B=zt(a,h,g,N);return B>-1?(h=a[B],p||(h.fa=!1)):(h=new kn(h,this.src,O,!!g,N),h.fa=p,a.push(h)),h};function qr(a,h){const p=h.type;if(p in a.g){var g=a.g[p],N=Array.prototype.indexOf.call(g,h,void 0),O;(O=N>=0)&&Array.prototype.splice.call(g,N,1),O&&(z(h),a.g[p].length==0&&(delete a.g[p],a.h--))}}function zt(a,h,p,g){for(let N=0;N<a.length;++N){const O=a[N];if(!O.da&&O.listener==h&&O.capture==!!p&&O.ha==g)return N}return-1}var Gn="closure_lm_"+(Math.random()*1e6|0),Ru={};function Pm(a,h,p,g,N){if(g&&g.once)return xm(a,h,p,g,N);if(Array.isArray(h)){for(let O=0;O<h.length;O++)Pm(a,h[O],p,g,N);return null}return p=Ou(p),a&&a[ye]?a.J(h,p,l(g)?!!g.capture:!!g,N):Rm(a,h,p,!1,g,N)}function Rm(a,h,p,g,N,O){if(!h)throw Error("Invalid event type");const B=l(N)?!!N.capture:!!N;let Z=Nu(a);if(Z||(a[Gn]=Z=new xt(a)),p=Z.add(h,p,g,B,O),p.proxy)return p;if(g=RS(),p.proxy=g,g.src=a,g.listener=p,a.addEventListener)R||(N=B),N===void 0&&(N=!1),a.addEventListener(h.toString(),g,N);else if(a.attachEvent)a.attachEvent(Dm(h.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return p}function RS(){function a(p){return h.call(a.src,a.listener,p)}const h=xS;return a}function xm(a,h,p,g,N){if(Array.isArray(h)){for(let O=0;O<h.length;O++)xm(a,h[O],p,g,N);return null}return p=Ou(p),a&&a[ye]?a.K(h,p,l(g)?!!g.capture:!!g,N):Rm(a,h,p,!0,g,N)}function Nm(a,h,p,g,N){if(Array.isArray(h))for(var O=0;O<h.length;O++)Nm(a,h[O],p,g,N);else g=l(g)?!!g.capture:!!g,p=Ou(p),a&&a[ye]?(a=a.i,O=String(h).toString(),O in a.g&&(h=a.g[O],p=zt(h,p,g,N),p>-1&&(z(h[p]),Array.prototype.splice.call(h,p,1),h.length==0&&(delete a.g[O],a.h--)))):a&&(a=Nu(a))&&(h=a.g[h.toString()],a=-1,h&&(a=zt(h,p,g,N)),(p=a>-1?h[a]:null)&&xu(p))}function xu(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[ye])qr(h.i,a);else{var p=a.type,g=a.proxy;h.removeEventListener?h.removeEventListener(p,g,a.capture):h.detachEvent?h.detachEvent(Dm(p),g):h.addListener&&h.removeListener&&h.removeListener(g),(p=Nu(h))?(qr(p,a),p.h==0&&(p.src=null,h[Gn]=null)):z(a)}}}function Dm(a){return a in Ru?Ru[a]:Ru[a]="on"+a}function xS(a,h){if(a.da)a=!0;else{h=new te(h,this);const p=a.listener,g=a.ha||a.src;a.fa&&xu(a),a=p.call(g,h)}return a}function Nu(a){return a=a[Gn],a instanceof xt?a:null}var Du="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ou(a){return typeof a=="function"?a:(a[Du]||(a[Du]=function(h){return a.handleEvent(h)}),a[Du])}function Ze(){k.call(this),this.i=new xt(this),this.M=this,this.G=null}f(Ze,k),Ze.prototype[ye]=!0,Ze.prototype.removeEventListener=function(a,h,p,g){Nm(this,a,h,p,g)};function lt(a,h){var p,g=a.G;if(g)for(p=[];g;g=g.G)p.push(g);if(a=a.M,g=h.type||h,typeof h=="string")h=new T(h,a);else if(h instanceof T)h.target=h.target||a;else{var N=h;h=new T(g,a),Hr(h,N)}N=!0;let O,B;if(p)for(B=p.length-1;B>=0;B--)O=h.g=p[B],N=La(O,g,!0,h)&&N;if(O=h.g=a,N=La(O,g,!0,h)&&N,N=La(O,g,!1,h)&&N,p)for(B=0;B<p.length;B++)O=h.g=p[B],N=La(O,g,!1,h)&&N}Ze.prototype.N=function(){if(Ze.Z.N.call(this),this.i){var a=this.i;for(const h in a.g){const p=a.g[h];for(let g=0;g<p.length;g++)z(p[g]);delete a.g[h],a.h--}}this.G=null},Ze.prototype.J=function(a,h,p,g){return this.i.add(String(a),h,!1,p,g)},Ze.prototype.K=function(a,h,p,g){return this.i.add(String(a),h,!0,p,g)};function La(a,h,p,g){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();let N=!0;for(let O=0;O<h.length;++O){const B=h[O];if(B&&!B.da&&B.capture==p){const Z=B.listener,je=B.ha||B.src;B.fa&&qr(a.i,B),N=Z.call(je,g)!==!1&&N}}return N&&!g.defaultPrevented}function NS(a,h){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=u(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:o.setTimeout(a,h||0)}function Om(a){a.g=NS(()=>{a.g=null,a.i&&(a.i=!1,Om(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class DS extends k{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Om(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bs(a){k.call(this),this.h=a,this.g={}}f(Bs,k);var Vm=[];function Mm(a){G(a.g,function(h,p){this.g.hasOwnProperty(p)&&xu(h)},a),a.g={}}Bs.prototype.N=function(){Bs.Z.N.call(this),Mm(this)},Bs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Vu=o.JSON.stringify,OS=o.JSON.parse,VS=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function Lm(){}function Fm(){}var zs={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Mu(){T.call(this,"d")}f(Mu,T);function Lu(){T.call(this,"c")}f(Lu,T);var Wr={},jm=null;function Fa(){return jm=jm||new Ze}Wr.Ia="serverreachability";function Um(a){T.call(this,Wr.Ia,a)}f(Um,T);function $s(a){const h=Fa();lt(h,new Um(h))}Wr.STAT_EVENT="statevent";function Bm(a,h){T.call(this,Wr.STAT_EVENT,a),this.stat=h}f(Bm,T);function ct(a){const h=Fa();lt(h,new Bm(h,a))}Wr.Ja="timingevent";function zm(a,h){T.call(this,Wr.Ja,a),this.size=h}f(zm,T);function Hs(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},h)}function qs(){this.g=!0}qs.prototype.ua=function(){this.g=!1};function MS(a,h,p,g,N,O){a.info(function(){if(a.g)if(O){var B="",Z=O.split("&");for(let ce=0;ce<Z.length;ce++){var je=Z[ce].split("=");if(je.length>1){const $e=je[0];je=je[1];const an=$e.split("_");B=an.length>=2&&an[1]=="type"?B+($e+"="+je+"&"):B+($e+"=redacted&")}}}else B=null;else B=O;return"XMLHTTP REQ ("+g+") [attempt "+N+"]: "+h+`
`+p+`
`+B})}function LS(a,h,p,g,N,O,B){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+N+"]: "+h+`
`+p+`
`+O+" "+B})}function Ci(a,h,p,g){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+jS(a,p)+(g?" "+g:"")})}function FS(a,h){a.info(function(){return"TIMEOUT: "+h})}qs.prototype.info=function(){};function jS(a,h){if(!a.g)return h;if(!h)return null;try{const O=JSON.parse(h);if(O){for(a=0;a<O.length;a++)if(Array.isArray(O[a])){var p=O[a];if(!(p.length<2)){var g=p[1];if(Array.isArray(g)&&!(g.length<1)){var N=g[0];if(N!="noop"&&N!="stop"&&N!="close")for(let B=1;B<g.length;B++)g[B]=""}}}}return Vu(O)}catch{return h}}var ja={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},$m={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Hm;function Fu(){}f(Fu,Lm),Fu.prototype.g=function(){return new XMLHttpRequest},Hm=new Fu;function Ws(a){return encodeURIComponent(String(a))}function US(a){var h=1;a=a.split(":");const p=[];for(;h>0&&a.length;)p.push(a.shift()),h--;return a.length&&p.push(a.join(":")),p}function Qn(a,h,p,g){this.j=a,this.i=h,this.l=p,this.S=g||1,this.V=new Bs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new qm}function qm(){this.i=null,this.g="",this.h=!1}var Wm={},ju={};function Uu(a,h,p){a.M=1,a.A=Ba(on(h)),a.u=p,a.R=!0,Km(a,null)}function Km(a,h){a.F=Date.now(),Ua(a),a.B=on(a.A);var p=a.B,g=a.S;Array.isArray(g)||(g=[String(g)]),og(p.i,"t",g),a.C=0,p=a.j.L,a.h=new qm,a.g=Ig(a.j,p?h:null,!a.u),a.P>0&&(a.O=new DS(u(a.Y,a,a.g),a.P)),h=a.V,p=a.g,g=a.ba;var N="readystatechange";Array.isArray(N)||(N&&(Vm[0]=N.toString()),N=Vm);for(let O=0;O<N.length;O++){const B=Pm(p,N[O],g||h.handleEvent,!1,h.h||h);if(!B)break;h.g[B.key]=B}h=a.J?ve(a.J):{},a.u?(a.v||(a.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,h)):(a.v="GET",a.g.ea(a.B,a.v,null,h)),$s(),MS(a.i,a.v,a.B,a.l,a.S,a.u)}Qn.prototype.ba=function(a){a=a.target;const h=this.O;h&&Xn(a)==3?h.j():this.Y(a)},Qn.prototype.Y=function(a){try{if(a==this.g)e:{const Z=Xn(this.g),je=this.g.ya(),ce=this.g.ca();if(!(Z<3)&&(Z!=3||this.g&&(this.h.h||this.g.la()||fg(this.g)))){this.K||Z!=4||je==7||(je==8||ce<=0?$s(3):$s(2)),Bu(this);var h=this.g.ca();this.X=h;var p=BS(this);if(this.o=h==200,LS(this.i,this.v,this.B,this.l,this.S,Z,h),this.o){if(this.U&&!this.L){t:{if(this.g){var g,N=this.g;if((g=N.g?N.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(g)){var O=g;break t}}O=null}if(a=O)Ci(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,zu(this,a);else{this.o=!1,this.m=3,ct(12),Kr(this),Ks(this);break e}}if(this.R){a=!0;let $e;for(;!this.K&&this.C<p.length;)if($e=zS(this,p),$e==ju){Z==4&&(this.m=4,ct(14),a=!1),Ci(this.i,this.l,null,"[Incomplete Response]");break}else if($e==Wm){this.m=4,ct(15),Ci(this.i,this.l,p,"[Invalid Chunk]"),a=!1;break}else Ci(this.i,this.l,$e,null),zu(this,$e);if(Gm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Z!=4||p.length!=0||this.h.h||(this.m=1,ct(16),a=!1),this.o=this.o&&a,!a)Ci(this.i,this.l,p,"[Invalid Chunked Response]"),Kr(this),Ks(this);else if(p.length>0&&!this.W){this.W=!0;var B=this.j;B.g==this&&B.aa&&!B.P&&(B.j.info("Great, no buffering proxy detected. Bytes received: "+p.length),Yu(B),B.P=!0,ct(11))}}else Ci(this.i,this.l,p,null),zu(this,p);Z==4&&Kr(this),this.o&&!this.K&&(Z==4?wg(this.j,this):(this.o=!1,Ua(this)))}else nI(this.g),h==400&&p.indexOf("Unknown SID")>0?(this.m=3,ct(12)):(this.m=0,ct(13)),Kr(this),Ks(this)}}}catch{}finally{}};function BS(a){if(!Gm(a))return a.g.la();const h=fg(a.g);if(h==="")return"";let p="";const g=h.length,N=Xn(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return Kr(a),Ks(a),"";a.h.i=new o.TextDecoder}for(let O=0;O<g;O++)a.h.h=!0,p+=a.h.i.decode(h[O],{stream:!(N&&O==g-1)});return h.length=0,a.h.g+=p,a.C=0,a.h.g}function Gm(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function zS(a,h){var p=a.C,g=h.indexOf(`
`,p);return g==-1?ju:(p=Number(h.substring(p,g)),isNaN(p)?Wm:(g+=1,g+p>h.length?ju:(h=h.slice(g,g+p),a.C=g+p,h)))}Qn.prototype.cancel=function(){this.K=!0,Kr(this)};function Ua(a){a.T=Date.now()+a.H,Qm(a,a.H)}function Qm(a,h){if(a.D!=null)throw Error("WatchDog timer not null");a.D=Hs(u(a.aa,a),h)}function Bu(a){a.D&&(o.clearTimeout(a.D),a.D=null)}Qn.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(FS(this.i,this.B),this.M!=2&&($s(),ct(17)),Kr(this),this.m=2,Ks(this)):Qm(this,this.T-a)};function Ks(a){a.j.I==0||a.K||wg(a.j,a)}function Kr(a){Bu(a);var h=a.O;h&&typeof h.dispose=="function"&&h.dispose(),a.O=null,Mm(a.V),a.g&&(h=a.g,a.g=null,h.abort(),h.dispose())}function zu(a,h){try{var p=a.j;if(p.I!=0&&(p.g==a||$u(p.h,a))){if(!a.L&&$u(p.h,a)&&p.I==3){try{var g=p.Ba.g.parse(h)}catch{g=null}if(Array.isArray(g)&&g.length==3){var N=g;if(N[0]==0){e:if(!p.v){if(p.g)if(p.g.F+3e3<a.F)Wa(p),Ha(p);else break e;Qu(p),ct(18)}}else p.xa=N[1],0<p.xa-p.K&&N[2]<37500&&p.F&&p.A==0&&!p.C&&(p.C=Hs(u(p.Va,p),6e3));Xm(p.h)<=1&&p.ta&&(p.ta=void 0)}else Qr(p,11)}else if((a.L||p.g==a)&&Wa(p),!b(h))for(N=p.Ba.g.parse(h),h=0;h<N.length;h++){let ce=N[h];const $e=ce[0];if(!($e<=p.K))if(p.K=$e,ce=ce[1],p.I==2)if(ce[0]=="c"){p.M=ce[1],p.ba=ce[2];const an=ce[3];an!=null&&(p.ka=an,p.j.info("VER="+p.ka));const Yr=ce[4];Yr!=null&&(p.za=Yr,p.j.info("SVER="+p.za));const Zn=ce[5];Zn!=null&&typeof Zn=="number"&&Zn>0&&(g=1.5*Zn,p.O=g,p.j.info("backChannelRequestTimeoutMs_="+g)),g=p;const er=a.g;if(er){const Ga=er.g?er.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ga){var O=g.h;O.g||Ga.indexOf("spdy")==-1&&Ga.indexOf("quic")==-1&&Ga.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Hu(O,O.h),O.h=null))}if(g.G){const Ju=er.g?er.g.getResponseHeader("X-HTTP-Session-Id"):null;Ju&&(g.wa=Ju,de(g.J,g.G,Ju))}}p.I=3,p.l&&p.l.ra(),p.aa&&(p.T=Date.now()-a.F,p.j.info("Handshake RTT: "+p.T+"ms")),g=p;var B=a;if(g.na=Sg(g,g.L?g.ba:null,g.W),B.L){Zm(g.h,B);var Z=B,je=g.O;je&&(Z.H=je),Z.D&&(Bu(Z),Ua(Z)),g.g=B}else yg(g);p.i.length>0&&qa(p)}else ce[0]!="stop"&&ce[0]!="close"||Qr(p,7);else p.I==3&&(ce[0]=="stop"||ce[0]=="close"?ce[0]=="stop"?Qr(p,7):Gu(p):ce[0]!="noop"&&p.l&&p.l.qa(ce),p.A=0)}}$s(4)}catch{}}var $S=class{constructor(a,h){this.g=a,this.map=h}};function Ym(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Jm(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Xm(a){return a.h?1:a.g?a.g.size:0}function $u(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function Hu(a,h){a.g?a.g.add(h):a.h=h}function Zm(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}Ym.prototype.cancel=function(){if(this.i=eg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function eg(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const p of a.g.values())h=h.concat(p.G);return h}return y(a.i)}var tg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function HS(a,h){if(a){a=a.split("&");for(let p=0;p<a.length;p++){const g=a[p].indexOf("=");let N,O=null;g>=0?(N=a[p].substring(0,g),O=a[p].substring(g+1)):N=a[p],h(N,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function Yn(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;a instanceof Yn?(this.l=a.l,Gs(this,a.j),this.o=a.o,this.g=a.g,Qs(this,a.u),this.h=a.h,qu(this,ag(a.i)),this.m=a.m):a&&(h=String(a).match(tg))?(this.l=!1,Gs(this,h[1]||"",!0),this.o=Ys(h[2]||""),this.g=Ys(h[3]||"",!0),Qs(this,h[4]),this.h=Ys(h[5]||"",!0),qu(this,h[6]||"",!0),this.m=Ys(h[7]||"")):(this.l=!1,this.i=new Xs(null,this.l))}Yn.prototype.toString=function(){const a=[];var h=this.j;h&&a.push(Js(h,ng,!0),":");var p=this.g;return(p||h=="file")&&(a.push("//"),(h=this.o)&&a.push(Js(h,ng,!0),"@"),a.push(Ws(p).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.u,p!=null&&a.push(":",String(p))),(p=this.h)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(Js(p,p.charAt(0)=="/"?KS:WS,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",Js(p,QS)),a.join("")},Yn.prototype.resolve=function(a){const h=on(this);let p=!!a.j;p?Gs(h,a.j):p=!!a.o,p?h.o=a.o:p=!!a.g,p?h.g=a.g:p=a.u!=null;var g=a.h;if(p)Qs(h,a.u);else if(p=!!a.h){if(g.charAt(0)!="/")if(this.g&&!this.h)g="/"+g;else{var N=h.h.lastIndexOf("/");N!=-1&&(g=h.h.slice(0,N+1)+g)}if(N=g,N==".."||N==".")g="";else if(N.indexOf("./")!=-1||N.indexOf("/.")!=-1){g=N.lastIndexOf("/",0)==0,N=N.split("/");const O=[];for(let B=0;B<N.length;){const Z=N[B++];Z=="."?g&&B==N.length&&O.push(""):Z==".."?((O.length>1||O.length==1&&O[0]!="")&&O.pop(),g&&B==N.length&&O.push("")):(O.push(Z),g=!0)}g=O.join("/")}else g=N}return p?h.h=g:p=a.i.toString()!=="",p?qu(h,ag(a.i)):p=!!a.m,p&&(h.m=a.m),h};function on(a){return new Yn(a)}function Gs(a,h,p){a.j=p?Ys(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function Qs(a,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);a.u=h}else a.u=null}function qu(a,h,p){h instanceof Xs?(a.i=h,YS(a.i,a.l)):(p||(h=Js(h,GS)),a.i=new Xs(h,a.l))}function de(a,h,p){a.i.set(h,p)}function Ba(a){return de(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function Ys(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Js(a,h,p){return typeof a=="string"?(a=encodeURI(a).replace(h,qS),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function qS(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var ng=/[#\/\?@]/g,WS=/[#\?:]/g,KS=/[#\?]/g,GS=/[#\?@]/g,QS=/#/g;function Xs(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function Gr(a){a.g||(a.g=new Map,a.h=0,a.i&&HS(a.i,function(h,p){a.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=Xs.prototype,t.add=function(a,h){Gr(this),this.i=null,a=Pi(this,a);let p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(h),this.h+=1,this};function rg(a,h){Gr(a),h=Pi(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function ig(a,h){return Gr(a),h=Pi(a,h),a.g.has(h)}t.forEach=function(a,h){Gr(this),this.g.forEach(function(p,g){p.forEach(function(N){a.call(h,N,g,this)},this)},this)};function sg(a,h){Gr(a);let p=[];if(typeof h=="string")ig(a,h)&&(p=p.concat(a.g.get(Pi(a,h))));else for(a=Array.from(a.g.values()),h=0;h<a.length;h++)p=p.concat(a[h]);return p}t.set=function(a,h){return Gr(this),this.i=null,a=Pi(this,a),ig(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=sg(this,a),a.length>0?String(a[0]):h):h};function og(a,h,p){rg(a,h),p.length>0&&(a.i=null,a.g.set(Pi(a,h),y(p)),a.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(let g=0;g<h.length;g++){var p=h[g];const N=Ws(p);p=sg(this,p);for(let O=0;O<p.length;O++){let B=N;p[O]!==""&&(B+="="+Ws(p[O])),a.push(B)}}return this.i=a.join("&")};function ag(a){const h=new Xs;return h.i=a.i,a.g&&(h.g=new Map(a.g),h.h=a.h),h}function Pi(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function YS(a,h){h&&!a.j&&(Gr(a),a.i=null,a.g.forEach(function(p,g){const N=g.toLowerCase();g!=N&&(rg(this,g),og(this,N,p))},a)),a.j=h}function JS(a,h){const p=new qs;if(o.Image){const g=new Image;g.onload=d(Jn,p,"TestLoadImage: loaded",!0,h,g),g.onerror=d(Jn,p,"TestLoadImage: error",!1,h,g),g.onabort=d(Jn,p,"TestLoadImage: abort",!1,h,g),g.ontimeout=d(Jn,p,"TestLoadImage: timeout",!1,h,g),o.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else h(!1)}function XS(a,h){const p=new qs,g=new AbortController,N=setTimeout(()=>{g.abort(),Jn(p,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:g.signal}).then(O=>{clearTimeout(N),O.ok?Jn(p,"TestPingServer: ok",!0,h):Jn(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(N),Jn(p,"TestPingServer: error",!1,h)})}function Jn(a,h,p,g,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),g(p)}catch{}}function ZS(){this.g=new VS}function Wu(a){this.i=a.Sb||null,this.h=a.ab||!1}f(Wu,Lm),Wu.prototype.g=function(){return new za(this.i,this.h)};function za(a,h){Ze.call(this),this.H=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(za,Ze),t=za.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=h,this.readyState=1,eo(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(h.body=a),(this.H||o).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Zs(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,eo(this)),this.g&&(this.readyState=3,eo(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;lg(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function lg(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?Zs(this):eo(this),this.readyState==3&&lg(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,Zs(this))},t.Na=function(a){this.g&&(this.response=a,Zs(this))},t.ga=function(){this.g&&Zs(this)};function Zs(a){a.readyState=4,a.l=null,a.j=null,a.B=null,eo(a)}t.setRequestHeader=function(a,h){this.A.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=h.next();return a.join(`\r
`)};function eo(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(za.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function cg(a){let h="";return G(a,function(p,g){h+=g,h+=":",h+=p,h+=`\r
`}),h}function Ku(a,h,p){e:{for(g in p){var g=!1;break e}g=!0}g||(p=cg(p),typeof a=="string"?p!=null&&Ws(p):de(a,h,p))}function ke(a){Ze.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(ke,Ze);var eI=/^https?$/i,tI=["POST","PUT"];t=ke.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,h,p,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Hm.g(),this.g.onreadystatechange=m(u(this.Ca,this));try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(O){ug(this,O);return}if(a=p||"",p=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var N in g)p.set(N,g[N]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const O of g.keys())p.set(O,g.get(O));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(p.keys()).find(O=>O.toLowerCase()=="content-type"),N=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(tI,h,void 0)>=0)||g||N||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,B]of p)this.g.setRequestHeader(O,B);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(O){ug(this,O)}};function ug(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.o=5,hg(a),$a(a)}function hg(a){a.A||(a.A=!0,lt(a,"complete"),lt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,lt(this,"complete"),lt(this,"abort"),$a(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$a(this,!0)),ke.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?dg(this):this.Xa())},t.Xa=function(){dg(this)};function dg(a){if(a.h&&typeof s<"u"){if(a.v&&Xn(a)==4)setTimeout(a.Ca.bind(a),0);else if(lt(a,"readystatechange"),Xn(a)==4){a.h=!1;try{const O=a.ca();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var g;if(g=O===0){let B=String(a.D).match(tg)[1]||null;!B&&o.self&&o.self.location&&(B=o.self.location.protocol.slice(0,-1)),g=!eI.test(B?B.toLowerCase():"")}p=g}if(p)lt(a,"complete"),lt(a,"success");else{a.o=6;try{var N=Xn(a)>2?a.g.statusText:""}catch{N=""}a.l=N+" ["+a.ca()+"]",hg(a)}}finally{$a(a)}}}}function $a(a,h){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const p=a.g;a.g=null,h||lt(a,"ready");try{p.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Xn(a){return a.g?a.g.readyState:0}t.ca=function(){try{return Xn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),OS(h)}};function fg(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function nI(a){const h={};a=(a.g&&Xn(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(b(a[g]))continue;var p=US(a[g]);const N=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const O=h[N]||[];h[N]=O,O.push(p)}X(h,function(g){return g.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function to(a,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||h}function pg(a){this.za=0,this.i=[],this.j=new qs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=to("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=to("baseRetryDelayMs",5e3,a),this.Za=to("retryDelaySeedMs",1e4,a),this.Ta=to("forwardChannelMaxRetries",2,a),this.va=to("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new Ym(a&&a.concurrentRequestLimit),this.Ba=new ZS,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=pg.prototype,t.ka=8,t.I=1,t.connect=function(a,h,p,g){ct(0),this.W=a,this.H=h||{},p&&g!==void 0&&(this.H.OSID=p,this.H.OAID=g),this.F=this.X,this.J=Sg(this,null,this.W),qa(this)};function Gu(a){if(mg(a),a.I==3){var h=a.V++,p=on(a.J);if(de(p,"SID",a.M),de(p,"RID",h),de(p,"TYPE","terminate"),no(a,p),h=new Qn(a,a.j,h),h.M=2,h.A=Ba(on(p)),p=!1,o.navigator&&o.navigator.sendBeacon)try{p=o.navigator.sendBeacon(h.A.toString(),"")}catch{}!p&&o.Image&&(new Image().src=h.A,p=!0),p||(h.g=Ig(h.j,null),h.g.ea(h.A)),h.F=Date.now(),Ua(h)}Tg(a)}function Ha(a){a.g&&(Yu(a),a.g.cancel(),a.g=null)}function mg(a){Ha(a),a.v&&(o.clearTimeout(a.v),a.v=null),Wa(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function qa(a){if(!Jm(a.h)&&!a.m){a.m=!0;var h=a.Ea;j||_(),M||(j(),M=!0),w.add(h,a),a.D=0}}function rI(a,h){return Xm(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=h.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=Hs(u(a.Ea,a,h),Eg(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const N=new Qn(this,this.j,a);let O=this.o;if(this.U&&(O?(O=ve(O),Hr(O,this.U)):O=this.U),this.u!==null||this.R||(N.J=O,O=null),this.S)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var g=this.i[p];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(h+=g,h>4096){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=_g(this,N,h),p=on(this.J),de(p,"RID",a),de(p,"CVER",22),this.G&&de(p,"X-HTTP-Session-Id",this.G),no(this,p),O&&(this.R?h="headers="+Ws(cg(O))+"&"+h:this.u&&Ku(p,this.u,O)),Hu(this.h,N),this.Ra&&de(p,"TYPE","init"),this.S?(de(p,"$req",h),de(p,"SID","null"),N.U=!0,Uu(N,p,null)):Uu(N,p,h),this.I=2}}else this.I==3&&(a?gg(this,a):this.i.length==0||Jm(this.h)||gg(this))};function gg(a,h){var p;h?p=h.l:p=a.V++;const g=on(a.J);de(g,"SID",a.M),de(g,"RID",p),de(g,"AID",a.K),no(a,g),a.u&&a.o&&Ku(g,a.u,a.o),p=new Qn(a,a.j,p,a.D+1),a.u===null&&(p.J=a.o),h&&(a.i=h.G.concat(a.i)),h=_g(a,p,1e3),p.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),Hu(a.h,p),Uu(p,g,h)}function no(a,h){a.H&&G(a.H,function(p,g){de(h,g,p)}),a.l&&G({},function(p,g){de(h,g,p)})}function _g(a,h,p){p=Math.min(a.i.length,p);const g=a.l?u(a.l.Ka,a.l,a):null;e:{var N=a.i;let Z=-1;for(;;){const je=["count="+p];Z==-1?p>0?(Z=N[0].g,je.push("ofs="+Z)):Z=0:je.push("ofs="+Z);let ce=!0;for(let $e=0;$e<p;$e++){var O=N[$e].g;const an=N[$e].map;if(O-=Z,O<0)Z=Math.max(0,N[$e].g-100),ce=!1;else try{O="req"+O+"_"||"";try{var B=an instanceof Map?an:Object.entries(an);for(const[Yr,Zn]of B){let er=Zn;l(Zn)&&(er=Vu(Zn)),je.push(O+Yr+"="+encodeURIComponent(er))}}catch(Yr){throw je.push(O+"type="+encodeURIComponent("_badmap")),Yr}}catch{g&&g(an)}}if(ce){B=je.join("&");break e}}B=void 0}return a=a.i.splice(0,p),h.G=a,B}function yg(a){if(!a.g&&!a.v){a.Y=1;var h=a.Da;j||_(),M||(j(),M=!0),w.add(h,a),a.A=0}}function Qu(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=Hs(u(a.Da,a),Eg(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,vg(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=Hs(u(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ct(10),Ha(this),vg(this))};function Yu(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function vg(a){a.g=new Qn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var h=on(a.na);de(h,"RID","rpc"),de(h,"SID",a.M),de(h,"AID",a.K),de(h,"CI",a.F?"0":"1"),!a.F&&a.ia&&de(h,"TO",a.ia),de(h,"TYPE","xmlhttp"),no(a,h),a.u&&a.o&&Ku(h,a.u,a.o),a.O&&(a.g.H=a.O);var p=a.g;a=a.ba,p.M=1,p.A=Ba(on(h)),p.u=null,p.R=!0,Km(p,a)}t.Va=function(){this.C!=null&&(this.C=null,Ha(this),Qu(this),ct(19))};function Wa(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function wg(a,h){var p=null;if(a.g==h){Wa(a),Yu(a),a.g=null;var g=2}else if($u(a.h,h))p=h.G,Zm(a.h,h),g=1;else return;if(a.I!=0){if(h.o)if(g==1){p=h.u?h.u.length:0,h=Date.now()-h.F;var N=a.D;g=Fa(),lt(g,new zm(g,p)),qa(a)}else yg(a);else if(N=h.m,N==3||N==0&&h.X>0||!(g==1&&rI(a,h)||g==2&&Qu(a)))switch(p&&p.length>0&&(h=a.h,h.i=h.i.concat(p)),N){case 1:Qr(a,5);break;case 4:Qr(a,10);break;case 3:Qr(a,6);break;default:Qr(a,2)}}}function Eg(a,h){let p=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(p*=2),p*h}function Qr(a,h){if(a.j.info("Error code "+h),h==2){var p=u(a.bb,a),g=a.Ua;const N=!g;g=new Yn(g||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Gs(g,"https"),Ba(g),N?JS(g.toString(),p):XS(g.toString(),p)}else ct(2);a.I=0,a.l&&a.l.pa(h),Tg(a),mg(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),ct(2)):(this.j.info("Failed to ping google.com"),ct(1))};function Tg(a){if(a.I=0,a.ja=[],a.l){const h=eg(a.h);(h.length!=0||a.i.length!=0)&&(P(a.ja,h),P(a.ja,a.i),a.h.i.length=0,y(a.i),a.i.length=0),a.l.oa()}}function Sg(a,h,p){var g=p instanceof Yn?on(p):new Yn(p);if(g.g!="")h&&(g.g=h+"."+g.g),Qs(g,g.u);else{var N=o.location;g=N.protocol,h=h?h+"."+N.hostname:N.hostname,N=+N.port;const O=new Yn(null);g&&Gs(O,g),h&&(O.g=h),N&&Qs(O,N),p&&(O.h=p),g=O}return p=a.G,h=a.wa,p&&h&&de(g,p,h),de(g,"VER",a.ka),no(a,g),g}function Ig(a,h,p){if(h&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Aa&&!a.ma?new ke(new Wu({ab:p})):new ke(a.ma),h.Fa(a.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function bg(){}t=bg.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Ka(){}Ka.prototype.g=function(a,h){return new Tt(a,h)};function Tt(a,h){Ze.call(this),this.g=new pg(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(a?a["X-WebChannel-Client-Profile"]=h.sa:a={"X-WebChannel-Client-Profile":h.sa}),this.g.U=a,(a=h&&h.Qb)&&!b(a)&&(this.g.u=a),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!b(h)&&(this.g.G=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new Ri(this)}f(Tt,Ze),Tt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Tt.prototype.close=function(){Gu(this.g)},Tt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.v&&(p={},p.__data__=Vu(a),a=p);h.i.push(new $S(h.Ya++,a)),h.I==3&&qa(h)},Tt.prototype.N=function(){this.g.l=null,delete this.j,Gu(this.g),delete this.g,Tt.Z.N.call(this)};function kg(a){Mu.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const p in h){a=p;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}f(kg,Mu);function Ag(){Lu.call(this),this.status=1}f(Ag,Lu);function Ri(a){this.g=a}f(Ri,bg),Ri.prototype.ra=function(){lt(this.g,"a")},Ri.prototype.qa=function(a){lt(this.g,new kg(a))},Ri.prototype.pa=function(a){lt(this.g,new Ag)},Ri.prototype.oa=function(){lt(this.g,"b")},Ka.prototype.createWebChannel=Ka.prototype.g,Tt.prototype.send=Tt.prototype.o,Tt.prototype.open=Tt.prototype.m,Tt.prototype.close=Tt.prototype.close,OE=function(){return new Ka},DE=function(){return Fa()},NE=Wr,Jd={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ja.NO_ERROR=0,ja.TIMEOUT=8,ja.HTTP_ERROR=6,Ol=ja,$m.COMPLETE="complete",xE=$m,Fm.EventType=zs,zs.OPEN="a",zs.CLOSE="b",zs.ERROR="c",zs.MESSAGE="d",Ze.prototype.listen=Ze.prototype.J,To=Fm,ke.prototype.listenOnce=ke.prototype.K,ke.prototype.getLastError=ke.prototype.Ha,ke.prototype.getLastErrorCode=ke.prototype.ya,ke.prototype.getStatus=ke.prototype.ca,ke.prototype.getResponseJson=ke.prototype.La,ke.prototype.getResponseText=ke.prototype.la,ke.prototype.send=ke.prototype.ea,ke.prototype.setWithCredentials=ke.prototype.Fa,RE=ke}).apply(typeof dl<"u"?dl:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}rt.UNAUTHENTICATED=new rt(null),rt.GOOGLE_CREDENTIALS=new rt("google-credentials-uid"),rt.FIRST_PARTY=new rt("first-party-uid"),rt.MOCK_USER=new rt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ms="12.8.0";function TP(t){Ms=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi=new Ip("@firebase/firestore");function Di(){return mi.logLevel}function H(t,...e){if(mi.logLevel<=ne.DEBUG){const n=e.map(Ap);mi.debug(`Firestore (${Ms}): ${t}`,...n)}}function zn(t,...e){if(mi.logLevel<=ne.ERROR){const n=e.map(Ap);mi.error(`Firestore (${Ms}): ${t}`,...n)}}function vs(t,...e){if(mi.logLevel<=ne.WARN){const n=e.map(Ap);mi.warn(`Firestore (${Ms}): ${t}`,...n)}}function Ap(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,VE(t,r,n)}function VE(t,e,n){let r=`FIRESTORE (${Ms}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw zn(r),new Error(r)}function ae(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||VE(e,i,r)}function J(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $ extends In{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class SP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(rt.UNAUTHENTICATED))}shutdown(){}}class IP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class bP{constructor(e){this.t=e,this.currentUser=rt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ae(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let s=new kr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new kr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},l=c=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new kr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ae(typeof r.accessToken=="string",31837,{l:r}),new ME(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ae(e===null||typeof e=="string",2055,{h:e}),new rt(e)}}class kP{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=rt.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class AP{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new kP(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(rt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ny{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class CP{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Kt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ae(this.o===void 0,3512);const r=s=>{s.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ny(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ae(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ny(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=PP(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function re(t,e){return t<e?-1:t>e?1:0}function Xd(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return xh(i)===xh(s)?re(i,s):xh(i)?1:-1}return re(t.length,e.length)}const RP=55296,xP=57343;function xh(t){const e=t.charCodeAt(0);return e>=RP&&e<=xP}function ws(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry="__name__";class dn{constructor(e,n,r){n===void 0?n=0:n>e.length&&Q(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Q(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return dn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof dn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=dn.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return re(e.length,n.length)}static compareSegments(e,n){const r=dn.isNumericId(e),i=dn.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?dn.extractNumericId(e).compare(dn.extractNumericId(n)):Xd(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return br.fromString(e.substring(4,e.length-2))}}class ue extends dn{construct(e,n,r){return new ue(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new $(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ue(n)}static emptyPath(){return new ue([])}}const NP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qe extends dn{construct(e,n,r){return new Qe(e,n,r)}static isValidIdentifier(e){return NP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===ry}static keyField(){return new Qe([ry])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new $(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new $(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new $(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new $(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qe(n)}static emptyPath(){return new Qe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.path=e}static fromPath(e){return new K(ue.fromString(e))}static fromName(e){return new K(ue.fromString(e).popFirst(5))}static empty(){return new K(ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ue.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new K(new ue(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(t,e,n){if(!n)throw new $(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function DP(t,e,n,r){if(e===!0&&r===!0)throw new $(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function iy(t){if(!K.isDocumentKey(t))throw new $(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function sy(t){if(K.isDocumentKey(t))throw new $(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function FE(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function uu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Q(12329,{type:typeof t})}function gn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=uu(t);throw new $(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fe(t,e){const n={typeString:t};return e&&(n.value=e),n}function Aa(t,e){if(!FE(t))throw new $(L.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new $(L.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy=-62135596800,ay=1e6;class me{static now(){return me.fromMillis(Date.now())}static fromDate(e){return me.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*ay);return new me(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<oy)throw new $(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ay}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:me._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Aa(e,me._jsonSchema))return new me(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-oy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}me._jsonSchemaVersion="firestore/timestamp/1.0",me._jsonSchema={type:Fe("string",me._jsonSchemaVersion),seconds:Fe("number"),nanoseconds:Fe("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{static fromTimestamp(e){return new Y(e)}static min(){return new Y(new me(0,0))}static max(){return new Y(new me(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha=-1;function OP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Y.fromTimestamp(r===1e9?new me(n+1,0):new me(n,r));return new xr(i,K.empty(),e)}function VP(t){return new xr(t.readTime,t.key,ha)}class xr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new xr(Y.min(),K.empty(),ha)}static max(){return new xr(Y.max(),K.empty(),ha)}}function MP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:re(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class FP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ls(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==LP)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Q(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(i=>i?F.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new F((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let c=0;c<s;c++){const u=c;n(e[u]).next(d=>{o[u]=d,++l,l===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new F((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function jP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Fs(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}hu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pp=-1;function du(t){return t==null}function Tc(t){return t===0&&1/t==-1/0}function UP(t){return typeof t=="number"&&Number.isInteger(t)&&!Tc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE="";function BP(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=ly(e)),e=zP(t.get(n),e);return ly(e)}function zP(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case jE:n+="";break;default:n+=s}}return n}function ly(t){return t+jE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Br(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function UE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e,n){this.comparator=e,this.root=n||Ge.EMPTY}insert(e,n){return new be(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ge.BLACK,null,null))}remove(e){return new be(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ge.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fl(this.root,e,this.comparator,!1)}getReverseIterator(){return new fl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fl(this.root,e,this.comparator,!0)}}class fl{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ge{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Ge.RED,this.left=i??Ge.EMPTY,this.right=s??Ge.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Ge(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ge.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Ge.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ge.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ge.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Q(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Q(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Q(27949);return e+(this.isRed()?0:1)}}Ge.EMPTY=null,Ge.RED=!0,Ge.BLACK=!1;Ge.EMPTY=new class{constructor(){this.size=0}get key(){throw Q(57766)}get value(){throw Q(16141)}get color(){throw Q(16727)}get left(){throw Q(29726)}get right(){throw Q(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new Ge(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e){this.comparator=e,this.data=new be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new uy(this.data.getIterator())}getIteratorFrom(e){return new uy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ze)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ze(this.comparator);return n.data=e,n}}class uy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.fields=e,e.sort(Qe.comparator)}static empty(){return new bt([])}unionWith(e){let n=new ze(Qe.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new bt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ws(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new BE("Invalid base64 string: "+s):s}}(e);return new Xe(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Xe(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xe.EMPTY_BYTE_STRING=new Xe("");const $P=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nr(t){if(ae(!!t,39018),typeof t=="string"){let e=0;const n=$P.exec(t);if(ae(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Re(t.seconds),nanos:Re(t.nanos)}}function Re(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Dr(t){return typeof t=="string"?Xe.fromBase64String(t):Xe.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zE="server_timestamp",$E="__type__",HE="__previous_value__",qE="__local_write_time__";function Rp(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[$E])==null?void 0:r.stringValue)===zE}function fu(t){const e=t.mapValue.fields[HE];return Rp(e)?fu(e):e}function da(t){const e=Nr(t.mapValue.fields[qE].timestampValue);return new me(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(e,n,r,i,s,o,l,c,u,d,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d,this.apiKey=f}}const Sc="(default)";class fa{constructor(e,n){this.projectId=e,this.database=n||Sc}static empty(){return new fa("","")}get isDefaultDatabase(){return this.database===Sc}isEqual(e){return e instanceof fa&&e.projectId===this.projectId&&e.database===this.database}}function qP(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new $(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fa(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE="__type__",KE="__max__",pl={mapValue:{fields:{__type__:{stringValue:KE}}}},GE="__vector__",Ic="value";function Or(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Rp(t)?4:KP(t)?9007199254740991:WP(t)?10:11:Q(28295,{value:t})}function Tn(t,e){if(t===e)return!0;const n=Or(t);if(n!==Or(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return da(t).isEqual(da(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Nr(i.timestampValue),l=Nr(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Dr(i.bytesValue).isEqual(Dr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Re(i.geoPointValue.latitude)===Re(s.geoPointValue.latitude)&&Re(i.geoPointValue.longitude)===Re(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Re(i.integerValue)===Re(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Re(i.doubleValue),l=Re(s.doubleValue);return o===l?Tc(o)===Tc(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return ws(t.arrayValue.values||[],e.arrayValue.values||[],Tn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(cy(o)!==cy(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Tn(o[c],l[c])))return!1;return!0}(t,e);default:return Q(52216,{left:t})}}function pa(t,e){return(t.values||[]).find(n=>Tn(n,e))!==void 0}function Es(t,e){if(t===e)return 0;const n=Or(t),r=Or(e);if(n!==r)return re(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return re(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=Re(s.integerValue||s.doubleValue),c=Re(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return hy(t.timestampValue,e.timestampValue);case 4:return hy(da(t),da(e));case 5:return Xd(t.stringValue,e.stringValue);case 6:return function(s,o){const l=Dr(s),c=Dr(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=re(l[u],c[u]);if(d!==0)return d}return re(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=re(Re(s.latitude),Re(o.latitude));return l!==0?l:re(Re(s.longitude),Re(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return dy(t.arrayValue,e.arrayValue);case 10:return function(s,o){var m,y,P,C;const l=s.fields||{},c=o.fields||{},u=(m=l[Ic])==null?void 0:m.arrayValue,d=(y=c[Ic])==null?void 0:y.arrayValue,f=re(((P=u==null?void 0:u.values)==null?void 0:P.length)||0,((C=d==null?void 0:d.values)==null?void 0:C.length)||0);return f!==0?f:dy(u,d)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===pl.mapValue&&o===pl.mapValue)return 0;if(s===pl.mapValue)return 1;if(o===pl.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){const m=Xd(c[f],d[f]);if(m!==0)return m;const y=Es(l[c[f]],u[d[f]]);if(y!==0)return y}return re(c.length,d.length)}(t.mapValue,e.mapValue);default:throw Q(23264,{he:n})}}function hy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return re(t,e);const n=Nr(t),r=Nr(e),i=re(n.seconds,r.seconds);return i!==0?i:re(n.nanos,r.nanos)}function dy(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Es(n[i],r[i]);if(s)return s}return re(n.length,r.length)}function Ts(t){return Zd(t)}function Zd(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Nr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Dr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return K.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Zd(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Zd(n.fields[o])}`;return i+"}"}(t.mapValue):Q(61005,{value:t})}function Vl(t){switch(Or(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=fu(t);return e?16+Vl(e):16;case 5:return 2*t.stringValue.length;case 6:return Dr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Vl(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Br(r.fields,(s,o)=>{i+=s.length+Vl(o)}),i}(t.mapValue);default:throw Q(13486,{value:t})}}function fy(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ef(t){return!!t&&"integerValue"in t}function xp(t){return!!t&&"arrayValue"in t}function py(t){return!!t&&"nullValue"in t}function my(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ml(t){return!!t&&"mapValue"in t}function WP(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[WE])==null?void 0:r.stringValue)===GE}function Lo(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Br(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Lo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Lo(t.arrayValue.values[n]);return e}return{...t}}function KP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===KE}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.value=e}static empty(){return new _t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ml(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Lo(n)}setAll(e){let n=Qe.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=Lo(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Ml(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Tn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Ml(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Br(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new _t(Lo(this.value))}}function QE(t){const e=[];return Br(t.fields,(n,r)=>{const i=new Qe([n]);if(Ml(r)){const s=QE(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new bt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new st(e,0,Y.min(),Y.min(),Y.min(),_t.empty(),0)}static newFoundDocument(e,n,r,i){return new st(e,1,n,Y.min(),r,i,0)}static newNoDocument(e,n){return new st(e,2,n,Y.min(),Y.min(),_t.empty(),0)}static newUnknownDocument(e,n){return new st(e,3,n,Y.min(),Y.min(),_t.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_t.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_t.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof st&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new st(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,n){this.position=e,this.inclusive=n}}function gy(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=K.comparator(K.fromName(o.referenceValue),n.key):r=Es(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function _y(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Tn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e,n="asc"){this.field=e,this.dir=n}}function GP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{}class Le extends YE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new YP(e,n,r):n==="array-contains"?new ZP(e,r):n==="in"?new eR(e,r):n==="not-in"?new tR(e,r):n==="array-contains-any"?new nR(e,r):new Le(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new JP(e,r):new XP(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Es(n,this.value)):n!==null&&Or(this.value)===Or(n)&&this.matchesComparison(Es(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rn extends YE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new rn(e,n)}matches(e){return JE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function JE(t){return t.op==="and"}function XE(t){return QP(t)&&JE(t)}function QP(t){for(const e of t.filters)if(e instanceof rn)return!1;return!0}function tf(t){if(t instanceof Le)return t.field.canonicalString()+t.op.toString()+Ts(t.value);if(XE(t))return t.filters.map(e=>tf(e)).join(",");{const e=t.filters.map(n=>tf(n)).join(",");return`${t.op}(${e})`}}function ZE(t,e){return t instanceof Le?function(r,i){return i instanceof Le&&r.op===i.op&&r.field.isEqual(i.field)&&Tn(r.value,i.value)}(t,e):t instanceof rn?function(r,i){return i instanceof rn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&ZE(o,i.filters[l]),!0):!1}(t,e):void Q(19439)}function eT(t){return t instanceof Le?function(n){return`${n.field.canonicalString()} ${n.op} ${Ts(n.value)}`}(t):t instanceof rn?function(n){return n.op.toString()+" {"+n.getFilters().map(eT).join(" ,")+"}"}(t):"Filter"}class YP extends Le{constructor(e,n,r){super(e,n,r),this.key=K.fromName(r.referenceValue)}matches(e){const n=K.comparator(e.key,this.key);return this.matchesComparison(n)}}class JP extends Le{constructor(e,n){super(e,"in",n),this.keys=tT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class XP extends Le{constructor(e,n){super(e,"not-in",n),this.keys=tT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function tT(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>K.fromName(r.referenceValue))}class ZP extends Le{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return xp(n)&&pa(n.arrayValue,this.value)}}class eR extends Le{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&pa(this.value.arrayValue,n)}}class tR extends Le{constructor(e,n){super(e,"not-in",n)}matches(e){if(pa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!pa(this.value.arrayValue,n)}}class nR extends Le{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!xp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>pa(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.Te=null}}function yy(t,e=null,n=[],r=[],i=null,s=null,o=null){return new rR(t,e,n,r,i,s,o)}function Np(t){const e=J(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>tf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),du(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ts(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ts(r)).join(",")),e.Te=n}return e.Te}function Dp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!GP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!ZE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!_y(t.startAt,e.startAt)&&_y(t.endAt,e.endAt)}function nf(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function iR(t,e,n,r,i,s,o,l){return new js(t,e,n,r,i,s,o,l)}function pu(t){return new js(t)}function vy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function sR(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function nT(t){return t.collectionGroup!==null}function Fo(t){const e=J(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new ze(Qe.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new ma(s,r))}),n.has(Qe.keyField().canonicalString())||e.Ie.push(new ma(Qe.keyField(),r))}return e.Ie}function _n(t){const e=J(t);return e.Ee||(e.Ee=oR(e,Fo(t))),e.Ee}function oR(t,e){if(t.limitType==="F")return yy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new ma(i.field,s)});const n=t.endAt?new bc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new bc(t.startAt.position,t.startAt.inclusive):null;return yy(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function rf(t,e){const n=t.filters.concat([e]);return new js(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function aR(t,e){const n=t.explicitOrderBy.concat([e]);return new js(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function sf(t,e,n){return new js(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function mu(t,e){return Dp(_n(t),_n(e))&&t.limitType===e.limitType}function rT(t){return`${Np(_n(t))}|lt:${t.limitType}`}function Oi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>eT(i)).join(", ")}]`),du(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ts(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ts(i)).join(",")),`Target(${r})`}(_n(t))}; limitType=${t.limitType})`}function gu(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):K.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Fo(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,c){const u=gy(o,l,c);return o.inclusive?u<=0:u<0}(r.startAt,Fo(r),i)||r.endAt&&!function(o,l,c){const u=gy(o,l,c);return o.inclusive?u>=0:u>0}(r.endAt,Fo(r),i))}(t,e)}function lR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function iT(t){return(e,n)=>{let r=!1;for(const i of Fo(t)){const s=cR(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function cR(t,e,n){const r=t.field.isKeyField()?K.comparator(e.key,n.key):function(s,o,l){const c=o.data.field(s),u=l.data.field(s);return c!==null&&u!==null?Es(c,u):Q(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Q(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Br(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return UE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR=new be(K.comparator);function $n(){return uR}const sT=new be(K.comparator);function So(...t){let e=sT;for(const n of t)e=e.insert(n.key,n);return e}function oT(t){let e=sT;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ii(){return jo()}function aT(){return jo()}function jo(){return new Ii(t=>t.toString(),(t,e)=>t.isEqual(e))}const hR=new be(K.comparator),dR=new ze(K.comparator);function ie(...t){let e=dR;for(const n of t)e=e.add(n);return e}const fR=new ze(re);function pR(){return fR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tc(e)?"-0":e}}function lT(t){return{integerValue:""+t}}function mR(t,e){return UP(e)?lT(e):Op(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(){this._=void 0}}function gR(t,e,n){return t instanceof kc?function(i,s){const o={fields:{[$E]:{stringValue:zE},[qE]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Rp(s)&&(s=fu(s)),s&&(o.fields[HE]=s),{mapValue:o}}(n,e):t instanceof ga?uT(t,e):t instanceof _a?hT(t,e):function(i,s){const o=cT(i,s),l=wy(o)+wy(i.Ae);return ef(o)&&ef(i.Ae)?lT(l):Op(i.serializer,l)}(t,e)}function _R(t,e,n){return t instanceof ga?uT(t,e):t instanceof _a?hT(t,e):n}function cT(t,e){return t instanceof Ac?function(r){return ef(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class kc extends _u{}class ga extends _u{constructor(e){super(),this.elements=e}}function uT(t,e){const n=dT(e);for(const r of t.elements)n.some(i=>Tn(i,r))||n.push(r);return{arrayValue:{values:n}}}class _a extends _u{constructor(e){super(),this.elements=e}}function hT(t,e){let n=dT(e);for(const r of t.elements)n=n.filter(i=>!Tn(i,r));return{arrayValue:{values:n}}}class Ac extends _u{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function wy(t){return Re(t.integerValue||t.doubleValue)}function dT(t){return xp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function yR(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ga&&i instanceof ga||r instanceof _a&&i instanceof _a?ws(r.elements,i.elements,Tn):r instanceof Ac&&i instanceof Ac?Tn(r.Ae,i.Ae):r instanceof kc&&i instanceof kc}(t.transform,e.transform)}class vR{constructor(e,n){this.version=e,this.transformResults=n}}class Zt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Zt}static exists(e){return new Zt(void 0,e)}static updateTime(e){return new Zt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ll(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class yu{}function fT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Vp(t.key,Zt.none()):new Ca(t.key,t.data,Zt.none());{const n=t.data,r=_t.empty();let i=new ze(Qe.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new zr(t.key,r,new bt(i.toArray()),Zt.none())}}function wR(t,e,n){t instanceof Ca?function(i,s,o){const l=i.value.clone(),c=Ty(i.fieldTransforms,s,o.transformResults);l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof zr?function(i,s,o){if(!Ll(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=Ty(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(pT(i)),c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Uo(t,e,n,r){return t instanceof Ca?function(s,o,l,c){if(!Ll(s.precondition,o))return l;const u=s.value.clone(),d=Sy(s.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof zr?function(s,o,l,c){if(!Ll(s.precondition,o))return l;const u=Sy(s.fieldTransforms,c,o),d=o.data;return d.setAll(pT(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,l){return Ll(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function ER(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=cT(r.transform,i||null);s!=null&&(n===null&&(n=_t.empty()),n.set(r.field,s))}return n||null}function Ey(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ws(r,i,(s,o)=>yR(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ca extends yu{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class zr extends yu{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function pT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Ty(t,e,n){const r=new Map;ae(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,_R(o,l,n[i]))}return r}function Sy(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,gR(s,o,e))}return r}class Vp extends yu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class TR extends yu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&wR(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Uo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Uo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=aT();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const c=fT(o,l);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Y.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ie())}isEqual(e){return this.batchId===e.batchId&&ws(this.mutations,e.mutations,(n,r)=>Ey(n,r))&&ws(this.baseMutations,e.baseMutations,(n,r)=>Ey(n,r))}}class Mp{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ae(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return hR}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Mp(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe,se;function kR(t){switch(t){case L.OK:return Q(64938);case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0;default:return Q(15467,{code:t})}}function mT(t){if(t===void 0)return zn("GRPC error has no .code"),L.UNKNOWN;switch(t){case Oe.OK:return L.OK;case Oe.CANCELLED:return L.CANCELLED;case Oe.UNKNOWN:return L.UNKNOWN;case Oe.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Oe.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Oe.INTERNAL:return L.INTERNAL;case Oe.UNAVAILABLE:return L.UNAVAILABLE;case Oe.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Oe.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Oe.NOT_FOUND:return L.NOT_FOUND;case Oe.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Oe.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Oe.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Oe.ABORTED:return L.ABORTED;case Oe.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Oe.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Oe.DATA_LOSS:return L.DATA_LOSS;default:return Q(39323,{code:t})}}(se=Oe||(Oe={}))[se.OK=0]="OK",se[se.CANCELLED=1]="CANCELLED",se[se.UNKNOWN=2]="UNKNOWN",se[se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",se[se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",se[se.NOT_FOUND=5]="NOT_FOUND",se[se.ALREADY_EXISTS=6]="ALREADY_EXISTS",se[se.PERMISSION_DENIED=7]="PERMISSION_DENIED",se[se.UNAUTHENTICATED=16]="UNAUTHENTICATED",se[se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",se[se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",se[se.ABORTED=10]="ABORTED",se[se.OUT_OF_RANGE=11]="OUT_OF_RANGE",se[se.UNIMPLEMENTED=12]="UNIMPLEMENTED",se[se.INTERNAL=13]="INTERNAL",se[se.UNAVAILABLE=14]="UNAVAILABLE",se[se.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR=new br([4294967295,4294967295],0);function Iy(t){const e=AR().encode(t),n=new PE;return n.update(e),new Uint8Array(n.digest())}function by(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new br([n,r],0),new br([i,s],0)]}class Lp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Io(`Invalid padding: ${n}`);if(r<0)throw new Io(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Io(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Io(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=br.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(br.fromNumber(r)));return i.compare(CR)===1&&(i=new br([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Iy(e),[r,i]=by(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Lp(s,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=Iy(e),[r,i]=by(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.be(o)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Io extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Pa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new vu(Y.min(),i,new be(re),$n(),ie())}}class Pa{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Pa(r,n,ie(),ie(),ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=i}}class gT{constructor(e,n){this.targetId=e,this.Ce=n}}class _T{constructor(e,n,r=Xe.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class ky{constructor(){this.ve=0,this.Fe=Ay(),this.Me=Xe.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ie(),n=ie(),r=ie();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Q(38017,{changeType:s})}}),new Pa(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=Ay()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,ae(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class PR{constructor(e){this.Ge=e,this.ze=new Map,this.je=$n(),this.He=ml(),this.Je=ml(),this.Ze=new be(re)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Q(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(nf(s))if(r===0){const o=new K(s.path);this.et(n,o,st.newNoDocument(o,Y.min()))}else ae(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=Dr(r).toUint8Array()}catch(c){if(c instanceof BE)return vs("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Lp(o,i,s)}catch(c){return vs(c instanceof Io?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const l=this.ot(o);if(l){if(s.current&&nf(l.target)){const c=new K(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,st.newNoDocument(c,e))}s.Be&&(n.set(o,s.ke()),s.Ke())}});let r=ie();this.Je.forEach((s,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new vu(e,n,this.Ze,this.je,r);return this.je=$n(),this.He=ml(),this.Je=ml(),this.Ze=new be(re),i}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.qe(n,1):i.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new ky,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new ze(re),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new ze(re),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ky),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ml(){return new be(K.comparator)}function Ay(){return new be(K.comparator)}const RR=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),xR=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),NR=(()=>({and:"AND",or:"OR"}))();class DR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function of(t,e){return t.useProto3Json||du(e)?e:{value:e}}function Cc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function yT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function OR(t,e){return Cc(t,e.toTimestamp())}function yn(t){return ae(!!t,49232),Y.fromTimestamp(function(n){const r=Nr(n);return new me(r.seconds,r.nanos)}(t))}function Fp(t,e){return af(t,e).canonicalString()}function af(t,e){const n=function(i){return new ue(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function vT(t){const e=ue.fromString(t);return ae(IT(e),10190,{key:e.toString()}),e}function lf(t,e){return Fp(t.databaseId,e.path)}function Nh(t,e){const n=vT(e);if(n.get(1)!==t.databaseId.projectId)throw new $(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new K(ET(n))}function wT(t,e){return Fp(t.databaseId,e)}function VR(t){const e=vT(t);return e.length===4?ue.emptyPath():ET(e)}function cf(t){return new ue(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ET(t){return ae(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Cy(t,e,n){return{name:lf(t,e),fields:n.value.mapValue.fields}}function MR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Q(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(ae(d===void 0||typeof d=="string",58123),Xe.fromBase64String(d||"")):(ae(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Xe.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const d=u.code===void 0?L.UNKNOWN:mT(u.code);return new $(d,u.message||"")}(o);n=new _T(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Nh(t,r.document.name),s=yn(r.document.updateTime),o=r.document.createTime?yn(r.document.createTime):Y.min(),l=new _t({mapValue:{fields:r.document.fields}}),c=st.newFoundDocument(i,s,o,l),u=r.targetIds||[],d=r.removedTargetIds||[];n=new Fl(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Nh(t,r.document),s=r.readTime?yn(r.readTime):Y.min(),o=st.newNoDocument(i,s),l=r.removedTargetIds||[];n=new Fl([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Nh(t,r.document),s=r.removedTargetIds||[];n=new Fl([],s,i,null)}else{if(!("filter"in e))return Q(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new bR(i,s),l=r.targetId;n=new gT(l,o)}}return n}function LR(t,e){let n;if(e instanceof Ca)n={update:Cy(t,e.key,e.value)};else if(e instanceof Vp)n={delete:lf(t,e.key)};else if(e instanceof zr)n={update:Cy(t,e.key,e.data),updateMask:WR(e.fieldMask)};else{if(!(e instanceof TR))return Q(16599,{dt:e.type});n={verify:lf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof kc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ga)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof _a)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ac)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw Q(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:OR(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Q(27497)}(t,e.precondition)),n}function FR(t,e){return t&&t.length>0?(ae(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?yn(i.updateTime):yn(s);return o.isEqual(Y.min())&&(o=yn(s)),new vR(o,i.transformResults||[])}(n,e))):[]}function jR(t,e){return{documents:[wT(t,e.path)]}}function UR(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=wT(t,i);const s=function(u){if(u.length!==0)return ST(rn.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(d=>function(m){return{field:Vi(m.field),direction:$R(m.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=of(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:i}}function BR(t){let e=VR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ae(r===1,65062);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(f){const m=TT(f);return m instanceof rn&&XE(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(P){return new ma(Mi(P.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(f){let m;return m=typeof f=="object"?f.value:f,du(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(f){const m=!!f.before,y=f.values||[];return new bc(y,m)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const m=!f.before,y=f.values||[];return new bc(y,m)}(n.endAt)),iR(e,i,o,s,l,"F",c,u)}function zR(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function TT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Mi(n.unaryFilter.field);return Le.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Mi(n.unaryFilter.field);return Le.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Mi(n.unaryFilter.field);return Le.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Mi(n.unaryFilter.field);return Le.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Q(61313);default:return Q(60726)}}(t):t.fieldFilter!==void 0?function(n){return Le.create(Mi(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Q(58110);default:return Q(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return rn.create(n.compositeFilter.filters.map(r=>TT(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Q(1026)}}(n.compositeFilter.op))}(t):Q(30097,{filter:t})}function $R(t){return RR[t]}function HR(t){return xR[t]}function qR(t){return NR[t]}function Vi(t){return{fieldPath:t.canonicalString()}}function Mi(t){return Qe.fromServerFormat(t.fieldPath)}function ST(t){return t instanceof Le?function(n){if(n.op==="=="){if(my(n.value))return{unaryFilter:{field:Vi(n.field),op:"IS_NAN"}};if(py(n.value))return{unaryFilter:{field:Vi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(my(n.value))return{unaryFilter:{field:Vi(n.field),op:"IS_NOT_NAN"}};if(py(n.value))return{unaryFilter:{field:Vi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vi(n.field),op:HR(n.op),value:n.value}}}(t):t instanceof rn?function(n){const r=n.getFilters().map(i=>ST(i));return r.length===1?r[0]:{compositeFilter:{op:qR(n.op),filters:r}}}(t):Q(54877,{filter:t})}function WR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function IT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function bT(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e,n,r,i,s=Y.min(),o=Y.min(),l=Xe.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new pr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new pr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new pr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new pr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e){this.yt=e}}function GR(t){const e=BR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?sf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(){this.Sn=new YR}addToCollectionParentIndex(e,n){return this.Sn.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(xr.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(xr.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class YR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ze(ue.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ze(ue.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},kT=41943040;class mt{static withCacheSize(e){return new mt(e,mt.DEFAULT_COLLECTION_PERCENTILE,mt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mt.DEFAULT_COLLECTION_PERCENTILE=10,mt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mt.DEFAULT=new mt(kT,mt.DEFAULT_COLLECTION_PERCENTILE,mt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mt.DISABLED=new mt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Ss(0)}static ar(){return new Ss(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ry="LruGarbageCollector",JR=1048576;function xy([t,e],[n,r]){const i=re(t,n);return i===0?re(e,r):i}class XR{constructor(e){this.Pr=e,this.buffer=new ze(xy),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();xy(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class ZR{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){H(Ry,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Fs(n)?H(Ry,"Ignoring IndexedDB error during garbage collection: ",n):await Ls(n)}await this.Ar(3e5)})}}class ex{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return F.resolve(hu.ce);const r=new XR(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.mr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve(Py)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Py):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,i,s,o,l,c,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,l=Date.now(),this.removeTargets(e,r,n))).next(f=>(s=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),Di()<=ne.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(l-o)+`ms
	Removed ${s} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}}function tx(t,e){return new ex(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(){this.changes=new Ii(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,st.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Uo(r.mutation,i,bt.empty(),me.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ie()){const i=ii();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=So();return s.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ii();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ie()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=$n();const o=jo(),l=function(){return jo()}();return n.forEach((c,u)=>{const d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof zr)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),Uo(d.mutation,u,d.mutation.getFieldMask(),me.now())):o.set(u.key,bt.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>l.set(u,new rx(d,o.get(u)??null))),l))}recalculateAndSaveOverlays(e,n){const r=jo();let i=new be((o,l)=>o-l),s=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let d=r.get(c)||bt.empty();d=l.applyToLocalView(u,d),r.set(c,d);const f=(i.get(l.batchId)||ie()).add(c);i=i.insert(l.batchId,f)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,f=aT();d.forEach(m=>{if(!s.has(m)){const y=fT(n.get(m),r.get(m));y!==null&&f.set(m,y),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return sR(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):nT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):F.resolve(ii());let l=ha,c=s;return o.next(u=>F.forEach(u,(d,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),s.get(d)?F.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{c=c.insert(d,m)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,ie())).next(d=>({batchId:l,changes:oT(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next(r=>{let i=So();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=So();return this.indexManager.getCollectionParents(e,s).next(l=>F.forEach(l,c=>{const u=function(f,m){return new js(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,st.newInvalidDocument(d)))});let l=So();return o.forEach((c,u)=>{const d=s.get(c);d!==void 0&&Uo(d.mutation,u,bt.empty(),me.now()),gu(n,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return F.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:yn(i.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(i){return{name:i.name,query:GR(i.bundledQuery),readTime:yn(i.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(){this.overlays=new be(K.comparator),this.Lr=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ii();return F.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.bt(e,n,s)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Lr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Lr.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const i=ii(),s=n.length+1,o=new K(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return F.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new be((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=s.get(u.largestBatchId);d===null&&(d=ii(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=ii(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=i)););return F.resolve(l)}bt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new IR(n,r));let s=this.Lr.get(n);s===void 0&&(s=ie(),this.Lr.set(n,s)),this.Lr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(){this.sessionToken=Xe.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(){this.kr=new ze(He.Kr),this.qr=new ze(He.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new He(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new He(e,n))}Qr(e,n){e.forEach(r=>this.removeReference(r,n))}Gr(e){const n=new K(new ue([])),r=new He(n,e),i=new He(n,e+1),s=[];return this.qr.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new K(new ue([])),r=new He(n,e),i=new He(n,e+1);let s=ie();return this.qr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new He(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class He{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return K.comparator(e.key,n.key)||re(e.Hr,n.Hr)}static Ur(e,n){return re(e.Hr,n.Hr)||K.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new ze(He.Kr)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new SR(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.Jr=this.Jr.add(new He(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),s=i<0?0:i;return F.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?Pp:this.Yn-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new He(n,0),i=new He(n,Number.POSITIVE_INFINITY),s=[];return this.Jr.forEachInRange([r,i],o=>{const l=this.Zr(o.Hr);s.push(l)}),F.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ze(re);return n.forEach(i=>{const s=new He(i,0),o=new He(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([s,o],l=>{r=r.add(l.Hr)})}),F.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;K.isDocumentKey(s)||(s=s.child(""));const o=new He(new K(s),0);let l=new ze(re);return this.Jr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(l=l.add(c.Hr)),!0)},o),F.resolve(this.Yr(l))}Yr(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ae(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return F.forEach(n.mutations,i=>{const s=new He(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,n){const r=new He(n,0),i=this.Jr.firstAfterOrEqual(r);return F.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e){this.ti=e,this.docs=function(){return new be(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():st.newInvalidDocument(n))}getEntries(e,n){let r=$n();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():st.newInvalidDocument(i))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=$n();const o=n.path,l=new K(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||MP(VP(d),r)<=0||(i.has(d.key)||gu(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return F.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Q(9500)}ni(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new ux(this)}getSize(e){return F.resolve(this.size)}}class ux extends nx{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e){this.persistence=e,this.ri=new Ii(n=>Np(n),Dp),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.ii=0,this.si=new jp,this.targetCount=0,this.oi=Ss._r()}forEachTarget(e,n){return this.ri.forEach((r,i)=>n(i)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),F.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Ss(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.lr(n),F.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.ri.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.ri.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),F.waitFor(s).next(()=>i)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),F.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e,n){this._i={},this.overlays={},this.ai=new hu(0),this.ui=!1,this.ui=!0,this.ci=new ax,this.referenceDelegate=e(this),this.li=new hx(this),this.indexManager=new QR,this.remoteDocumentCache=function(i){return new cx(i)}(r=>this.referenceDelegate.hi(r)),this.serializer=new KR(n),this.Pi=new sx(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new ox,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new lx(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const i=new dx(this.ai.next());return this.referenceDelegate.Ti(),r(i).next(s=>this.referenceDelegate.Ii(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,n){return F.or(Object.values(this._i).map(r=>()=>r.containsKey(e,n)))}}class dx extends FP{constructor(e){super(),this.currentSequenceNumber=e}}class Up{constructor(e){this.persistence=e,this.Ri=new jp,this.Ai=null}static Vi(e){return new Up(e)}get di(){if(this.Ai)return this.Ai;throw Q(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),F.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(i=>this.di.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.di.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.di,r=>{const i=K.fromPath(r);return this.mi(e,i).next(s=>{s||n.removeEntry(i,Y.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return F.or([()=>F.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Pc{constructor(e,n){this.persistence=e,this.fi=new Ii(r=>BP(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=tx(this,n)}static Vi(e,n){return new Pc(e,n)}Ti(){}Ii(e){return F.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}pr(e){let n=0;return this.mr(e,r=>{n++}).next(()=>n)}mr(e,n){return F.forEach(this.fi,(r,i)=>this.wr(e,r,i).next(s=>s?F.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ni(e,o=>this.wr(e,o,n).next(l=>{l||(r++,s.removeEntry(o,Y.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),F.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),F.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),F.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Vl(e.data.value)),n}wr(e,n,r){return F.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.fi.get(n);return F.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=i}static Es(e,n){let r=ie(),i=ie();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Bp(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return iC()?8:jP(at())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.gs(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ps(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new fx;return this.ys(e,n,o).next(l=>{if(s.result=l,this.As)return this.ws(e,n,o,l.size)})}).next(()=>s.result)}ws(e,n,r,i){return r.documentReadCount<this.Vs?(Di()<=ne.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",Oi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),F.resolve()):(Di()<=ne.DEBUG&&H("QueryEngine","Query:",Oi(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(Di()<=ne.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",Oi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_n(n))):F.resolve())}gs(e,n){if(vy(n))return F.resolve(null);let r=_n(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=sf(n,null,"F"),r=_n(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ie(...s);return this.fs.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.bs(n,l);return this.Ss(n,u,o,c.readTime)?this.gs(e,sf(n,null,"F")):this.Ds(e,u,n,c)}))})))}ps(e,n,r,i){return vy(n)||i.isEqual(Y.min())?F.resolve(null):this.fs.getDocuments(e,r).next(s=>{const o=this.bs(n,s);return this.Ss(n,o,r,i)?F.resolve(null):(Di()<=ne.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Oi(n)),this.Ds(e,o,n,OP(i,ha)).next(l=>l))})}bs(e,n){let r=new ze(iT(e));return n.forEach((i,s)=>{gu(e,s)&&(r=r.add(s))}),r}Ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ys(e,n,r){return Di()<=ne.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",Oi(n)),this.fs.getDocumentsMatchingQuery(e,n,xr.min(),r)}Ds(e,n,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zp="LocalStore",mx=3e8;class gx{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.vs=new be(re),this.Fs=new Ii(s=>Np(s),Dp),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ix(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function _x(t,e,n,r){return new gx(t,e,n,r)}async function CT(t,e){const n=J(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Os(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let c=ie();for(const u of i){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of s){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Ns:u,removedBatchIds:o,addedBatchIds:l}))})})}function yx(t,e){const n=J(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.xs.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const f=u.batch,m=f.keys();let y=F.resolve();return m.forEach(P=>{y=y.next(()=>d.getEntry(c,P)).next(C=>{const x=u.docVersions.get(P);ae(x!==null,48541),C.version.compareTo(x)<0&&(f.applyToRemoteDocument(C,u),C.isValidDocument()&&(C.setReadTime(u.commitVersion),d.addEntry(C)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=ie();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function PT(t){const e=J(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function vx(t,e){const n=J(t),r=e.snapshotVersion;let i=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;const l=[];e.targetChanges.forEach((d,f)=>{const m=i.get(f);if(!m)return;l.push(n.li.removeMatchingKeys(s,d.removedDocuments,f).next(()=>n.li.addMatchingKeys(s,d.addedDocuments,f)));let y=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(Xe.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),i=i.insert(f,y),function(C,x,I){return C.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=mx?!0:I.addedDocuments.size+I.modifiedDocuments.size+I.removedDocuments.size>0}(m,y,d)&&l.push(n.li.updateTargetData(s,y))});let c=$n(),u=ie();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),l.push(wx(s,o,e.documentUpdates).next(d=>{c=d.Bs,u=d.Ls})),!r.isEqual(Y.min())){const d=n.li.getLastRemoteSnapshotVersion(s).next(f=>n.li.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(d)}return F.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(n.vs=i,s))}function wx(t,e,n){let r=ie(),i=ie();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=$n();return n.forEach((l,c)=>{const u=s.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(l)),c.isNoDocument()&&c.version.isEqual(Y.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):H(zp,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{Bs:o,Ls:i}})}function Ex(t,e){const n=J(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Pp),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Tx(t,e){const n=J(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.li.getTargetData(r,e).next(s=>s?(i=s,F.resolve(i)):n.li.allocateTargetId(r).next(o=>(i=new pr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r})}async function uf(t,e,n){const r=J(t),i=r.vs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Fs(o))throw o;H(zp,`Failed to update sequence numbers for target ${e}: ${o}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)}function Ny(t,e,n){const r=J(t);let i=Y.min(),s=ie();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){const f=J(c),m=f.Fs.get(d);return m!==void 0?F.resolve(f.vs.get(m)):f.li.getTargetData(u,d)}(r,o,_n(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(o,l.targetId).next(c=>{s=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?i:Y.min(),n?s:ie())).next(l=>(Sx(r,lR(e),l),{documents:l,ks:s})))}function Sx(t,e,n){let r=t.Ms.get(e)||Y.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Ms.set(e,r)}class Dy{constructor(){this.activeTargetIds=pR()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ix{constructor(){this.vo=new Dy,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Dy,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oy="ConnectivityMonitor";class Vy{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){H(Oy,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){H(Oy,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gl=null;function hf(){return gl===null?gl=function(){return 268435456+Math.round(2147483648*Math.random())}():gl++,"0x"+gl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dh="RestConnection",kx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class Ax{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===Sc?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,s){const o=hf(),l=this.Qo(e,n.toUriEncodedString());H(Dh,`Sending RPC '${e}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(c,i,s);const{host:u}=new URL(l),d=Ns(u);return this.zo(e,l,c,r,d).then(f=>(H(Dh,`Received RPC '${e}' ${o}: `,f),f),f=>{throw vs(Dh,`RPC '${e}' ${o} failed with error: `,f,"url: ",l,"request:",r),f})}jo(e,n,r,i,s,o){return this.Wo(e,n,r,i,s)}Go(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ms}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Qo(e,n){const r=kx[e];let i=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nt="WebChannelConnection",fo=(t,e,n)=>{t.listen(e,r=>{try{n(r)}catch(i){setTimeout(()=>{throw i},0)}})};class ns extends Ax{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!ns.c_){const e=DE();fo(e,NE.STAT_EVENT,n=>{n.stat===Jd.PROXY?H(nt,"STAT_EVENT: detected buffering proxy"):n.stat===Jd.NOPROXY&&H(nt,"STAT_EVENT: detected no buffering proxy")}),ns.c_=!0}}zo(e,n,r,i,s){const o=hf();return new Promise((l,c)=>{const u=new RE;u.setWithCredentials(!0),u.listenOnce(xE.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ol.NO_ERROR:const f=u.getResponseJson();H(nt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),l(f);break;case Ol.TIMEOUT:H(nt,`RPC '${e}' ${o} timed out`),c(new $(L.DEADLINE_EXCEEDED,"Request time out"));break;case Ol.HTTP_ERROR:const m=u.getStatus();if(H(nt,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const P=y==null?void 0:y.error;if(P&&P.status&&P.message){const C=function(I){const v=I.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(v)>=0?v:L.UNKNOWN}(P.status);c(new $(C,P.message))}else c(new $(L.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new $(L.UNAVAILABLE,"Connection failed."));break;default:Q(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{H(nt,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(i);H(nt,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",d,r,15)})}T_(e,n,r){const i=hf(),s=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Go(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=s.join("");H(nt,`Creating RPC '${e}' stream ${i}: ${u}`,l);const d=o.createWebChannel(u,l);this.I_(d);let f=!1,m=!1;const y=new Cx({Ho:P=>{m?H(nt,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(f||(H(nt,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),H(nt,`RPC '${e}' stream ${i} sending:`,P),d.send(P))},Jo:()=>d.close()});return fo(d,To.EventType.OPEN,()=>{m||(H(nt,`RPC '${e}' stream ${i} transport opened.`),y.i_())}),fo(d,To.EventType.CLOSE,()=>{m||(m=!0,H(nt,`RPC '${e}' stream ${i} transport closed`),y.o_(),this.E_(d))}),fo(d,To.EventType.ERROR,P=>{m||(m=!0,vs(nt,`RPC '${e}' stream ${i} transport errored. Name:`,P.name,"Message:",P.message),y.o_(new $(L.UNAVAILABLE,"The operation could not be completed")))}),fo(d,To.EventType.MESSAGE,P=>{var C;if(!m){const x=P.data[0];ae(!!x,16349);const I=x,v=(I==null?void 0:I.error)||((C=I[0])==null?void 0:C.error);if(v){H(nt,`RPC '${e}' stream ${i} received error:`,v);const A=v.status;let V=function(w){const _=Oe[w];if(_!==void 0)return mT(_)}(A),j=v.message;V===void 0&&(V=L.INTERNAL,j="Unknown error status: "+A+" with message "+v.message),m=!0,y.o_(new $(V,j)),d.close()}else H(nt,`RPC '${e}' stream ${i} received:`,x),y.__(x)}}),ns.u_(),setTimeout(()=>{y.s_()},0),y}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return OE()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(t){return new ns(t)}function Oh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wu(t){return new DR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ns.c_=!1;class RT{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=i,this.V_=s,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&H("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My="PersistentStream";class xT{constructor(e,n,r,i,s,o,l,c){this.Ci=e,this.b_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new RT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(zn(n.toString()),zn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new $(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.H_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return H(My,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(H(My,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Rx extends xT{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=MR(this.serializer,e),r=function(s){if(!("targetChange"in s))return Y.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Y.min():o.readTime?yn(o.readTime):Y.min()}(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=cf(this.serializer),n.addTarget=function(s,o){let l;const c=o.target;if(l=nf(c)?{documents:jR(s,c)}:{query:UR(s,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=yT(s,o.resumeToken);const u=of(s,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(Y.min())>0){l.readTime=Cc(s,o.snapshotVersion.toTimestamp());const u=of(s,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const r=zR(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=cf(this.serializer),n.removeTarget=e,this.K_(n)}}class xx extends xT{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return ae(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ae(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ae(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=FR(e.writeResults,e.commitTime),r=yn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=cf(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>LR(this.serializer,r))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{}class Dx extends Nx{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new $(L.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,af(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new $(L.UNKNOWN,s.toString())})}jo(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.jo(e,af(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(L.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function Ox(t,e,n,r){return new Dx(t,e,n,r)}class Vx{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(zn(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi="RemoteStore";class Mx{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=s,this.Aa.Mo(o=>{r.enqueueAndForget(async()=>{bi(this)&&(H(gi,"Restarting streams for network reachability change."),await async function(c){const u=J(c);u.Ea.add(4),await Ra(u),u.Va.set("Unknown"),u.Ea.delete(4),await Eu(u)}(this))})}),this.Va=new Vx(r,i)}}async function Eu(t){if(bi(t))for(const e of t.Ra)await e(!0)}async function Ra(t){for(const e of t.Ra)await e(!1)}function NT(t,e){const n=J(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Wp(n)?qp(n):Us(n).O_()&&Hp(n,e))}function $p(t,e){const n=J(t),r=Us(n);n.Ia.delete(e),r.O_()&&DT(n,e),n.Ia.size===0&&(r.O_()?r.L_():bi(n)&&n.Va.set("Unknown"))}function Hp(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Y.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Us(t).Z_(e)}function DT(t,e){t.da.$e(e),Us(t).X_(e)}function qp(t){t.da=new PR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Us(t).start(),t.Va.ua()}function Wp(t){return bi(t)&&!Us(t).x_()&&t.Ia.size>0}function bi(t){return J(t).Ea.size===0}function OT(t){t.da=void 0}async function Lx(t){t.Va.set("Online")}async function Fx(t){t.Ia.forEach((e,n)=>{Hp(t,e)})}async function jx(t,e){OT(t),Wp(t)?(t.Va.ha(e),qp(t)):t.Va.set("Unknown")}async function Ux(t,e,n){if(t.Va.set("Online"),e instanceof _T&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.Ia.delete(l),i.da.removeTarget(l))}(t,e)}catch(r){H(gi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Rc(t,r)}else if(e instanceof Fl?t.da.Xe(e):e instanceof gT?t.da.st(e):t.da.tt(e),!n.isEqual(Y.min()))try{const r=await PT(t.localStore);n.compareTo(r)>=0&&await function(s,o){const l=s.da.Tt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=s.Ia.get(u);d&&s.Ia.set(u,d.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const d=s.Ia.get(c);if(!d)return;s.Ia.set(c,d.withResumeToken(Xe.EMPTY_BYTE_STRING,d.snapshotVersion)),DT(s,c);const f=new pr(d.target,c,u,d.sequenceNumber);Hp(s,f)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){H(gi,"Failed to raise snapshot:",r),await Rc(t,r)}}async function Rc(t,e,n){if(!Fs(e))throw e;t.Ea.add(1),await Ra(t),t.Va.set("Offline"),n||(n=()=>PT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H(gi,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Eu(t)})}function VT(t,e){return e().catch(n=>Rc(t,n,e))}async function Tu(t){const e=J(t),n=Vr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Pp;for(;Bx(e);)try{const i=await Ex(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,zx(e,i)}catch(i){await Rc(e,i)}MT(e)&&LT(e)}function Bx(t){return bi(t)&&t.Ta.length<10}function zx(t,e){t.Ta.push(e);const n=Vr(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function MT(t){return bi(t)&&!Vr(t).x_()&&t.Ta.length>0}function LT(t){Vr(t).start()}async function $x(t){Vr(t).ra()}async function Hx(t){const e=Vr(t);for(const n of t.Ta)e.ea(n.mutations)}async function qx(t,e,n){const r=t.Ta.shift(),i=Mp.from(r,e,n);await VT(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Tu(t)}async function Wx(t,e){e&&Vr(t).Y_&&await async function(r,i){if(function(o){return kR(o)&&o!==L.ABORTED}(i.code)){const s=r.Ta.shift();Vr(r).B_(),await VT(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Tu(r)}}(t,e),MT(t)&&LT(t)}async function Ly(t,e){const n=J(t);n.asyncQueue.verifyOperationInProgress(),H(gi,"RemoteStore received new credentials");const r=bi(n);n.Ea.add(3),await Ra(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Eu(n)}async function Kx(t,e){const n=J(t);e?(n.Ea.delete(2),await Eu(n)):e||(n.Ea.add(2),await Ra(n),n.Va.set("Unknown"))}function Us(t){return t.ma||(t.ma=function(n,r,i){const s=J(n);return s.sa(),new Rx(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:Lx.bind(null,t),Yo:Fx.bind(null,t),t_:jx.bind(null,t),J_:Ux.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),Wp(t)?qp(t):t.Va.set("Unknown")):(await t.ma.stop(),OT(t))})),t.ma}function Vr(t){return t.fa||(t.fa=function(n,r,i){const s=J(n);return s.sa(),new xx(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:$x.bind(null,t),t_:Wx.bind(null,t),ta:Hx.bind(null,t),na:qx.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await Tu(t)):(await t.fa.stop(),t.Ta.length>0&&(H(gi,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new kr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new Kp(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gp(t,e){if(zn("AsyncQueue",`${e}: ${t}`),Fs(t))return new $(L.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{static emptySet(e){return new rs(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||K.comparator(n.key,r.key):(n,r)=>K.comparator(n.key,r.key),this.keyedMap=So(),this.sortedSet=new be(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof rs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new rs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(){this.ga=new be(K.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Q(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Is{constructor(e,n,r,i,s,o,l,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Is(e,n,rs.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class Qx{constructor(){this.queries=jy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=J(n),s=i.queries;i.queries=jy(),s.forEach((o,l)=>{for(const c of l.ba)c.onError(r)})})(this,new $(L.ABORTED,"Firestore shutting down"))}}function jy(){return new Ii(t=>rT(t),mu)}async function FT(t,e){const n=J(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.Sa()&&e.Da()&&(r=2):(s=new Gx,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=Gp(o,`Initialization of query '${Oi(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.ba.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&Qp(n)}async function jT(t,e){const n=J(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.ba.indexOf(e);o>=0&&(s.ba.splice(o,1),s.ba.length===0?i=e.Da()?0:1:!s.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Yx(t,e){const n=J(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.ba)l.Fa(i)&&(r=!0);o.wa=i}}r&&Qp(n)}function Jx(t,e,n){const r=J(t),i=r.queries.get(e);if(i)for(const s of i.ba)s.onError(n);r.queries.delete(e)}function Qp(t){t.Ca.forEach(e=>{e.next()})}var df,Uy;(Uy=df||(df={})).Ma="default",Uy.Cache="cache";class UT{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Is(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Is.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==df.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e){this.key=e}}class zT{constructor(e){this.key=e}}class Xx{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ie(),this.mutatedKeys=ie(),this.eu=iT(e),this.tu=new rs(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new Fy,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{const m=i.get(d),y=gu(this.query,f)?f:null,P=!!m&&this.mutatedKeys.has(m.key),C=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let x=!1;m&&y?m.data.isEqual(y.data)?P!==C&&(r.track({type:3,doc:y}),x=!0):this.su(m,y)||(r.track({type:2,doc:y}),x=!0,(c&&this.eu(y,c)>0||u&&this.eu(y,u)<0)&&(l=!0)):!m&&y?(r.track({type:0,doc:y}),x=!0):m&&!y&&(r.track({type:1,doc:m}),x=!0,(c||u)&&(l=!0)),x&&(y?(o=o.add(y),s=C?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Ss:l,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,f)=>function(y,P){const C=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q(20277,{Vt:x})}};return C(y)-C(P)}(d.type,f.type)||this.eu(d.doc,f.doc)),this.ou(r),i=i??!1;const l=n&&!i?this._u():[],c=this.Ya.size===0&&this.current&&!i?1:0,u=c!==this.Xa;return this.Xa=c,o.length!==0||u?{snapshot:new Is(this.query,e.tu,s,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Fy,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ie(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new zT(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new BT(r))}),n}cu(e){this.Za=e.ks,this.Ya=ie();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Is.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Yp="SyncEngine";class Zx{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class eN{constructor(e){this.key=e,this.hu=!1}}class tN{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Ii(l=>rT(l),mu),this.Iu=new Map,this.Eu=new Set,this.Ru=new be(K.comparator),this.Au=new Map,this.Vu=new jp,this.du={},this.mu=new Map,this.fu=Ss.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function nN(t,e,n=!0){const r=GT(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await $T(r,e,n,!0),i}async function rN(t,e){const n=GT(t);await $T(n,e,!0,!1)}async function $T(t,e,n,r){const i=await Tx(t.localStore,_n(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await iN(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&NT(t.remoteStore,i),l}async function iN(t,e,n,r,i){t.pu=(f,m,y)=>async function(C,x,I,v){let A=x.view.ru(I);A.Ss&&(A=await Ny(C.localStore,x.query,!1).then(({documents:w})=>x.view.ru(w,A)));const V=v&&v.targetChanges.get(x.targetId),j=v&&v.targetMismatches.get(x.targetId)!=null,M=x.view.applyChanges(A,C.isPrimaryClient,V,j);return zy(C,x.targetId,M.au),M.snapshot}(t,f,m,y);const s=await Ny(t.localStore,e,!0),o=new Xx(e,s.ks),l=o.ru(s.documents),c=Pa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(l,t.isPrimaryClient,c);zy(t,n,u.au);const d=new Zx(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function sN(t,e,n){const r=J(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!mu(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await uf(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&$p(r.remoteStore,i.targetId),ff(r,i.targetId)}).catch(Ls)):(ff(r,i.targetId),await uf(r.localStore,i.targetId,!0))}async function oN(t,e){const n=J(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),$p(n.remoteStore,r.targetId))}async function aN(t,e,n){const r=pN(t);try{const i=await function(o,l){const c=J(o),u=me.now(),d=l.reduce((y,P)=>y.add(P.key),ie());let f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let P=$n(),C=ie();return c.xs.getEntries(y,d).next(x=>{P=x,P.forEach((I,v)=>{v.isValidDocument()||(C=C.add(I))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,P)).next(x=>{f=x;const I=[];for(const v of l){const A=ER(v,f.get(v.key).overlayedDocument);A!=null&&I.push(new zr(v.key,A,QE(A.value.mapValue),Zt.exists(!0)))}return c.mutationQueue.addMutationBatch(y,u,I,l)}).next(x=>{m=x;const I=x.applyToLocalDocumentSet(f,C);return c.documentOverlayCache.saveOverlays(y,x.batchId,I)})}).then(()=>({batchId:m.batchId,changes:oT(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,c){let u=o.du[o.currentUser.toKey()];u||(u=new be(re)),u=u.insert(l,c),o.du[o.currentUser.toKey()]=u}(r,i.batchId,n),await xa(r,i.changes),await Tu(r.remoteStore)}catch(i){const s=Gp(i,"Failed to persist write");n.reject(s)}}async function HT(t,e){const n=J(t);try{const r=await vx(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(ae(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?ae(o.hu,14607):i.removedDocuments.size>0&&(ae(o.hu,42227),o.hu=!1))}),await xa(n,r,e)}catch(r){await Ls(r)}}function By(t,e,n){const r=J(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const l=o.view.va(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const c=J(o);c.onlineState=l;let u=!1;c.queries.forEach((d,f)=>{for(const m of f.ba)m.va(l)&&(u=!0)}),u&&Qp(c)}(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function lN(t,e,n){const r=J(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new be(K.comparator);o=o.insert(s,st.newNoDocument(s,Y.min()));const l=ie().add(s),c=new vu(Y.min(),new Map,new be(re),o,l);await HT(r,c),r.Ru=r.Ru.remove(s),r.Au.delete(e),Jp(r)}else await uf(r.localStore,e,!1).then(()=>ff(r,e,n)).catch(Ls)}async function cN(t,e){const n=J(t),r=e.batch.batchId;try{const i=await yx(n.localStore,e);WT(n,r,null),qT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await xa(n,i)}catch(i){await Ls(i)}}async function uN(t,e,n){const r=J(t);try{const i=await function(o,l){const c=J(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(ae(f!==null,37113),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);WT(r,e,n),qT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await xa(r,i)}catch(i){await Ls(i)}}function qT(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function WT(t,e,n){const r=J(t);let i=r.du[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function ff(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(r=>{t.Vu.containsKey(r)||KT(t,r)})}function KT(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&($p(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),Jp(t))}function zy(t,e,n){for(const r of n)r instanceof BT?(t.Vu.addReference(r.key,e),hN(t,r)):r instanceof zT?(H(Yp,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||KT(t,r.key)):Q(19791,{wu:r})}function hN(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(H(Yp,"New document in limbo: "+n),t.Eu.add(r),Jp(t))}function Jp(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new K(ue.fromString(e)),r=t.fu.next();t.Au.set(r,new eN(n)),t.Ru=t.Ru.insert(n,r),NT(t.remoteStore,new pr(_n(pu(n.path)),r,"TargetPurposeLimboResolution",hu.ce))}}async function xa(t,e,n){const r=J(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{o.push(r.pu(c,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){i.push(u);const f=Bp.Es(c.targetId,u);s.push(f)}}))}),await Promise.all(o),r.Pu.J_(i),await async function(c,u){const d=J(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>F.forEach(u,m=>F.forEach(m.Ts,y=>d.persistence.referenceDelegate.addReference(f,m.targetId,y)).next(()=>F.forEach(m.Is,y=>d.persistence.referenceDelegate.removeReference(f,m.targetId,y)))))}catch(f){if(!Fs(f))throw f;H(zp,"Failed to update sequence numbers: "+f)}for(const f of u){const m=f.targetId;if(!f.fromCache){const y=d.vs.get(m),P=y.snapshotVersion,C=y.withLastLimboFreeSnapshotVersion(P);d.vs=d.vs.insert(m,C)}}}(r.localStore,s))}async function dN(t,e){const n=J(t);if(!n.currentUser.isEqual(e)){H(Yp,"User change. New user:",e.toKey());const r=await CT(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(l=>{l.forEach(c=>{c.reject(new $(L.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await xa(n,r.Ns)}}function fN(t,e){const n=J(t),r=n.Au.get(e);if(r&&r.hu)return ie().add(r.key);{let i=ie();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const l=n.Tu.get(o);i=i.unionWith(l.view.nu)}return i}}function GT(t){const e=J(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=HT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lN.bind(null,e),e.Pu.J_=Yx.bind(null,e.eventManager),e.Pu.yu=Jx.bind(null,e.eventManager),e}function pN(t){const e=J(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uN.bind(null,e),e}class xc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=wu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return _x(this.persistence,new px,e.initialUser,this.serializer)}Cu(e){return new AT(Up.Vi,this.serializer)}Du(e){return new Ix}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}xc.provider={build:()=>new xc};class mN extends xc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ae(this.persistence.referenceDelegate instanceof Pc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new ZR(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?mt.withCacheSize(this.cacheSizeBytes):mt.DEFAULT;return new AT(r=>Pc.Vi(r,n),this.serializer)}}class pf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>By(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=dN.bind(null,this.syncEngine),await Kx(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Qx}()}createDatastore(e){const n=wu(e.databaseInfo.databaseId),r=Px(e.databaseInfo);return Ox(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new Mx(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>By(this.syncEngine,n,0),function(){return Vy.v()?new Vy:new bx}())}createSyncEngine(e,n){return function(i,s,o,l,c,u,d){const f=new tN(i,s,o,l,c,u);return d&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=J(i);H(gi,"RemoteStore shutting down."),s.Ea.add(5),await Ra(s),s.Aa.shutdown(),s.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}pf.provider={build:()=>new pf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):zn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr="FirestoreClient";class gN{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=i,this.user=rt.UNAUTHENTICATED,this.clientId=Cp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{H(Mr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(H(Mr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new kr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Gp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Vh(t,e){t.asyncQueue.verifyOperationInProgress(),H(Mr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await CT(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function $y(t,e){t.asyncQueue.verifyOperationInProgress();const n=await _N(t);H(Mr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Ly(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Ly(e.remoteStore,i)),t._onlineComponents=e}async function _N(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H(Mr,"Using user provided OfflineComponentProvider");try{await Vh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===L.FAILED_PRECONDITION||i.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;vs("Error using user provided cache. Falling back to memory cache: "+n),await Vh(t,new xc)}}else H(Mr,"Using default OfflineComponentProvider"),await Vh(t,new mN(void 0));return t._offlineComponents}async function YT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H(Mr,"Using user provided OnlineComponentProvider"),await $y(t,t._uninitializedComponentsProvider._online)):(H(Mr,"Using default OnlineComponentProvider"),await $y(t,new pf))),t._onlineComponents}function yN(t){return YT(t).then(e=>e.syncEngine)}async function mf(t){const e=await YT(t),n=e.eventManager;return n.onListen=nN.bind(null,e.syncEngine),n.onUnlisten=sN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=rN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=oN.bind(null,e.syncEngine),n}function vN(t,e,n,r){const i=new QT(r),s=new UT(e,i,n);return t.asyncQueue.enqueueAndForget(async()=>FT(await mf(t),s)),()=>{i.Nu(),t.asyncQueue.enqueueAndForget(async()=>jT(await mf(t),s))}}function wN(t,e,n={}){const r=new kr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,c,u){const d=new QT({next:m=>{d.Nu(),o.enqueueAndForget(()=>jT(s,f));const y=m.docs.has(l);!y&&m.fromCache?u.reject(new $(L.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&c&&c.source==="server"?u.reject(new $(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new UT(pu(l.path),d,{includeMetadataChanges:!0,Ka:!0});return FT(s,f)}(await mf(t),t.asyncQueue,e,n,r)),r.promise}function EN(t,e){const n=new kr;return t.asyncQueue.enqueueAndForget(async()=>aN(await yN(t),e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN="ComponentProvider",Hy=new Map;function SN(t,e,n,r,i){return new HP(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,JT(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT="firestore.googleapis.com",qy=!0;class Wy{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new $(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=XT,this.ssl=qy}else this.host=e.host,this.ssl=e.ssl??qy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=kT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<JR)throw new $(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}DP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=JT(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new $(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new $(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new $(L.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Su{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Wy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Wy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new SP;switch(r.type){case"firstParty":return new AP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Hy.get(n);r&&(H(TN,"Removing Datastore"),Hy.delete(n),r.terminate())}(this),Promise.resolve()}}function IN(t,e,n,r={}){var u;t=gn(t,Su);const i=Ns(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;i&&(wE(`https://${l}`),EE("Firestore",!0)),s.host!==XT&&s.host!==l&&vs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...s,host:l,ssl:i,emulatorOptions:r};if(!pi(c,o)&&(t._setSettings(c),r.mockUserToken)){let d,f;if(typeof r.mockUserToken=="string")d=r.mockUserToken,f=rt.MOCK_USER;else{d=QA(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new $(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new rt(m)}t._authCredentials=new IP(new ME(d,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ki(this.firestore,e,this._query)}}class Ne{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ar(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ne(this.firestore,e,this._key)}toJSON(){return{type:Ne._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Aa(n,Ne._jsonSchema))return new Ne(e,r||null,new K(ue.fromString(n.referencePath)))}}Ne._jsonSchemaVersion="firestore/documentReference/1.0",Ne._jsonSchema={type:Fe("string",Ne._jsonSchemaVersion),referencePath:Fe("string")};class Ar extends ki{constructor(e,n,r){super(e,n,pu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ne(this.firestore,null,new K(e))}withConverter(e){return new Ar(this.firestore,e,this._path)}}function _l(t,e,...n){if(t=De(t),LE("collection","path",e),t instanceof Su){const r=ue.fromString(e,...n);return sy(r),new Ar(t,null,r)}{if(!(t instanceof Ne||t instanceof Ar))throw new $(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ue.fromString(e,...n));return sy(r),new Ar(t.firestore,null,r)}}function Nc(t,e,...n){if(t=De(t),arguments.length===1&&(e=Cp.newId()),LE("doc","path",e),t instanceof Su){const r=ue.fromString(e,...n);return iy(r),new Ne(t,null,new K(r))}{if(!(t instanceof Ne||t instanceof Ar))throw new $(L.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ue.fromString(e,...n));return iy(r),new Ne(t.firestore,t instanceof Ar?t.converter:null,new K(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky="AsyncQueue";class Gy{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new RT(this,"async_queue_retry"),this._c=()=>{const r=Oh();r&&H(Ky,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Oh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Oh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new kr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Fs(e))throw e;H(Ky,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,zn("INTERNAL UNHANDLED ERROR: ",Qy(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=Kp.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&Q(47125,{Pc:Qy(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Qy(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class _i extends Su{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Gy,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Gy(e),this._firestoreClient=void 0,await e}}}function bN(t,e){const n=typeof t=="object"?t:kp(),r=typeof t=="string"?t:e||Sc,i=Os(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=KA("firestore");s&&IN(i,...s)}return i}function Xp(t){if(t._terminated)throw new $(L.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||kN(t),t._firestoreClient}function kN(t){var r,i,s,o;const e=t._freezeSettings(),n=SN(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,(i=t._app)==null?void 0:i.options.apiKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new gN(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vt(Xe.fromBase64String(e))}catch(n){throw new $(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Vt(Xe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Vt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Aa(e,Vt._jsonSchema))return Vt.fromBase64String(e.bytes)}}Vt._jsonSchemaVersion="firestore/bytes/1.0",Vt._jsonSchema={type:Fe("string",Vt._jsonSchemaVersion),bytes:Fe("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:vn._jsonSchemaVersion}}static fromJSON(e){if(Aa(e,vn._jsonSchema))return new vn(e.latitude,e.longitude)}}vn._jsonSchemaVersion="firestore/geoPoint/1.0",vn._jsonSchema={type:Fe("string",vn._jsonSchemaVersion),latitude:Fe("number"),longitude:Fe("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:en._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Aa(e,en._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new en(e.vectorValues);throw new $(L.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}en._jsonSchemaVersion="firestore/vectorValue/1.0",en._jsonSchema={type:Fe("string",en._jsonSchemaVersion),vectorValues:Fe("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN=/^__.*__$/;class CN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new zr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ca(e,this.data,n,this.fieldTransforms)}}class ZT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new zr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function e1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q(40011,{dataSource:t})}}class tm{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.validatePath(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new tm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Dc(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(e1(this.dataSource)&&AN.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class PN{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||wu(e)}createContext(e,n,r,i=!1){return new tm({dataSource:e,methodName:n,targetDoc:r,path:Qe.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nm(t){const e=t._freezeSettings(),n=wu(t._databaseId);return new PN(t._databaseId,!!e.ignoreUndefinedProperties,n)}function RN(t,e,n,r,i,s={}){const o=t.createContext(s.merge||s.mergeFields?2:0,e,n,i);rm("Data must be an object, but it was:",o,r);const l=t1(r,o);let c,u;if(s.merge)c=new bt(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const m=bs(e,f,n);if(!o.contains(m))throw new $(L.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);i1(d,m)||d.push(m)}c=new bt(d),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new CN(new _t(l),c,u)}class Iu extends em{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Iu}}function xN(t,e,n,r){const i=t.createContext(1,e,n);rm("Data must be an object, but it was:",i,r);const s=[],o=_t.empty();Br(r,(c,u)=>{const d=r1(e,c,n);u=De(u);const f=i.childContextForFieldPath(d);if(u instanceof Iu)s.push(d);else{const m=Na(u,f);m!=null&&(s.push(d),o.set(d,m))}});const l=new bt(s);return new ZT(o,l,i.fieldTransforms)}function NN(t,e,n,r,i,s){const o=t.createContext(1,e,n),l=[bs(e,r,n)],c=[i];if(s.length%2!=0)throw new $(L.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)l.push(bs(e,s[m])),c.push(s[m+1]);const u=[],d=_t.empty();for(let m=l.length-1;m>=0;--m)if(!i1(u,l[m])){const y=l[m];let P=c[m];P=De(P);const C=o.childContextForFieldPath(y);if(P instanceof Iu)u.push(y);else{const x=Na(P,C);x!=null&&(u.push(y),d.set(y,x))}}const f=new bt(u);return new ZT(d,f,o.fieldTransforms)}function DN(t,e,n,r=!1){return Na(n,t.createContext(r?4:3,e))}function Na(t,e){if(n1(t=De(t)))return rm("Unsupported field value:",e,t),t1(t,e);if(t instanceof em)return function(r,i){if(!e1(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let c=Na(l,i.childContextForArray(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=De(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return mR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=me.fromDate(r);return{timestampValue:Cc(i.serializer,s)}}if(r instanceof me){const s=new me(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Cc(i.serializer,s)}}if(r instanceof vn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Vt)return{bytesValue:yT(i.serializer,r._byteString)};if(r instanceof Ne){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Fp(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof en)return function(o,l){const c=o instanceof en?o.toArray():o;return{mapValue:{fields:{[WE]:{stringValue:GE},[Ic]:{arrayValue:{values:c.map(d=>{if(typeof d!="number")throw l.createError("VectorValues must only contain numeric values.");return Op(l.serializer,d)})}}}}}}(r,i);if(bT(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${uu(r)}`)}(t,e)}function t1(t,e){const n={};return UE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Br(t,(r,i)=>{const s=Na(i,e.childContextForField(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function n1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof me||t instanceof vn||t instanceof Vt||t instanceof Ne||t instanceof em||t instanceof en||bT(t))}function rm(t,e,n){if(!n1(n)||!FE(n)){const r=uu(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function bs(t,e,n){if((e=De(e))instanceof Zp)return e._internalPath;if(typeof e=="string")return r1(t,e);throw Dc("Field path arguments must be of type string or ",t,!1,void 0,n)}const ON=new RegExp("[~\\*/\\[\\]]");function r1(t,e,n){if(e.search(ON)>=0)throw Dc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Zp(...e.split("."))._internalPath}catch{throw Dc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Dc(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new $(L.INVALID_ARGUMENT,l+t+c)}function i1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{convertValue(e,n="none"){switch(Or(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Re(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Dr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Q(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Br(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[Ic].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>Re(o.doubleValue));return new en(n)}convertGeoPoint(e){return new vn(Re(e.latitude),Re(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=fu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(da(e));default:return null}}convertTimestamp(e){const n=Nr(e);return new me(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ue.fromString(e);ae(IT(r),9688,{name:e});const i=new fa(r.get(1),r.get(3)),s=new K(r.popFirst(5));return i.isEqual(n)||zn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1 extends VN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ne(this.firestore,null,n)}}const Yy="@firebase/firestore",Jy="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xy(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ne(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new MN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(bs("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class MN extends o1{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new $(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class im{}class a1 extends im{}function Zy(t,e,...n){let r=[];e instanceof im&&r.push(e),r=r.concat(n),function(s){const o=s.filter(c=>c instanceof om).length,l=s.filter(c=>c instanceof sm).length;if(o>1||o>0&&l>0)throw new $(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class sm extends a1{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new sm(e,n,r)}_apply(e){const n=this._parse(e);return l1(e._query,n),new ki(e.firestore,e.converter,rf(e._query,n))}_parse(e){const n=nm(e.firestore);return function(s,o,l,c,u,d,f){let m;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new $(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){nv(f,d);const P=[];for(const C of f)P.push(tv(c,s,C));m={arrayValue:{values:P}}}else m=tv(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||nv(f,d),m=DN(l,o,f,d==="in"||d==="not-in");return Le.create(u,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class om extends im{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new om(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:rn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const l=s.getFlattenedFilters();for(const c of l)l1(o,c),o=rf(o,c)}(e._query,n),new ki(e.firestore,e.converter,rf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class am extends a1{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new am(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new $(L.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new $(L.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ma(s,o)}(e._query,this._field,this._direction);return new ki(e.firestore,e.converter,aR(e._query,n))}}function ev(t,e="asc"){const n=e,r=bs("orderBy",t);return am._create(r,n)}function tv(t,e,n){if(typeof(n=De(n))=="string"){if(n==="")throw new $(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nT(e)&&n.indexOf("/")!==-1)throw new $(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ue.fromString(n));if(!K.isDocumentKey(r))throw new $(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return fy(t,new K(r))}if(n instanceof Ne)return fy(t,n._key);throw new $(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${uu(n)}.`)}function nv(t,e){if(!Array.isArray(t)||t.length===0)throw new $(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function l1(t,e){const n=function(i,s){for(const o of i)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new $(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function FN(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class bo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class li extends o1{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new jl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(bs("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new $(L.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=li._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}li._jsonSchemaVersion="firestore/documentSnapshot/1.0",li._jsonSchema={type:Fe("string",li._jsonSchemaVersion),bundleSource:Fe("string","DocumentSnapshot"),bundleName:Fe("string"),bundle:Fe("string")};class jl extends li{data(e={}){return super.data(e)}}class is{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new bo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new jl(this._firestore,this._userDataWriter,r.key,r,new bo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const c=new jl(i._firestore,i._userDataWriter,l.doc.key,l.doc,new bo(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new jl(i._firestore,i._userDataWriter,l.doc.key,l.doc,new bo(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:jN(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new $(L.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=is._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Cp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function jN(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */is._jsonSchemaVersion="firestore/querySnapshot/1.0",is._jsonSchema={type:Fe("string",is._jsonSchemaVersion),bundleSource:Fe("string","QuerySnapshot"),bundleName:Fe("string"),bundle:Fe("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UN(t){t=gn(t,Ne);const e=gn(t.firestore,_i),n=Xp(e);return wN(n,t._key).then(r=>c1(e,t,r))}function BN(t,e,n,...r){t=gn(t,Ne);const i=gn(t.firestore,_i),s=nm(i);let o;return o=typeof(e=De(e))=="string"||e instanceof Zp?NN(s,"updateDoc",t._key,e,n,r):xN(s,"updateDoc",t._key,e),lm(i,[o.toMutation(t._key,Zt.exists(!0))])}function zN(t){return lm(gn(t.firestore,_i),[new Vp(t._key,Zt.none())])}function rv(t,e){const n=gn(t.firestore,_i),r=Nc(t),i=FN(t.converter,e),s=nm(t.firestore);return lm(n,[RN(s,"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Zt.exists(!1))]).then(()=>r)}function iv(t,...e){var u,d,f;t=De(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Xy(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Xy(e[r])){const m=e[r];e[r]=(u=m.next)==null?void 0:u.bind(m),e[r+1]=(d=m.error)==null?void 0:d.bind(m),e[r+2]=(f=m.complete)==null?void 0:f.bind(m)}let s,o,l;if(t instanceof Ne)o=gn(t.firestore,_i),l=pu(t._key.path),s={next:m=>{e[r]&&e[r](c1(o,t,m))},error:e[r+1],complete:e[r+2]};else{const m=gn(t,ki);o=gn(m.firestore,_i),l=m._query;const y=new s1(o);s={next:P=>{e[r]&&e[r](new is(o,y,m,P))},error:e[r+1],complete:e[r+2]},LN(t._query)}const c=Xp(o);return vN(c,l,i,s)}function lm(t,e){const n=Xp(t);return EN(n,e)}function c1(t,e,n){const r=n.docs.get(e._key),i=new s1(t);return new li(t,i,e._key,r,new bo(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){TP(Vs),En(new nn("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new _i(new bP(r.getProvider("auth-internal")),new CP(o,r.getProvider("app-check-internal")),qP(o,i),o);return s={useFetchStreams:n,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Ft(Yy,Jy,e),Ft(Yy,Jy,"esm2020")})();function u1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $N=u1,h1=new Si("auth","Firebase",u1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oc=new Ip("@firebase/auth");function HN(t,...e){Oc.logLevel<=ne.WARN&&Oc.warn(`Auth (${Vs}): ${t}`,...e)}function Ul(t,...e){Oc.logLevel<=ne.ERROR&&Oc.error(`Auth (${Vs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(t,...e){throw cm(t,...e)}function At(t,...e){return cm(t,...e)}function d1(t,e,n){const r={...$N(),[e]:n};return new Si("auth","Firebase",r).create(e,{appName:t.name})}function Cr(t){return d1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function cm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return h1.create(t,...e)}function W(t,e,...n){if(!t)throw cm(e,...n)}function Dn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ul(e),new Error(e)}function qn(t,e){t||Dn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gf(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function f1(){return sv()==="http:"||sv()==="https:"}function sv(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(f1()||tC()||"connection"in navigator)?navigator.onLine:!0}function WN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e,n){this.shortDelay=e,this.longDelay=n,qn(n>e,"Short delay should be less than long delay!"),this.isMobile=XA()||nC()}get(){return qN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function um(t,e){qn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Dn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Dn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Dn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],QN=new Da(3e4,6e4);function bn(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function sn(t,e,n,r,i={}){return m1(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const l=Ds({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...s};return eC()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Ns(t.emulatorConfig.host)&&(u.credentials="include"),p1.fetch()(await g1(t,t.config.apiHost,n,l),u)})}async function m1(t,e,n){t._canInitEmulator=!1;const r={...KN,...e};try{const i=new JN(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw ko(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw ko(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw ko(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw ko(t,"user-disabled",o);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw d1(t,d,u);Hn(t,d)}}catch(i){if(i instanceof In)throw i;Hn(t,"network-request-failed",{message:String(i)})}}async function bu(t,e,n,r,i={}){const s=await sn(t,e,n,r,i);return"mfaPendingCredential"in s&&Hn(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function g1(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?um(t.config,i):`${t.config.apiScheme}://${i}`;return GN.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function YN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class JN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(At(this.auth,"network-request-failed")),QN.get())})}}function ko(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=At(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ov(t){return t!==void 0&&t.getResponse!==void 0}function av(t){return t!==void 0&&t.enterprise!==void 0}class _1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return YN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XN(t){return(await sn(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function y1(t,e){return sn(t,"GET","/v2/recaptchaConfig",bn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZN(t,e){return sn(t,"POST","/v1/accounts:delete",e)}async function Vc(t,e){return sn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function eD(t,e=!1){const n=De(t),r=await n.getIdToken(e),i=hm(r);W(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Bo(Mh(i.auth_time)),issuedAtTime:Bo(Mh(i.iat)),expirationTime:Bo(Mh(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Mh(t){return Number(t)*1e3}function hm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ul("JWT malformed, contained fewer than 3 sections"),null;try{const i=gE(n);return i?JSON.parse(i):(Ul("Failed to decode base64 JWT payload"),null)}catch(i){return Ul("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function lv(t){const e=hm(t);return W(e,"internal-error"),W(typeof e.exp<"u","internal-error"),W(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ya(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof In&&tD(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function tD({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bo(this.lastLoginAt),this.creationTime=Bo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mc(t){var f;const e=t.auth,n=await t.getIdToken(),r=await ya(t,Vc(e,{idToken:n}));W(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(f=i.providerUserInfo)!=null&&f.length?v1(i.providerUserInfo):[],o=iD(t.providerData,s),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new _f(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function rD(t){const e=De(t);await Mc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function iD(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function v1(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sD(t,e){const n=await m1(t,{},async()=>{const r=Ds({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await g1(t,i,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&Ns(t.emulatorConfig.host)&&(c.credentials="include"),p1.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function oD(t,e){return sn(t,"POST","/v2/accounts:revokeToken",bn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){W(e.idToken,"internal-error"),W(typeof e.idToken<"u","internal-error"),W(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):lv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){W(e.length!==0,"internal-error");const n=lv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(W(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await sD(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new ss;return r&&(W(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(W(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(W(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ss,this.toJSON())}_performRefresh(){return Dn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nr(t,e){W(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Qt{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new nD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new _f(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await ya(this,this.stsTokenManager.getToken(this.auth,e));return W(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return eD(this,e)}reload(){return rD(this)}_assign(e){this!==e&&(W(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Qt({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){W(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Mc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Kt(this.auth.app))return Promise.reject(Cr(this.auth));const e=await this.getIdToken();return await ya(this,ZN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:f,emailVerified:m,isAnonymous:y,providerData:P,stsTokenManager:C}=n;W(f&&C,e,"internal-error");const x=ss.fromJSON(this.name,C);W(typeof f=="string",e,"internal-error"),nr(r,e.name),nr(i,e.name),W(typeof m=="boolean",e,"internal-error"),W(typeof y=="boolean",e,"internal-error"),nr(s,e.name),nr(o,e.name),nr(l,e.name),nr(c,e.name),nr(u,e.name),nr(d,e.name);const I=new Qt({uid:f,auth:e,email:i,emailVerified:m,displayName:r,isAnonymous:y,photoURL:o,phoneNumber:s,tenantId:l,stsTokenManager:x,createdAt:u,lastLoginAt:d});return P&&Array.isArray(P)&&(I.providerData=P.map(v=>({...v}))),c&&(I._redirectEventId=c),I}static async _fromIdTokenResponse(e,n,r=!1){const i=new ss;i.updateFromServerResponse(n);const s=new Qt({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Mc(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];W(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?v1(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),l=new ss;l.updateFromIdToken(r);const c=new Qt({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new _f(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv=new Map;function On(t){qn(t instanceof Function,"Expected a class definition");let e=cv.get(t);return e?(qn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,cv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}w1.type="NONE";const uv=w1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bl(t,e,n){return`firebase:${t}:${e}:${n}`}class os{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Bl(this.userKey,i.apiKey,s),this.fullPersistenceKey=Bl("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Vc(this.auth,{idToken:e}).catch(()=>{});return n?Qt._fromGetAccountInfoResponse(this.auth,n,e):null}return Qt._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new os(On(uv),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||On(uv);const o=Bl(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const d=await u._get(o);if(d){let f;if(typeof d=="string"){const m=await Vc(e,{idToken:d}).catch(()=>{});if(!m)break;f=await Qt._fromGetAccountInfoResponse(e,m,d)}else f=Qt._fromJSON(e,d);u!==s&&(l=f),s=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new os(s,e,r):(s=c[0],l&&await s._set(o,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new os(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(I1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(E1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(k1(e))return"Blackberry";if(A1(e))return"Webos";if(T1(e))return"Safari";if((e.includes("chrome/")||S1(e))&&!e.includes("edge/"))return"Chrome";if(b1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function E1(t=at()){return/firefox\//i.test(t)}function T1(t=at()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function S1(t=at()){return/crios\//i.test(t)}function I1(t=at()){return/iemobile/i.test(t)}function b1(t=at()){return/android/i.test(t)}function k1(t=at()){return/blackberry/i.test(t)}function A1(t=at()){return/webos/i.test(t)}function dm(t=at()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function aD(t=at()){var e;return dm(t)&&!!((e=window.navigator)!=null&&e.standalone)}function lD(){return rC()&&document.documentMode===10}function C1(t=at()){return dm(t)||b1(t)||A1(t)||k1(t)||/windows phone/i.test(t)||I1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(t,e=[]){let n;switch(t){case"Browser":n=hv(at());break;case"Worker":n=`${hv(at())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Vs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,l)=>{try{const c=e(s);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uD(t,e={}){return sn(t,"GET","/v2/passwordPolicy",bn(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD=6;class dD{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??hD,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new dv(this),this.idTokenSubscription=new dv(this),this.beforeStateQueue=new cD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=h1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=On(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await os.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Vc(this,{idToken:e}),r=await Qt._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(Kt(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return W(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Mc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=WN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Kt(this.app))return Promise.reject(Cr(this));const n=e?De(e):null;return n&&W(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&W(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Kt(this.app)?Promise.reject(Cr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Kt(this.app)?Promise.reject(Cr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(On(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await uD(this),n=new dD(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Si("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await oD(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&On(e)||this._popupRedirectResolver;W(n,this,"argument-error"),this.redirectPersistenceManager=await os.create(this,[On(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(W(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return W(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=P1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Kt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&HN(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function $r(t){return De(t)}class dv{constructor(e){this.auth=e,this.observer=null,this.addObserver=uC(n=>this.observer=n)}get next(){return W(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oa={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pD(t){Oa=t}function fm(t){return Oa.loadJS(t)}function mD(){return Oa.recaptchaV2Script}function gD(){return Oa.recaptchaEnterpriseScript}function _D(){return Oa.gapiScript}function R1(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD=500,vD=6e4,yl=1e12;class wD{constructor(e){this.auth=e,this.counter=yl,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new SD(e,this.auth.name,n||{})),this.counter++,r}reset(e){var r;const n=e||yl;(r=this._widgets.get(n))==null||r.delete(),this._widgets.delete(n)}getResponse(e){var r;const n=e||yl;return((r=this._widgets.get(n))==null?void 0:r.getResponse())||""}async execute(e){var r;const n=e||yl;return(r=this._widgets.get(n))==null||r.execute(),""}}class ED{constructor(){this.enterprise=new TD}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class TD{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class SD{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;W(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=ID(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},vD)},yD))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function ID(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const bD="recaptcha-enterprise",zo="NO_RECAPTCHA";class x1{constructor(e){this.type=bD,this.auth=$r(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,l)=>{y1(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new _1(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function i(s,o,l){const c=window.grecaptcha;av(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(zo)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ED().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(l=>{if(!n&&av(window.grecaptcha))i(l,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=gD();c.length!==0&&(c+=l),fm(c).then(()=>{i(l,s,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function po(t,e,n,r=!1,i=!1){const s=new x1(t);let o;if(i)o=zo;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Lh(t,e,n,r,i){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await po(t,e,n,n==="getOobCode");return r(t,l)}else return r(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await po(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(l)});else if(i==="PHONE_PROVIDER")if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("PHONE_PROVIDER")){const l=await po(t,e,n);return r(t,l).catch(async c=>{var u;if(((u=t._getRecaptchaConfig())==null?void 0:u.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const d=await po(t,e,n,!1,!0);return r(t,d)}return Promise.reject(c)})}else{const l=await po(t,e,n,!1,!0);return r(t,l)}else return Promise.reject(i+" provider is not supported.")}async function kD(t){const e=$r(t),n=await y1(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new _1(n);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new x1(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AD(t,e){const n=Os(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(pi(s,e??{}))return i;Hn(i,"already-initialized")}return n.initialize({options:e})}function CD(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(On);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function PD(t,e,n){const r=$r(t);W(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=N1(e),{host:o,port:l}=RD(e),c=l===null?"":`:${l}`,u={url:`${s}//${o}${c}/`},d=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){W(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),W(pi(u,r.config.emulator)&&pi(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Ns(o)?(wE(`${s}//${o}${c}`),EE("Auth",!0)):i||xD()}function N1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function RD(t){const e=N1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:fv(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:fv(o)}}}function fv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function xD(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Dn("not implemented")}_getIdTokenResponse(e){return Dn("not implemented")}_linkToIdToken(e,n){return Dn("not implemented")}_getReauthenticationResolver(e){return Dn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function as(t,e){return bu(t,"POST","/v1/accounts:signInWithIdp",bn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ND="http://localhost";class yi extends pm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new yi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Hn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new yi(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return as(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,as(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,as(e,n)}buildRequest(){const e={requestUri:ND,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ds(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pv(t,e){return sn(t,"POST","/v1/accounts:sendVerificationCode",bn(t,e))}async function DD(t,e){return bu(t,"POST","/v1/accounts:signInWithPhoneNumber",bn(t,e))}async function OD(t,e){const n=await bu(t,"POST","/v1/accounts:signInWithPhoneNumber",bn(t,e));if(n.temporaryProof)throw ko(t,"account-exists-with-different-credential",n);return n}const VD={USER_NOT_FOUND:"user-not-found"};async function MD(t,e){const n={...e,operation:"REAUTH"};return bu(t,"POST","/v1/accounts:signInWithPhoneNumber",bn(t,n),VD)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o extends pm{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new $o({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new $o({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return DD(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return OD(e,{idToken:n,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return MD(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new $o({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va extends D1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar extends Va{constructor(){super("facebook.com")}static credential(e){return yi._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ar.credential(e.oauthAccessToken)}catch{return null}}}ar.FACEBOOK_SIGN_IN_METHOD="facebook.com";ar.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends Va{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return yi._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return lr.credential(n,r)}catch{return null}}}lr.GOOGLE_SIGN_IN_METHOD="google.com";lr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr extends Va{constructor(){super("github.com")}static credential(e){return yi._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cr.credentialFromTaggedObject(e)}static credentialFromError(e){return cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cr.credential(e.oauthAccessToken)}catch{return null}}}cr.GITHUB_SIGN_IN_METHOD="github.com";cr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur extends Va{constructor(){super("twitter.com")}static credential(e,n){return yi._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ur.credential(n,r)}catch{return null}}}ur.TWITTER_SIGN_IN_METHOD="twitter.com";ur.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Qt._fromIdTokenResponse(e,r,i),o=mv(r);return new ks({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=mv(r);return new ks({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function mv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc extends In{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Lc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Lc(e,n,r,i)}}function O1(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Lc._fromErrorAndOperation(t,s,e,r):s})}async function LD(t,e,n=!1){const r=await ya(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ks._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FD(t,e,n=!1){const{auth:r}=t;if(Kt(r.app))return Promise.reject(Cr(r));const i="reauthenticate";try{const s=await ya(t,O1(r,i,e,t),n);W(s.idToken,r,"internal-error");const o=hm(s.idToken);W(o,r,"internal-error");const{sub:l}=o;return W(t.uid===l,r,"user-mismatch"),ks._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Hn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V1(t,e,n=!1){if(Kt(t.app))return Promise.reject(Cr(t));const r="signIn",i=await O1(t,r,e),s=await ks._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function jD(t,e){return V1($r(t),e)}function UD(t,e,n,r){return De(t).onIdTokenChanged(e,n,r)}function BD(t,e,n){return De(t).beforeAuthStateChanged(e,n)}function zD(t,e,n,r){return De(t).onAuthStateChanged(e,n,r)}function $D(t){return De(t).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(t,e){return sn(t,"POST","/v2/accounts/mfaEnrollment:start",bn(t,e))}const Fc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Fc,"1"),this.storage.removeItem(Fc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD=1e3,qD=10;class L1 extends M1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=C1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);lD()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,qD):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},HD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}L1.type="LOCAL";const WD=L1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1 extends M1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}F1.type="SESSION";const j1=F1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new ku(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(o).map(async u=>u(n.origin,s)),c=await KD(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ku.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((l,c)=>{const u=mm("",20);i.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const m=f;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(m.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(){return window}function QD(t){Ve().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gm(){return typeof Ve().WorkerGlobalScope<"u"&&typeof Ve().importScripts=="function"}async function YD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function JD(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function XD(){return gm()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U1="firebaseLocalStorageDb",ZD=1,jc="firebaseLocalStorage",B1="fbase_key";class Ma{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Au(t,e){return t.transaction([jc],e?"readwrite":"readonly").objectStore(jc)}function e2(){const t=indexedDB.deleteDatabase(U1);return new Ma(t).toPromise()}function yf(){const t=indexedDB.open(U1,ZD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(jc,{keyPath:B1})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(jc)?e(r):(r.close(),await e2(),e(await yf()))})})}async function _v(t,e,n){const r=Au(t,!0).put({[B1]:e,value:n});return new Ma(r).toPromise()}async function t2(t,e){const n=Au(t,!1).get(e),r=await new Ma(n).toPromise();return r===void 0?null:r.value}function yv(t,e){const n=Au(t,!0).delete(e);return new Ma(n).toPromise()}const n2=800,r2=3;class z1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await yf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>r2)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gm()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ku._getInstance(XD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await YD(),!this.activeServiceWorker)return;this.sender=new GD(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||JD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await yf();return await _v(e,Fc,"1"),await yv(e,Fc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>_v(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>t2(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>yv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Au(i,!1).getAll();return new Ma(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),n2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}z1.type="LOCAL";const i2=z1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv(t,e){return sn(t,"POST","/v2/accounts/mfaSignIn:start",bn(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh=R1("rcb"),s2=new Da(3e4,6e4);class o2{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!((e=Ve().grecaptcha)!=null&&e.render)}load(e,n=""){return W(a2(n),e,"argument-error"),this.shouldResolveImmediately(n)&&ov(Ve().grecaptcha)?Promise.resolve(Ve().grecaptcha):new Promise((r,i)=>{const s=Ve().setTimeout(()=>{i(At(e,"network-request-failed"))},s2.get());Ve()[Fh]=()=>{Ve().clearTimeout(s),delete Ve()[Fh];const l=Ve().grecaptcha;if(!l||!ov(l)){i(At(e,"internal-error"));return}const c=l.render;l.render=(u,d)=>{const f=c(u,d);return this.counter++,f},this.hostLanguage=n,r(l)};const o=`${mD()}?${Ds({onload:Fh,render:"explicit",hl:n})}`;fm(o).catch(()=>{clearTimeout(s),i(At(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!((n=Ve().grecaptcha)!=null&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function a2(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class l2{async load(e){return new wD(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho="recaptcha",c2={theme:"light",type:"image"};class u2{constructor(e,n,r={...c2}){this.parameters=r,this.type=Ho,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=$r(e),this.isInvisible=this.parameters.size==="invisible",W(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;W(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new l2:new o2,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){W(!this.parameters.sitekey,this.auth,"argument-error"),W(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),W(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=Ve()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){W(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){W(f1()&&!gm(),this.auth,"internal-error"),await h2(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await XN(this.auth);W(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return W(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function h2(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=$o._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function f2(t,e,n){if(Kt(t.app))return Promise.reject(Cr(t));const r=$r(t),i=await p2(r,e,De(n));return new d2(i,s=>jD(r,s))}async function p2(t,e,n){var r;if(!t._getRecaptchaConfig())try{await kD(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const s=i.session;if("phoneNumber"in i){W(s.type==="enroll",t,"internal-error");const o={idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Lh(t,o,"mfaSmsEnrollment",async(d,f)=>{if(f.phoneEnrollmentInfo.captchaResponse===zo){W((n==null?void 0:n.type)===Ho,d,"argument-error");const m=await jh(d,f,n);return gv(d,m)}return gv(d,f)},"PHONE_PROVIDER").catch(d=>Promise.reject(d))).phoneSessionInfo.sessionInfo}else{W(s.type==="signin",t,"internal-error");const o=((r=i.multiFactorHint)==null?void 0:r.uid)||i.multiFactorUid;W(o,t,"missing-multi-factor-info");const l={mfaPendingCredential:s.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Lh(t,l,"mfaSmsSignIn",async(f,m)=>{if(m.phoneSignInInfo.captchaResponse===zo){W((n==null?void 0:n.type)===Ho,f,"argument-error");const y=await jh(f,m,n);return vv(f,y)}return vv(f,m)},"PHONE_PROVIDER").catch(f=>Promise.reject(f))).phoneResponseInfo.sessionInfo}}else{const s={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Lh(t,s,"sendVerificationCode",async(u,d)=>{if(d.captchaResponse===zo){W((n==null?void 0:n.type)===Ho,u,"argument-error");const f=await jh(u,d,n);return pv(u,f)}return pv(u,d)},"PHONE_PROVIDER").catch(u=>Promise.reject(u))).sessionInfo}}finally{n==null||n._reset()}}async function jh(t,e,n){W(n.type===Ho,t,"argument-error");const r=await n.verify();W(typeof r=="string",t,"argument-error");const i={...e};if("phoneEnrollmentInfo"in i){const s=i.phoneEnrollmentInfo.phoneNumber,o=i.phoneEnrollmentInfo.captchaResponse,l=i.phoneEnrollmentInfo.clientType,c=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:r,captchaResponse:o,clientType:l,recaptchaVersion:c}}),i}else if("phoneSignInInfo"in i){const s=i.phoneSignInInfo.captchaResponse,o=i.phoneSignInInfo.clientType,l=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:s,clientType:o,recaptchaVersion:l}}),i}else return Object.assign(i,{recaptchaToken:r}),i}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(t,e){return e?On(e):(W(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m extends pm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return as(e,this._buildIdpRequest())}_linkToIdToken(e,n){return as(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return as(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function g2(t){return V1(t.auth,new _m(t),t.bypassAuthState)}function _2(t){const{auth:e,user:n}=t;return W(n,e,"internal-error"),FD(n,new _m(t),t.bypassAuthState)}async function y2(t){const{auth:e,user:n}=t;return W(n,e,"internal-error"),LD(n,new _m(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return g2;case"linkViaPopup":case"linkViaRedirect":return y2;case"reauthViaPopup":case"reauthViaRedirect":return _2;default:Hn(this.auth,"internal-error")}}resolve(e){qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2=new Da(2e3,1e4);class Qi extends $1{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Qi.currentPopupAction&&Qi.currentPopupAction.cancel(),Qi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return W(e,this.auth,"internal-error"),e}async onExecution(){qn(this.filter.length===1,"Popup operations only handle one event");const e=mm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(At(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(At(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(At(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,v2.get())};e()}}Qi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2="pendingRedirect",zl=new Map;class E2 extends $1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=zl.get(this.auth._key());if(!e){try{const r=await T2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}zl.set(this.auth._key(),e)}return this.bypassAuthState||zl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function T2(t,e){const n=b2(e),r=I2(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function S2(t,e){zl.set(t._key(),e)}function I2(t){return On(t._redirectPersistence)}function b2(t){return Bl(w2,t.config.apiKey,t.name)}async function k2(t,e,n=!1){if(Kt(t.app))return Promise.reject(Cr(t));const r=$r(t),i=m2(r,e),o=await new E2(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2=10*60*1e3;class C2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!P2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!H1(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(At(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=A2&&this.cachedEventUids.clear(),this.cachedEventUids.has(wv(e))}saveEventToCache(e){this.cachedEventUids.add(wv(e)),this.lastProcessedEventTime=Date.now()}}function wv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function H1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function P2(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return H1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R2(t,e={}){return sn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,N2=/^https?/;async function D2(t){if(t.config.emulator)return;const{authorizedDomains:e}=await R2(t);for(const n of e)try{if(O2(n))return}catch{}Hn(t,"unauthorized-domain")}function O2(t){const e=gf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!N2.test(n))return!1;if(x2.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2=new Da(3e4,6e4);function Ev(){const t=Ve().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function M2(t){return new Promise((e,n)=>{var i,s,o;function r(){Ev(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ev(),n(At(t,"network-request-failed"))},timeout:V2.get()})}if((s=(i=Ve().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=Ve().gapi)!=null&&o.load)r();else{const l=R1("iframefcb");return Ve()[l]=()=>{gapi.load?r():n(At(t,"network-request-failed"))},fm(`${_D()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw $l=null,e})}let $l=null;function L2(t){return $l=$l||M2(t),$l}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2=new Da(5e3,15e3),j2="__/auth/iframe",U2="emulator/auth/iframe",B2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},z2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $2(t){const e=t.config;W(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?um(e,U2):`https://${t.config.authDomain}/${j2}`,r={apiKey:e.apiKey,appName:t.name,v:Vs},i=z2.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ds(r).slice(1)}`}async function H2(t){const e=await L2(t),n=Ve().gapi;return W(n,t,"internal-error"),e.open({where:document.body,url:$2(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:B2,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=At(t,"network-request-failed"),l=Ve().setTimeout(()=>{s(o)},F2.get());function c(){Ve().clearTimeout(l),i(r)}r.ping(c).then(c,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},W2=500,K2=600,G2="_blank",Q2="http://localhost";class Tv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Y2(t,e,n,r=W2,i=K2){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...q2,width:r.toString(),height:i.toString(),top:s,left:o},u=at().toLowerCase();n&&(l=S1(u)?G2:n),E1(u)&&(e=e||Q2,c.scrollbars="yes");const d=Object.entries(c).reduce((m,[y,P])=>`${m}${y}=${P},`,"");if(aD(u)&&l!=="_self")return J2(e||"",l),new Tv(null);const f=window.open(e||"",l,d);W(f,t,"popup-blocked");try{f.focus()}catch{}return new Tv(f)}function J2(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2="__/auth/handler",Z2="emulator/auth/handler",eO=encodeURIComponent("fac");async function Sv(t,e,n,r,i,s){W(t.config.authDomain,t,"auth-domain-config-required"),W(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Vs,eventId:i};if(e instanceof D1){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",cC(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries(s||{}))o[d]=f}if(e instanceof Va){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await t._getAppCheckToken(),u=c?`#${eO}=${encodeURIComponent(c)}`:"";return`${tO(t)}?${Ds(l).slice(1)}${u}`}function tO({config:t}){return t.emulator?um(t,Z2):`https://${t.authDomain}/${X2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uh="webStorageSupport";class nO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=j1,this._completeRedirectFn=k2,this._overrideRedirectResult=S2}async _openPopup(e,n,r,i){var o;qn((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await Sv(e,n,r,gf(),i);return Y2(e,s,mm())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Sv(e,n,r,gf(),i);return QD(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(qn(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await H2(e),r=new C2(e);return n.register("authEvent",i=>(W(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Uh,{type:Uh},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[Uh];s!==void 0&&n(!!s),Hn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=D2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return C1()||T1()||dm()}}const rO=nO;var Iv="@firebase/auth",bv="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){W(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function oO(t){En(new nn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;W(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:P1(t)},u=new fD(r,i,s,c);return CD(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),En(new nn("auth-internal",e=>{const n=$r(e.getProvider("auth").getImmediate());return(r=>new iO(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ft(Iv,bv,sO(t)),Ft(Iv,bv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aO=5*60,lO=vE("authIdTokenMaxAge")||aO;let kv=null;const cO=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>lO)return;const i=n==null?void 0:n.token;kv!==i&&(kv=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function uO(t=kp()){const e=Os(t,"auth");if(e.isInitialized())return e.getImmediate();const n=AD(t,{popupRedirectResolver:rO,persistence:[i2,WD,j1]}),r=vE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=cO(s.toString());BD(n,o,()=>o(n.currentUser)),UD(n,l=>o(l))}}const i=_E("auth");return i&&PD(n,`http://${i}`),n}function hO(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}pD({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=At("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",hO().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});oO("Browser");const q1="@firebase/installations",ym="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W1=1e4,K1=`w:${ym}`,G1="FIS_v2",dO="https://firebaseinstallations.googleapis.com/v1",fO=60*60*1e3,pO="installations",mO="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gO={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},vi=new Si(pO,mO,gO);function Q1(t){return t instanceof In&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1({projectId:t}){return`${dO}/projects/${t}/installations`}function J1(t){return{token:t.token,requestStatus:2,expiresIn:yO(t.expiresIn),creationTime:Date.now()}}async function X1(t,e){const r=(await e.json()).error;return vi.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Z1({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function _O(t,{refreshToken:e}){const n=Z1(t);return n.append("Authorization",vO(e)),n}async function eS(t){const e=await t();return e.status>=500&&e.status<600?t():e}function yO(t){return Number(t.replace("s","000"))}function vO(t){return`${G1} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wO({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=Y1(t),i=Z1(t),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={fid:n,authVersion:G1,appId:t.appId,sdkVersion:K1},l={method:"POST",headers:i,body:JSON.stringify(o)},c=await eS(()=>fetch(r,l));if(c.ok){const u=await c.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:J1(u.authToken)}}else throw await X1("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tS(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EO(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO=/^[cdef][\w-]{21}$/,vf="";function SO(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=IO(t);return TO.test(n)?n:vf}catch{return vf}}function IO(t){return EO(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS=new Map;function rS(t,e){const n=Cu(t);iS(n,e),bO(n,e)}function iS(t,e){const n=nS.get(t);if(n)for(const r of n)r(e)}function bO(t,e){const n=kO();n&&n.postMessage({key:t,fid:e}),AO()}let si=null;function kO(){return!si&&"BroadcastChannel"in self&&(si=new BroadcastChannel("[Firebase] FID Change"),si.onmessage=t=>{iS(t.data.key,t.data.fid)}),si}function AO(){nS.size===0&&si&&(si.close(),si=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO="firebase-installations-database",PO=1,wi="firebase-installations-store";let Bh=null;function vm(){return Bh||(Bh=cu(CO,PO,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(wi)}}})),Bh}async function Uc(t,e){const n=Cu(t),i=(await vm()).transaction(wi,"readwrite"),s=i.objectStore(wi),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&rS(t,e.fid),e}async function sS(t){const e=Cu(t),r=(await vm()).transaction(wi,"readwrite");await r.objectStore(wi).delete(e),await r.done}async function Pu(t,e){const n=Cu(t),i=(await vm()).transaction(wi,"readwrite"),s=i.objectStore(wi),o=await s.get(n),l=e(o);return l===void 0?await s.delete(n):await s.put(l,n),await i.done,l&&(!o||o.fid!==l.fid)&&rS(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wm(t){let e;const n=await Pu(t.appConfig,r=>{const i=RO(r),s=xO(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===vf?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function RO(t){const e=t||{fid:SO(),registrationStatus:0};return oS(e)}function xO(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(vi.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=NO(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:DO(t)}:{installationEntry:e}}async function NO(t,e){try{const n=await wO(t,e);return Uc(t.appConfig,n)}catch(n){throw Q1(n)&&n.customData.serverCode===409?await sS(t.appConfig):await Uc(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function DO(t){let e=await Av(t.appConfig);for(;e.registrationStatus===1;)await tS(100),e=await Av(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await wm(t);return r||n}return e}function Av(t){return Pu(t,e=>{if(!e)throw vi.create("installation-not-found");return oS(e)})}function oS(t){return OO(t)?{fid:t.fid,registrationStatus:0}:t}function OO(t){return t.registrationStatus===1&&t.registrationTime+W1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VO({appConfig:t,heartbeatServiceProvider:e},n){const r=MO(t,n),i=_O(t,n),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={installation:{sdkVersion:K1,appId:t.appId}},l={method:"POST",headers:i,body:JSON.stringify(o)},c=await eS(()=>fetch(r,l));if(c.ok){const u=await c.json();return J1(u)}else throw await X1("Generate Auth Token",c)}function MO(t,{fid:e}){return`${Y1(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Em(t,e=!1){let n;const r=await Pu(t.appConfig,s=>{if(!aS(s))throw vi.create("not-registered");const o=s.authToken;if(!e&&jO(o))return s;if(o.requestStatus===1)return n=LO(t,e),s;{if(!navigator.onLine)throw vi.create("app-offline");const l=BO(s);return n=FO(t,l),l}});return n?await n:r.authToken}async function LO(t,e){let n=await Cv(t.appConfig);for(;n.authToken.requestStatus===1;)await tS(100),n=await Cv(t.appConfig);const r=n.authToken;return r.requestStatus===0?Em(t,e):r}function Cv(t){return Pu(t,e=>{if(!aS(e))throw vi.create("not-registered");const n=e.authToken;return zO(n)?{...e,authToken:{requestStatus:0}}:e})}async function FO(t,e){try{const n=await VO(t,e),r={...e,authToken:n};return await Uc(t.appConfig,r),n}catch(n){if(Q1(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await sS(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await Uc(t.appConfig,r)}throw n}}function aS(t){return t!==void 0&&t.registrationStatus===2}function jO(t){return t.requestStatus===2&&!UO(t)}function UO(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+fO}function BO(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function zO(t){return t.requestStatus===1&&t.requestTime+W1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $O(t){const e=t,{installationEntry:n,registrationPromise:r}=await wm(e);return r?r.catch(console.error):Em(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HO(t,e=!1){const n=t;return await qO(n),(await Em(n,e)).token}async function qO(t){const{registrationPromise:e}=await wm(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WO(t){if(!t||!t.options)throw zh("App Configuration");if(!t.name)throw zh("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw zh(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function zh(t){return vi.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lS="installations",KO="installations-internal",GO=t=>{const e=t.getProvider("app").getImmediate(),n=WO(e),r=Os(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},QO=t=>{const e=t.getProvider("app").getImmediate(),n=Os(e,lS).getImmediate();return{getId:()=>$O(n),getToken:i=>HO(n,i)}};function YO(){En(new nn(lS,GO,"PUBLIC")),En(new nn(KO,QO,"PRIVATE"))}YO();Ft(q1,ym);Ft(q1,ym,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JO="/firebase-messaging-sw.js",XO="/firebase-cloud-messaging-push-scope",cS="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ZO="https://fcmregistrations.googleapis.com/v1",uS="google.c.a.c_id",eV="google.c.a.c_l",tV="google.c.a.ts",nV="google.c.a.e",Pv=1e4;var Rv;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(Rv||(Rv={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var va;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(va||(va={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function rV(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $h="fcm_token_details_db",iV=5,xv="fcm_token_object_Store";async function sV(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(s=>s.name).includes($h))return null;let e=null;return(await cu($h,iV,{upgrade:async(r,i,s,o)=>{if(i<2||!r.objectStoreNames.contains(xv))return;const l=o.objectStore(xv),c=await l.index("fcmSenderId").get(t);if(await l.clear(),!!c){if(i===2){const u=c;if(!u.auth||!u.p256dh||!u.endpoint)return;e={token:u.fcmToken,createTime:u.createTime??Date.now(),subscriptionOptions:{auth:u.auth,p256dh:u.p256dh,endpoint:u.endpoint,swScope:u.swScope,vapidKey:typeof u.vapidKey=="string"?u.vapidKey:Pn(u.vapidKey)}}}else if(i===3){const u=c;e={token:u.fcmToken,createTime:u.createTime,subscriptionOptions:{auth:Pn(u.auth),p256dh:Pn(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:Pn(u.vapidKey)}}}else if(i===4){const u=c;e={token:u.fcmToken,createTime:u.createTime,subscriptionOptions:{auth:Pn(u.auth),p256dh:Pn(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:Pn(u.vapidKey)}}}}}})).close(),await Ch($h),await Ch("fcm_vapid_details_db"),await Ch("undefined"),oV(e)?e:null}function oV(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aV="firebase-messaging-database",lV=1,wa="firebase-messaging-store";let Hh=null;function hS(){return Hh||(Hh=cu(aV,lV,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(wa)}}})),Hh}async function cV(t){const e=dS(t),r=await(await hS()).transaction(wa).objectStore(wa).get(e);if(r)return r;{const i=await sV(t.appConfig.senderId);if(i)return await Tm(t,i),i}}async function Tm(t,e){const n=dS(t),i=(await hS()).transaction(wa,"readwrite");return await i.objectStore(wa).put(e,n),await i.done,e}function dS({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uV={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},dt=new Si("messaging","Messaging",uV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hV(t,e){const n=await Im(t),r=fS(e),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{s=await(await fetch(Sm(t.appConfig),i)).json()}catch(o){throw dt.create("token-subscribe-failed",{errorInfo:o==null?void 0:o.toString()})}if(s.error){const o=s.error.message;throw dt.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw dt.create("token-subscribe-no-token");return s.token}async function dV(t,e){const n=await Im(t),r=fS(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{s=await(await fetch(`${Sm(t.appConfig)}/${e.token}`,i)).json()}catch(o){throw dt.create("token-update-failed",{errorInfo:o==null?void 0:o.toString()})}if(s.error){const o=s.error.message;throw dt.create("token-update-failed",{errorInfo:o})}if(!s.token)throw dt.create("token-update-no-token");return s.token}async function fV(t,e){const r={method:"DELETE",headers:await Im(t)};try{const s=await(await fetch(`${Sm(t.appConfig)}/${e}`,r)).json();if(s.error){const o=s.error.message;throw dt.create("token-unsubscribe-failed",{errorInfo:o})}}catch(i){throw dt.create("token-unsubscribe-failed",{errorInfo:i==null?void 0:i.toString()})}}function Sm({projectId:t}){return`${ZO}/projects/${t}/registrations`}async function Im({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function fS({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==cS&&(i.web.applicationPubKey=r),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pV=7*24*60*60*1e3;async function mV(t){const e=await _V(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Pn(e.getKey("auth")),p256dh:Pn(e.getKey("p256dh"))},r=await cV(t.firebaseDependencies);if(r){if(yV(r.subscriptionOptions,n))return Date.now()>=r.createTime+pV?gV(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await fV(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return Nv(t.firebaseDependencies,n)}else return Nv(t.firebaseDependencies,n)}async function gV(t,e){try{const n=await dV(t.firebaseDependencies,e),r={...e,token:n,createTime:Date.now()};return await Tm(t.firebaseDependencies,r),n}catch(n){throw n}}async function Nv(t,e){const r={token:await hV(t,e),createTime:Date.now(),subscriptionOptions:e};return await Tm(t,r),r.token}async function _V(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:rV(e)})}function yV(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,s=e.p256dh===t.p256dh;return n&&r&&i&&s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dv(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return vV(e,t),wV(e,t),EV(e,t),e}function vV(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i);const s=e.notification.icon;s&&(t.notification.icon=s)}function wV(t,e){e.data&&(t.data=e.data)}function EV(t,e){var i,s,o,l;if(!e.fcmOptions&&!((i=e.notification)!=null&&i.click_action))return;t.fcmOptions={};const n=((s=e.fcmOptions)==null?void 0:s.link)??((o=e.notification)==null?void 0:o.click_action);n&&(t.fcmOptions.link=n);const r=(l=e.fcmOptions)==null?void 0:l.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TV(t){return typeof t=="object"&&!!t&&uS in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */SV("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function SV(t,e){const n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),r<e.length&&n.push(e.charAt(r));return n.join("")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IV(t){if(!t||!t.options)throw qh("App Configuration Object");if(!t.name)throw qh("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw qh(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function qh(t){return dt.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=IV(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kV(t){try{t.swRegistration=await navigator.serviceWorker.register(JO,{scope:XO}),t.swRegistration.update().catch(()=>{}),await AV(t.swRegistration)}catch(e){throw dt.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}async function AV(t){return new Promise((e,n)=>{const r=setTimeout(()=>n(new Error(`Service worker not registered after ${Pv} ms`)),Pv),i=t.installing||t.waiting;t.active?(clearTimeout(r),e()):i?i.onstatechange=s=>{var o;((o=s.target)==null?void 0:o.state)==="activated"&&(i.onstatechange=null,clearTimeout(r),e())}:(clearTimeout(r),n(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CV(t,e){if(!e&&!t.swRegistration&&await kV(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw dt.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PV(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=cS)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pS(t,e){if(!navigator)throw dt.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw dt.create("permission-blocked");return await PV(t,e==null?void 0:e.vapidKey),await CV(t,e==null?void 0:e.serviceWorkerRegistration),mV(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RV(t,e,n){const r=xV(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[uS],message_name:n[eV],message_time:n[tV],message_device_time:Math.floor(Date.now()/1e3)})}function xV(t){switch(t){case va.NOTIFICATION_CLICKED:return"notification_open";case va.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NV(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===va.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(Dv(n)):t.onMessageHandler.next(Dv(n)));const r=n.data;TV(r)&&r[nV]==="1"&&await RV(t,n.messageType,r)}const Ov="@firebase/messaging",Vv="0.12.23";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DV=t=>{const e=new bV(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>NV(e,n)),e},OV=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>pS(e,r)}};function VV(){En(new nn("messaging",DV,"PUBLIC")),En(new nn("messaging-internal",OV,"PRIVATE")),Ft(Ov,Vv),Ft(Ov,Vv,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mS(){try{await SE()}catch{return!1}return typeof window<"u"&&TE()&&sC()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MV(t=kp()){return mS().then(e=>{if(!e)throw dt.create("unsupported-browser")},e=>{throw dt.create("indexed-db-unsupported")}),Os(De(t),"messaging").getImmediate()}async function AL(t,e){return t=De(t),pS(t,e)}VV();const LV={apiKey:"AIzaSyAAoWo0hEu3t5rXM1TbP9xQVxpKp4d0psI",authDomain:"kisanbazaar-1b2bc.firebaseapp.com",projectId:"kisanbazaar-1b2bc",storageBucket:"kisanbazaar-1b2bc.firebasestorage.app",messagingSenderId:"230716705602",appId:"1:230716705602:web:31cdf0c823459b78f516db"},bm=kE(LV),ei=bN(bm),vl=uO(bm);let FV;mS().then(t=>{t&&(FV=MV(bm))}).catch(t=>console.log("Messaging not supported",t));const gS=D.createContext(),km=()=>D.useContext(gS),jV=({children:t})=>{const[e,n]=D.useState(null),[r,i]=D.useState(!0);D.useEffect(()=>{const d=zD(vl,f=>{if(f){const m=f.phoneNumber;let y="Farmer";(m==="+919987917394"||m==="+91 9987917394")&&(y="Admin");const P=Nc(ei,"users",f.uid);UN(P).then(C=>{const x=C.exists()?C.data():{};n({uid:f.uid,phone:m,name:x.name||(y==="Admin"?"Administrator":"Kisan User"),role:x.role||y,isVerified:!0,city:x.city||"",interests:x.interests||[],onboardingCompleted:x.onboardingCompleted||!1,avatar:x.avatar||`https://ui-avatars.com/api/?name=${y}&background=${y==="Admin"?"000000":"4CAF50"}&color=fff`})})}else n(null);i(!1)});return()=>d()},[]);const s=d=>{window.recaptchaVerifier&&(window.recaptchaVerifier.clear(),window.recaptchaVerifier=null);const f=new u2(vl,"recaptcha-container",{size:"invisible",callback:m=>{console.log("Recaptcha Verified")}});return window.recaptchaVerifier=f,f},o=async(d,f)=>{const m="+91 "+d;console.log("DEBUG: Sending OTP to:",m);try{return await f2(vl,m,f)}catch(y){throw console.error("Error sending OTP:",y),y}},l=async(d,f)=>{try{return(await d.confirm(f)).user}catch(m){throw console.error("Error verifying OTP:",m),m}},c=async()=>{try{await $D(vl),localStorage.removeItem("kisan_user")}catch(d){console.error("Error signing out:",d)}},u=d=>{n(f=>({...f,...d}))};return S.jsx(gS.Provider,{value:{user:e,setupRecaptcha:s,login:o,verifyOtp:l,logout:c,updateProfile:u,loading:r},children:!r&&t})},Mv={en:{home:"Home",buy:"Buy",buyer:"Buyer",sell:"Sell",seller:"Seller",rates:"Today Rates",news:"News",weather:"Weather",services:"Farming Services",chaupal:"Chaupal",advisory:"Advisory",animal_husbandry:"Animal Husbandry",fpo:"FPO / Institutional",nav_rates:"Rates",nav_profile:"Profile",menu:"Menu",notifications:"Notifications",buyer_section:"Buyer Section",seller_section:"Seller Section",seller_section:"Seller Section",request_crop:"Request Crop",my_posts:"My Posts",view_sellers:"View Sellers Directory",list_product:"List Your Product For Sale",my_products:"My Products",view_buyers:"View Buyers",verified_sellers:"Verified Sellers",install_app_title:"Install App",install_app_desc:"Get better experience & offline access",install:"Install",close:"Close",login:"Login",call:"Call",whatsapp:"WhatsApp",next:"Next",confirm_post:"Confirm & Post",cancel:"Cancel",update:"Update",submit:"Submit",hide_advanced:"Hide Advanced Options",upload_photos:"Upload Photos",photo_constraints:"(Max 3 images, max 1MB each)",photo_speed_tip:"Uploading a photo will get you a buyer faster",show_advanced:"More Advanced Options",hero_title:"Fast & Reliable Marketplace for Farmers",hero_subtitle:"Direct connection between Farmers & Buyers. No Middlemen.",i_am_farmer:" Sell Your Crop",i_am_buyer:" Buy Fresh Produce",knowledge_center_title:" Kisan Media & Knowledge Center",kisan_tv:" Kisan TV - Latest Updates",kisan_tv_desc:"Learn modern farming techniques, government schemes, and market trends directly from experts.",watch_now:"Watch Now ",latest_blog:" Latest from the Blog",read_more:"Read More Articles",join_community:" Join Our Community",community_desc:"Connect with 50,000+ farmers. Share rates, advice, and grow together.",join_whatsapp:" Join WhatsApp Group",join_telegram:" Join Telegram Channel",commodity:"Product (Crop)",quantity:"Available Quantity",price:"Price Options",location:"Location",quality:"Quality",comments:"Comments (Optional)",contact_name:"Contact Name",phone_number:"Phone Number",is_organic:"Is it Organic?",is_graded:"Is it Graded?",is_packed:"Is it Packed in Bags?",contact_info:"Your Contact Info",buyer_note_title:"Note for Buyers",buyer_note_desc:"Nearby sellers will contact you based on your location.",app_name:"Kisan Bazaar",footer_desc:"A modern platform for farmers. Sell your crop and adopt new technology.",description_tip:" Tip: Write details like variety (e.g. Lokwan), harvest date, and quality to get 3x more calls.",important_links:"Important Links",about_us:"About Us",integrated_farming:"Integrated Farming",be_partner:"Be A Partner",help:"Help",privacy_policy:"Privacy Policy",contact_us:"Contact Us",email:"Email",phone:"Phone",address:"Burhanpur, Madhya Pradesh",feedback_title:"Give Feedback",feedback_success:"Thank you! Your suggestion has been received.",placeholder_name:"Your Name",placeholder_mobile:"Mobile Number",placeholder_suggestion:"Your Suggestion *",loading:"Loading...",no_results:"No posts found matching your criteria.",clear_filters:"Clear All Filters",auto_detect:"Auto-detect",detecting:"Detecting...",quick_pick:"Quick Pick",trending:"Trending",weather_label:"Weather",sowing:"Sowing",harvesting:"Harvesting",care_tips:"Care & Tips",sellers_label:"Sellers",buyers_label:"Buyers",rates_label:"Rates",farming_tips:"Farming Tips",sellers_in:"Sellers in",mandi_rates_in:"Mandi Rates in",limit_reached:"You have reached the limit of 5 listings. Please contact admin for more.",duplicate_limit:"You can only post the same crop twice in 7 days.",buy_sell_prompt:"Do you want to Buy / Sell",enter_valid_mobile:"Please enter a valid 10-digit mobile number.",enter_otp:"Enter OTP",generate_otp:"Generate OTP",verify_signin:"Verify & Sign In",recommended_unit:"Recommended unit",location_detected:"Location detected",location_detect_failed:"Location detection failed",manual_select:"Please select manually",submit_success:"Listing posted successfully!",error_general:"An error occurred. Please try again.",best_market_price_alert:"You have selected 'Best Market Price'. Our system will connect you with buyers offering competitive rates.",fixed_price:"Fixed Price",best_market_price:"Best Market Price",enter_name_mobile:"Please enter Name and Mobile Number.",otp_sent:"OTP sent to",invalid_otp:"Invalid OTP. Please try '1234'",select_state:"Please select a State",select_district:"Please select a District",select_quality:"Please select Quality",enter_valid_price:"Please enter a valid Price",select_price_unit:"Please select Price Unit",select_quantity_unit:"Please select Quantity Unit",quantity_error:"Quantity must be greater than 0",max_images_error:"You can only upload up to 3 images",confirm_cancel:"Are you sure you want to cancel editing? Changes will be lost.",geolocation_unsupported:"Geolocation is not supported by your browser",location_detect_error:"Unable to detect location. Please select manually.",location_permission_denied:"Location permission denied. Please enable it in browser settings.",location_timeout:"Location detection timed out.",back_to_home:"Back to Home",wheat:"Wheat",listing_type_locked:"Listing type cannot be changed while editing",agree_terms:"I agree with Terms And Conditions",confirm_details_title:"Confirm Details",commodity_details:"Commodity Details",type_label:"Type",want_to_buy:"WANT TO BUY",want_to_sell:"WANT TO SELL",verify_edit:"Edit",verify_warning:"Please verify the details above. False information may lead to account suspension.",success_title:"Post Created Successfully!",success_msg:"Your post has been successfully submitted. It will be live on the platform shortly.",view_my_listings:" View My Listings",return_home:" Return to Home",clear_all:"Clear All",no_new_alerts:"No new alerts",find_sellers_desc:"Find buyers & sellers in your district.",product_label:"Product",found_sellers:"Found sellers",reset_filters:"Reset Filters",deals_in:"Deals In",contact_hidden:"Contact Hidden",upgrade_premium:"Upgrade to Premium to view contact details.",unlock_access:"Unlock Access",call_now:"Call Now",no_sellers_found:"No sellers found in this area.",try_changing_location:"Try changing the Tehsil or District.",load_more_sellers:"Load More Sellers",showing_sellers_count:"Showing sellers",my_products_list:"My Products List",please_sign_in:"Please sign in to view your products",sign_in_btn:"Sign In",no_posts_title:"You haven't posted anything yet",post_first_req:"Post Your First Requirement",no_photo:"No Photo",edit_product:"Edit Product",delete_product:"Delete Product",delete_confirm_title:"Do you really want to delete this?",delete_confirm_yes:"Yes, Delete",delete_confirm_no:"No",share_whatsapp:"Share",want_alerts_whatsapp:"Want alerts on WhatsApp?",subscribe_now:" Subscribe Now",whatsapp_subscribe_msg:"I want to subscribe to Kisan Bazaar Alerts",quick_todays_rate:"Today's Rate",quick_weather:"Weather",quick_farming_services:"Farming Services",quick_smart_advisory:"Smart Advisory",quick_news:"News & Schemes",quick_chaupal:"Community",quick_trade_area:"Trade Area (Satara)",about_title:"About Us",about_subtitle:"Empowering farmers with technology to create a fair, transparent, and profitable marketplace.",about_mission:"Our Mission",about_mission_desc:"Kisan Bazaar is dedicated to eliminating middlemen and connecting farmers directly with buyers. We believe that every farmer deserves the best price for their hard work.",about_direct_trade:"Direct Trade",about_direct_trade_desc:"A platform where farmers can list their produce and negotiate directly with bulk buyers, retailers, and exporters.",about_smart_farming:"Smart Farming",about_smart_farming_desc:"Providing real-time weather forecasts, farming advisories, and latest government schemes to help you plan better.",about_market_rates:"Market Rates",about_market_rates_desc:"Daily mandi rates from major markets in Madhya Pradesh to keep you updated on current trends.",about_built_for:"Built for the Farmers of Bharat",about_team_desc:"We are a team of passionate developers and agriculture enthusiasts working to bring the digital revolution to every farm.",partner_title:"Be A Partner",partner_subtitle:"Join our network and grow with KisanBazaar",partner_intro:"If you are interested to be a part of KisanBazaar then fill up following detail.",partner_contact_msg:"Our top management and commerce department will contact you. Thank You!",partner_name:"Name",partner_phone:"Phone Number",partner_email:"Email",partner_city:"City",partner_country:"Country",partner_company:"Company Name",partner_website:"Web Address",partner_activities:"Company Activities",partner_activities_placeholder:"Describe what your company does...",partner_website_format:"Format: https://example.com",partner_submit:"Submit Request",partner_success:"Thank you! Your partnership request has been submitted.",partner_error_name:"Please enter your Name",partner_error_phone:"Please enter a valid Phone Number",partner_error_email:"Please enter your Email",partner_error_city:"Please enter your City",partner_error_company:"Please enter Company Name",partner_error_activities:"Please describe Company Activities",help_title:"How can we help you?",help_subtitle:"Please fill out this simple form and we will get back to you soon.",help_name:"Full Name",help_mobile:"Mobile Number",help_topic:"Topic",help_message:"Message",help_message_placeholder:"How can we improve? Or what do you need help with?",help_topic_suggestion:"Suggestion",help_topic_issue:"Technical Issue",help_topic_question:"Question",help_topic_other:"Other",help_submit:"Submit Information",help_success:"Thank you! Your request has been submitted.",privacy_title:"Privacy Policy",privacy_last_updated:"Last updated:",privacy_intro_title:"1. Introduction",privacy_intro_desc:"Welcome to Kisan Bazaar. Your privacy is critical to us. We build this platform to help farmers and buyers connect safely. This policy explains how we handle your information in compliance with Indian Digital Personal Data Protection (DPDP) standards.",privacy_data_title:"2. Data We Collect",privacy_data_basic:"Basic Info: Name, Mobile Number, and Location.",privacy_data_usage:"Usage Data: How you use our search and marketplace.",privacy_data_communication:"Communication: Feedback and help requests you send us.",privacy_use_title:"3. How We Use Data",privacy_use_intro:"We use your data only to:",privacy_use_listings:"Display your listings to potential buyers.",privacy_use_alerts:"Send you critical weather and price alerts.",privacy_use_improve:"Improve our app services for farmers.",privacy_sharing_title:"4. Sharing Your Data",privacy_sharing_desc:'We NEVER sell your data to third parties. Your mobile number is only visible to buyers if you post a "Sell" listing, to facilitate a direct deal.',privacy_rights_title:"5. Your Rights",privacy_rights_access:"Access: You can see all your data in your Profile.",privacy_rights_erasure:"Erasure: You can request us to delete all your info at any time.",privacy_rights_correction:"Correction: You can update your mobile or name anytime.",privacy_contact:"If you have any questions, please contact us via the Help section.",privacy_go_back:"Go Back",back_to_home:" Back to Home",load_more_crops:" Show More Crops",showing_crops:"Showing {count} of {total} crops",marketplace_title:"Marketplace",buy_sell_hub:"Buy and Sell Crops directly from farmers",i_want_buy:"I want to Buy",i_want_sell:"I want to Sell",filter_all:"All",filter_veg:"Vegetables",filter_fruits:"Fruits",filter_grains:"Grains",no_posts_found:"No listings found.",try_adjusting_filters:"Try adjusting your filters.",available:"Available",price:"Price",quantity:"Quantity",contact_seller:"Contact Seller",contact_buyer:"Contact Buyer",needed:"Needed",welcome:"Welcome!",what_interested_in:"What are you interested in buying?",continue:"Continue",filter_flowers:"Flowers",filter_spices:"Spices",post_buyer_request:"Post a Request",cant_find_item:"Can't find what you need?",close:"Close",submit_request:"Post Request",pashu_title:"Animal Husbandry",pashu_subtitle:"Expert tips for Dairy, Goat, and Poultry farming.",dairy_farming:"Dairy Farming",goat_farming:"Goat Farming",poultry_farming:"Poultry",feeding_mgmt:"Feeding Management",feeding_desc:"Provide balanced ration (Green fodder + Dry fodder + Concentrates). Ensure 24/7 clean water access.",breeding:"Breeding",breeding_desc:"Artificial Insemination (AI) is recommended for better breed improvement. Detect heat symptoms early.",disease_prev:"Disease Prevention",disease_desc:"Vaccinate against FMD (Foot & Mouth Disease) and HS annually. Deworm every 3 months.",housing:"Housing",housing_desc:"Ensure dry, elevated floor with good ventilation. Protect from cold winds.",vaccination:"Vaccination",vaccination_desc:"PPR and ET vaccines are critical. Consult local vet for schedule.",biosecurity:"Bio-security",biosecurity_desc:"Restrict entry of visitors. Use disinfectant footbaths at entrance.",layer_farming:"Layer Farming",layer_desc:"Maintain 16 hours of light for optimal egg production. Provide calcium-rich diet.",need_advice:"Need specific advice?",ask_chaupal:"Ask in Kisan Chaupal",chaupal_title:"Kisan Chaupal",chaupal_subtitle:"Ask questions, share knowledge, and help fellow farmers.",ask_question:"Ask a Question",reset_demo:"Reset Demo Data",admin_mode:"Admin Mode",login_required:"Login Required",login_to_ask:"Please login to ask questions or reply.",type_question:"Type your question here...",upload_image:"Upload Image",post_question:"Post Question",likes:"Likes",replies:"Replies",reply:"Reply",cancel_reply:"Cancel Reply",write_reply:"Write a reply...",delete:"Delete",new_question:"New Question",transport_title:"Farming Services Marketplace",transport_subtitle:"Rent Tractors, Find Harvesters, Buy Inputs & Hire Logistics",post_ad:"Post Your Ad",filter_location:"Filter by Location",search_placeholder_transport:"Search for 'Tractor', 'Harvester'...",service_tractor:"Tractor Rental",service_harvester:"Harvesting",service_transport:"Transport",service_drone:"Drones",service_inputs:"Fertilizers/Seeds",verified:"Verified",report:"Report",load_more_services:"Load More Services",posted_ad_success:"Ad Posted Successfully!",post_ad_free_title:"Post Ad for Free",free_listing_offer_text:"We are currently offering free listings for all farmers and service providers!",offer_benefit_1:"1. Get unlimited leads.",offer_benefit_2:'2. Show "Verified" badge.',offer_benefit_3:"3. Help other farmers.",free_label:"Free",limited_time_offer_text:"Limited Time Offer",post_ad_now:"Post Ad Now",service_details:"Service Details",service_title:"Service Title",category:"Category",price:"Price",unit:"Unit",post_duration:"Duration of your post",mobile_number:"Mobile Number",submit_ad:"Submit Ad",weather_title:"Weather Forecast & Farm Advisory",weather_subtitle:"Weather Forecast and Agriculture Advice",select_location_label:"Select Search Location",auto_detect:"Auto-detect",detecting:"Detecting...",select_crop_label:"Select Your Crop",select_district_title:"Select Your District",select_district_msg:"Please select your district from the dropdown above to view live weather, alerts, and farming advisories.",loading_weather:"Loading weather data...",weather_load_error:"Unable to load weather data",retry:"Retry",last_updated:"Last updated",humidity:"Humidity",wind:"Wind",rain:"Rain",feels_like:"Feels like",advisories_for:"Advisories for",news_page_title:"Agriculture News & Schemes",news_page_subtitle:"Latest Updates & Government Schemes",disclaimer_text:"Disclaimer: Government website links may change or be temporarily unavailable. We are not responsible for content on external sites.",tab_mp_news:"MP Govt News",tab_central_news:"Central Govt News",tab_schemes:"Govt Schemes",read_more:"Read More",read_less:"Read Less",full_article:"Read Full Article",new_tag:"New",valid_until:"Valid Until",fill_state_district:"Please select State and District",expiry_date:"Exp",by:"By",posted:"Posted",reported_for_review:"Reported for review!",no_services_found:"No services found.",adjust_filters_suggestion:"Try adjusting your search or filters.",advisory_title:"Smart Crop Advisory",running_season:"Running Season",season_update:"Season Update",demand_high:"Demand for",plan_accordingly:"is high. Plan accordingly!",water_soil:"Water & Soil",care_diseases:"Care & Diseases",pro_tip:"Pro Tip",no_crops_found:"No crops found for this season.",cat_all:"All Crops",cat_rabi:"Rabi (Winter)",cat_kharif:"Kharif (Monsoon)",cat_zaid:"Zaid (Summer)",buy_sell_hub:"Buy & Sell - All in one place",i_want_buy:"I Want to Buy",i_want_sell:"I Want to Sell",search_placeholder:"Search crop name (e.g. Tomato, Rice)...",filter_all:"All",filter_buy:"Buyer",filter_sell:"Seller",filter_fruits:"Fruits",filter_veg:"Vegetables",filter_grains:"Grains",filter_others:"Others",price_range:"Price Range",reset_all:"Reset All",max_budget:"Max Budget",needed:"Needed",available:"Available",contact_seller:"Contact Seller",todays_rates:"Today's Mandi Rates",select_location:"Select Location",search_crop:"Search Crop",crop:"Crop",min_price:"Min",max_price:"Max",avg_price:"Avg",view_analysis:"View Analysis",nearby_mandi:"Nearby Mandi",analysis_nearby:"View Analysis & Nearby",hide_analysis:"Hide Analysis",nearby_mandis:"Nearby Mandis",price_history:"Price History (Last 7 Days)",select_mandi_prompt:"Please select a Mandi to see rates",news_page_title:"Agriculture News & Schemes",news_page_subtitle:"Latest updates for Indian Farmers",disclaimer_text:"Disclaimer: Information is sourced from public domains for awareness. Please verify with official departments.",tab_mp_news:"State News",tab_central_news:"Central Govt",tab_schemes:"Govt Schemes",new_tag:"New",valid_until:"Valid Until",full_article:"Full Article",read_more:"Read More",read_less:"Read Less",market_analysis_title:"Market Analysis",price_trends_desc:"Price trends for top commodities over the last 7 days.",trending_up:" Trending Up",trending_down:" Trending Down",avg_price_fmt:"Avg Price: {price} / {unit}",analysis_no_data:"No data available for analysis. Select a location first.",close:"Close",search_btn:"Search",select_state_ph:"-- Select State --",select_district_ph:"-- Select District --",select_state_ph:"-- Select State --",select_district_ph:"-- Select District --",select_tehsil_ph:"-- Select Tehsil / Mandi --",safety_tip:"Safety Tip",warning_no_advance:`Never pay any advance amount to sellers.
Always inspect the crop before buying.`,login_for_rates:"Login for live rates",wheat:"Wheat",soybean:"Soybean",onion:"Onion",potato:"Potato",weather_teaser_text:"Indore (Jan): Day 2428C, Min 1215C, Mostly Clear. Rain: 0%",desc_services:"Rent or provide services like Tractor, Harvester, Seeds, Medicine, and Transport.",desc_advisory:"Get personalized advice for sowing, irrigation, and pest control.",desc_news:"Know about agriculture news, state/central govt schemes and benefits.",desc_chaupal:"Ask questions, share knowledge, and get help from other farmers.",desc_trade_area:"Explore local trade and buying/selling opportunities in Satara region.",login_title:"Sign In",login_subtitle:"Access exclusive farmer features.",label_city:"City/Village Name",placeholder_city:"Enter City/Village Name",label_phone:"Phone Number",placeholder_phone:"Enter 10 digit number",btn_get_otp:"Get OTP",btn_sending:"Sending OTP...",btn_verifying:"Verifying...",btn_verify_login:"Verify & Login",otp_sent_to:"We sent an OTP to",change_number:"Change Number",label_enter_otp:"Enter OTP",placeholder_otp:"e.g. 1234",mock_otp_msg:"(Use mock OTP: 1234)",login_view_profile:"Please Login to view your profile.",verified_farmer_badge:" Verified Farmer",farm_details_title:"Farm Details",cnt_edit_profile:" Edit Profile",label_profile_name:"Name",label_profile_phone:"Phone",label_profile_village:"Village",label_profile_land:"Land Size",label_profile_crops:"Crops (comma separated)",save_changes:"Save Changes",label_land_size:"Land Size",not_set:"Not Set",label_major_crops:"Major Crops",label_member_since:"Member Since",notifications_title:" Notifications",status_active:"Active ",btn_enable_notifications:"Enable Push Notifications",status_enabling:"Enabling...",btn_logout:"Log Out",image_selected:"Image Selected",just_now:"Just Now",login_demo_user:"Login as Demo User",confirm_delete_question:"Are you sure you want to delete this question?",you_are_offline:" YOU ARE OFFLINE",live_data_unavailable:" LIVE DATA UNAVAILABLE",using_cached_data:" | Using cached/demo data | ",refresh:"Refresh",location_permission_denied:"Location permission denied. Please allow location access",location_timeout:"Location request timed out. Please try again or select manually.",location_unavailable:"Unable to detect location. Please select manually.",trade_area_title:"Trade Area: Satara, Maharashtra",trade_area_desc:"Exclusive marketplace for Satara district. Connect with local buyers and sellers.",sellers_in_satara:"Sellers in Satara",buyers_in_satara:"Buyers in Satara"},hi:{home:" ",buy:"",buyer:"",sell:"",seller:"",rates:" ",news:"",weather:"",services:" ",chaupal:"",advisory:"",animal_husbandry:"",fpo:"",nav_rates:"",nav_profile:"",menu:"",notifications:"",buyer_section:" ",seller_section:" ",request_crop:" ",my_posts:" ",view_sellers:"  ",list_product:"      ",my_products:" ",view_buyers:" ",login:"",call:" ",whatsapp:"",next:"",confirm_post:"    ",cancel:" ",update:" ",submit:"",hide_advanced:"  ",upload_photos:"  ",photo_constraints:"( 3 ,  1MB )",photo_speed_tip:"     ",show_advanced:"  ",install_app_title:"  ",install_app_desc:"      ",install:"",close:" ",hero_title:"      ",hero_subtitle:"         ",i_am_farmer:"   ",i_am_buyer:"  ",knowledge_center_title:"     ",kisan_tv:"   -  ",kisan_tv_desc:"      ,       ",watch_now:"  ",latest_blog:"   ",read_more:"  ",join_community:"    ",community_desc:"50,000+    ,      ",join_whatsapp:"     ",join_telegram:"     ",commodity:"",quantity:" ",price:" ",location:"",quality:"",comments:" ()",contact_name:" ",phone_number:" ",is_organic:"   ?",is_graded:"   ?",is_packed:"     ?",contact_info:"  ",buyer_note_title:"  ",buyer_note_desc:"         ",app_name:" ",footer_desc:"            ",description_tip:" :  ( ),           3    ",important_links:" ",about_us:"  ",integrated_farming:" ",be_partner:" ",help:"",privacy_policy:" ",contact_us:" ",email:"",phone:"",address:",  ",feedback_title:" ",feedback_success:"!    ",placeholder_name:" ",placeholder_mobile:" ",placeholder_suggestion:"  *",loading:"   ...",no_results:"       ",clear_filters:"   ",auto_detect:"  ",detecting:"    ...",quick_pick:" ",trending:" ",weather_label:"",sowing:"",harvesting:"",care_tips:"  ",sellers_label:"",buyers_label:"",rates_label:"",farming_tips:"  ",sellers_in:" -",mandi_rates_in:"  -",limit_reached:" 5              ",duplicate_limit:" 7            ",buy_sell_prompt:"   /   ",enter_valid_mobile:"   10-    ",enter_otp:"  ",generate_otp:"  ",verify_signin:"     ",recommended_unit:" ",location_detected:"   ",location_detect_failed:"     ",manual_select:"    ",submit_success:"    !",error_general:"    :  ",best_market_price_alert:" '  '              ",fixed_price:" ",best_market_price:" ",enter_name_mobile:"      ",otp_sent:"  ",invalid_otp:"   '1234'   ",select_state:"   ",select_district:"   ",select_quality:"  ",enter_valid_price:"    ",select_price_unit:"   ",select_quantity_unit:"   ",quantity_error:" 0    ",max_images_error:"  3     ",confirm_cancel:"      ?   ",geolocation_unsupported:"        ",location_detect_error:"          ",location_permission_denied:"         ",location_timeout:"        ",back_to_home:"   ",wheat:"",listing_type_locked:"        ",agree_terms:"      ",confirm_details_title:"   ",commodity_details:"  ",type_label:"",want_to_buy:" ",want_to_sell:" ",verify_edit:"  (Edit)",verify_warning:"                 ",success_title:"   !",success_msg:"             ",view_my_listings:"   ",return_home:"   ",clear_all:"  ",no_new_alerts:"   ",verified_sellers:"  (Verified Sellers)",find_sellers_desc:"       ",product_label:" (Product)",found_sellers:" ",reset_filters:"  ",deals_in:"  (Deals In)",contact_hidden:"   ",upgrade_premium:"        ",unlock_access:"  ",call_now:"  ",no_sellers_found:"      ",try_changing_location:"      ",load_more_sellers:"   ",showing_sellers_count:"    ",my_products_list:"    (My Products List)",please_sign_in:"        ",sign_in_btn:"  ",no_posts_title:"       ",post_first_req:"   (Post First Requirement)",no_photo:"  ",edit_product:"   (Edit)",delete_product:"  (Delete)",delete_confirm_title:"      ?",delete_confirm_yes:", ",delete_confirm_no:"",share_whatsapp:" ",want_alerts_whatsapp:"   ?",subscribe_now:"   ",whatsapp_subscribe_msg:"       ",quick_todays_rate:" ",quick_weather:"",quick_farming_services:" ",quick_smart_advisory:" ",quick_news:"  ",quick_chaupal:"",quick_trade_area:"  ()",about_title:"  ",about_subtitle:"          ",about_mission:" ",about_mission_desc:"                            ",about_direct_trade:" ",about_direct_trade_desc:"                   ",about_smart_farming:" ",about_smart_farming_desc:"   ,              ",about_market_rates:" ",about_market_rates_desc:"              ",about_built_for:"      ",about_team_desc:"                     ",post_ad_free_title:"    ",free_listing_offer_text:"                !",offer_benefit_1:"1.    ",offer_benefit_2:'2. ""  ',offer_benefit_3:"3.     ",free_label:"",limited_time_offer_text:"   ",post_ad_now:"   ",partner_title:" ",partner_subtitle:"       ",partner_intro:"              ",partner_contact_msg:"         !",partner_name:"",partner_phone:"",partner_email:"",partner_city:"",partner_country:"",partner_company:"  ",partner_website:"",partner_activities:"  ",partner_activities_placeholder:"      ...",partner_website_format:": https://example.com",partner_submit:" ",partner_success:"!       ",partner_error_name:"    ",partner_error_phone:"    ",partner_error_email:"   ",partner_error_city:"   ",partner_error_company:"     ",partner_error_activities:"     ",help_title:"      ?",help_subtitle:"           ",help_name:" ",help_mobile:" ",help_topic:"",help_message:"",help_message_placeholder:"     ?       ?",help_topic_suggestion:"",help_topic_issue:" ",help_topic_question:"",help_topic_other:"",help_submit:" ",help_success:"!     ",welcome:" !",what_interested_in:"    ?",continue:" ",filter_flowers:"",filter_spices:"",post_buyer_request:"  ",cant_find_item:"        ?",close:" ",submit_request:"  ",pashu_title:"",pashu_subtitle:",        ",dairy_farming:" ",goat_farming:" ",poultry_farming:" ",feeding_mgmt:" ",feeding_desc:"   (  +   + ) 24/7      ",breeding:"",breeding_desc:"      (AI)           ",disease_prev:" ",disease_desc:"    FMD (-)  HS     3        ",housing:"",housing_desc:",          ",vaccination:"",vaccination_desc:"PPR  ET            ",biosecurity:" ",biosecurity_desc:"            ",layer_farming:" ",layer_desc:"    16        ",need_advice:"  ?",ask_chaupal:"   ",chaupal_title:" ",chaupal_subtitle:" ,         ",ask_question:" ",reset_demo:"   ",admin_mode:" ",login_required:" ",login_to_ask:"          ",type_question:"   ...",upload_image:"  ",post_question:"  ",trade_area_title:" : , ",trade_area_desc:"           ",sellers_in_satara:"  ",buyers_in_satara:"  ",likes:"",replies:"",reply:" ",cancel_reply:" ",write_reply:"  ...",delete:"",new_question:" ",transport_title:"  ",transport_subtitle:"   ,  ,       ",post_ad:"  ",filter_location:" ",search_placeholder_transport:"'', '' ...",service_tractor:" ",service_harvester:"/",service_transport:"",service_drone:"",service_inputs:"//",verified:"",report:"",load_more_services:"   ",posted_ad_success:"    !",privacy_title:" ",privacy_last_updated:" :",privacy_intro_title:"1. ",privacy_intro_desc:"                                ",privacy_data_title:"2.     ",privacy_data_basic:" : ,    ",privacy_data_usage:" :          ",privacy_data_communication:":         ",privacy_use_title:"3.    ",privacy_use_intro:"         :",privacy_use_listings:"    ",privacy_use_alerts:"     ",privacy_use_improve:"       ",privacy_sharing_title:"4.   ",privacy_sharing_desc:"                           ",privacy_rights_title:"5.  ",privacy_rights_access:":          ",privacy_rights_erasure:":           ",privacy_rights_correction:":           ",privacy_contact:"    ,          ",privacy_go_back:" ",back_to_home:"   ",load_more_crops:"   ",showing_crops:"{total}   {count}     ",service_details:" ",service_title:"  ",category:"",price:"",unit:"",post_duration:"  ",mobile_number:" ",submit_ad:" ",weather_title:"    ",weather_subtitle:"    ",select_location_label:" ",auto_detect:"  ",detecting:"  ...",select_crop_label:" ",select_district_title:"  ",select_district_msg:"               ",loading_weather:"     ...",weather_load_error:"     ",retry:"  ",last_updated:" ",humidity:"",wind:"",rain:"",feels_like:"   ",advisories_for:"  ",news_page_title:"   ",news_page_subtitle:"    ",disclaimer_text:":                 ",tab_mp_news:"..  ",tab_central_news:"  ",tab_schemes:" ",new_tag:"",valid_until:"",full_article:"  ",read_more:" ",read_less:" ",market_analysis_title:" ",price_trends_desc:" 7        ",trending_up:"  ( )",trending_down:"  ( )",avg_price_fmt:": {price} / {unit}",analysis_no_data:"          ",close:" ",search_btn:"  (Search)",select_state_ph:"--   --",select_district_ph:"--   --",select_tehsil_ph:"--  /   --",fill_state_district:"    ",expiry_date:"",by:"",posted:" ",reported_for_review:"     !",no_services_found:"   ",adjust_filters_suggestion:"        ",advisory_title:"  ",running_season:" ",season_update:" ",demand_high:" ",plan_accordingly:"    !",water_soil:"  ",care_diseases:"  ",pro_tip:" ",no_crops_found:"       ",cat_all:" ",cat_rabi:" ()",cat_kharif:" ()",cat_zaid:" ()",buy_sell_hub:"   -    ",i_want_buy:"   ",i_want_sell:"   ",search_placeholder:"    ( , )...",filter_all:"",filter_buy:"",filter_sell:"",filter_fruits:"",filter_veg:"",filter_grains:"",filter_others:"",price_range:" ",reset_all:"  ",max_budget:" ",needed:"",available:"",contact_seller:"   ",todays_rates:"   ",select_location:" /  ",search_crop:" ",crop:"",min_price:"",max_price:"",avg_price:"",view_analysis:" ",nearby_mandi:"  ",analysis_nearby:"   ",hide_analysis:" ",nearby_mandis:"  ",price_history:"  ( 7 )",select_mandi_prompt:"      ",safety_tip:" ",warning_no_advance:"                ",login_for_rates:"     ",wheat:"",soybean:"",onion:"",potato:"",weather_teaser_text:"  Indore   2428C,  1215C,  , : 0%",desc_services:", , Seed, medicine         ",desc_advisory:"  , ,       ",desc_news:" , /      ",desc_chaupal:"   - ,      ",desc_trade_area:"      -   ",login_title:"  ",login_subtitle:"       ",label_city:"/  ",placeholder_city:"/    ",label_phone:" ",placeholder_phone:"10     ",btn_get_otp:"  ",btn_sending:"    ...",btn_verifying:"   ...",btn_verify_login:"    ",otp_sent_to:"   ",change_number:" ",label_enter_otp:"  ",placeholder_otp:": 1234",mock_otp_msg:"(    : 1234)",login_view_profile:"       ",verified_farmer_badge:"   (Verified Farmer)",farm_details_title:"   (Farm Details)",cnt_edit_profile:"   ",label_profile_name:" (Name)",label_profile_phone:" (Phone)",label_profile_village:" (Village)",label_profile_land:" (Land Size)",label_profile_crops:" (Crops)",save_changes:" ",label_land_size:"  ",not_set:"  ",label_major_crops:" ",label_member_since:" ",notifications_title:"  (Notifications)",status_active:" ",btn_enable_notifications:"   ",status_enabling:"    ...",btn_logout:"  ",image_selected:" ",just_now:" ",login_demo_user:"      ",confirm_delete_question:"        ?",you_are_offline:"   ",live_data_unavailable:"     ",using_cached_data:" |         | ",refresh:" ",location_permission_denied:"        ",location_timeout:"             ",location_unavailable:"          "},mr:{home:" ",buy:"",buyer:"",sell:"",seller:"",rates:" ",news:"",weather:"",services:" ",chaupal:"",advisory:"",animal_husbandry:"",fpo:"",nav_rates:"",nav_profile:"",menu:"",notifications:"",buyer_section:" ",seller_section:" ",request_crop:"  ",my_posts:" ",view_sellers:"  ",list_product:"   ",my_products:" ",view_buyers:" ",login:"",call:" ",whatsapp:"",next:"",confirm_post:"    ",cancel:" ",update:" ",submit:"",hide_advanced:"  ",upload_photos:"  ",photo_constraints:"(  3 ,  1MB)",photo_speed_tip:"      ",show_advanced:"  ",hero_title:"    ",hero_subtitle:"     .   .",i_am_farmer:"   ",i_am_buyer:"    ",knowledge_center_title:"     ",kisan_tv:"   -  ",kisan_tv_desc:"    ,      .",watch_now:"  ",latest_blog:"   ",read_more:"  ",join_community:"    ",community_desc:",+  . ,      .",join_whatsapp:"    ",join_telegram:"    ",commodity:"",quantity:" ",price:" ",location:"",quality:"",comments:" ()",contact_name:" ",phone_number:" ",is_organic:"   ?",is_graded:"   ?",is_packed:"     ?",contact_info:"  ",buyer_note_title:"",buyer_note_desc:"       .",app_name:" ",footer_desc:"   .       .",important_links:" ",about_us:"",integrated_farming:" ",be_partner:" ",help:"",privacy_policy:" ",contact_us:" ",email:"",phone:"",address:",  ",feedback_title:" ",feedback_success:"!     .",placeholder_name:" ",placeholder_mobile:" ",placeholder_suggestion:"  *",loading:"  ...",no_results:"     .",clear_filters:"   ",auto_detect:" ",detecting:" ...",quick_pick:"",trending:"",weather_label:"",sowing:"",harvesting:"",care_tips:"  ",sellers_label:"",buyers_label:"",rates_label:"",farming_tips:" ",sellers_in:" -",mandi_rates_in:"  -",limit_reached:"     .     .",duplicate_limit:"        ",buy_sell_prompt:"  /    ",enter_valid_mobile:"  -    .",enter_otp:"  ",generate_otp:" ",verify_signin:"     ",recommended_unit:"  ",location_detected:" ",location_detect_failed:"  ",manual_select:"  ",submit_success:"   !",error_general:"  .    .",best_market_price_alert:" '  '  .        .",fixed_price:" ",best_market_price:" ",enter_name_mobile:"      .",otp_sent:" ",invalid_otp:" .  ''  ",select_state:"  ",select_district:"  ",select_quality:"  ",enter_valid_price:"    ",select_price_unit:"   ",select_quantity_unit:"   ",quantity_error:"      ",max_images_error:"      ",confirm_cancel:"    ?   .",geolocation_unsupported:"      ",location_detect_error:"  .   .",location_permission_denied:"  .      .",location_timeout:"   .",back_to_home:"  ",wheat:"",listing_type_locked:"       ",agree_terms:"     ",confirm_details_title:"  ",verify_warning:"   .      .",welcome:" !",what_interested_in:"    ?",continue:" ",filter_flowers:"",filter_spices:"",post_buyer_request:"  ",cant_find_item:"      ?",close:" ",submit_request:"  ",pashu_title:"",pashu_subtitle:",      .",dairy_farming:" ",goat_farming:" ",poultry_farming:"",feeding_mgmt:" ",feeding_desc:"   (  +   + ). 24/7    .",breeding:"",breeding_desc:"    (AI)   .    .",disease_prev:" ",disease_desc:"  FMD ( )  HS   .  3   .",housing:"",housing_desc:",      .    .",vaccination:"",vaccination_desc:"PPR  ET   .     .",biosecurity:" ",biosecurity_desc:"    .    .",layer_farming:" ",layer_desc:"   16   .    .",need_advice:"   ?",ask_chaupal:"  ",marketplace_title:" (Marketplace)",buy_sell_hub:"       ",i_want_buy:"  ",i_want_sell:"  ",filter_all:"",filter_veg:"",filter_fruits:"",filter_grains:"",no_posts_found:"   ",try_adjusting_filters:"    ",available:"",price:"",quantity:"",contact_seller:"   ",contact_buyer:"   ",needed:"",verified_sellers:"  (Verified Sellers)",find_sellers_desc:"     .",product_label:" (Product)",found_sellers:" ",reset_filters:"  ",deals_in:"  (Deals In)",contact_hidden:"  ",upgrade_premium:"     .",unlock_access:"  ",call_now:"  ",no_sellers_found:"     .",try_changing_location:"    .",load_more_sellers:"   ",showing_sellers_count:"  ",marketplace_title:" (Marketplace)",buy_sell_hub:"       ",i_want_buy:"   ",i_want_sell:"  ",filter_all:"",filter_veg:"",filter_fruits:"",filter_grains:"",no_posts_found:"   .",try_adjusting_filters:"  .",available:"",price:"",quantity:"",contact_seller:"  ",contact_buyer:"  ",needed:" ",my_products_list:"  ",please_sign_in:"      ",sign_in_btn:"  ",no_posts_title:"     ",post_first_req:"   ",no_photo:" ",edit_product:"  ",delete_product:" ",delete_confirm_title:"     ?",delete_confirm_yes:", ",delete_confirm_no:"",want_to_buy:"  ",want_to_sell:"  ",chaupal_title:" ",chaupal_subtitle:" ,        .",ask_question:" ",reset_demo:"   ",admin_mode:" ",login_required:" ",login_to_ask:"       .",type_question:"    ...",upload_image:"  ",post_question:"  ",likes:"",replies:"",reply:" ",cancel_reply:" ",write_reply:" ...",delete:"",new_question:" ",transport_title:"  ",transport_subtitle:"  ,  ,       ",post_ad:"  ",filter_location:" ",search_placeholder_transport:"'', '' ...",service_tractor:" ",service_harvester:"/",service_transport:"",service_drone:"",service_inputs:"//",verified:"",report:"",load_more_services:"   ",posted_ad_success:"   !",post_ad_free_title:"   ",free_listing_offer_text:"          !",offer_benefit_1:".   .",offer_benefit_2:'. ""  .',offer_benefit_3:".    .",free_label:"",limited_time_offer_text:"  ",post_ad_now:"   ",service_details:" ",service_title:" ",category:"",price:"",unit:"",post_duration:" ",mobile_number:" ",submit_ad:"  ",success_title:"!",success_msg:"      .     .",view_my_listings:"   ",return_home:"   ",clear_all:"  ",no_new_alerts:"   ",share_whatsapp:" ",want_alerts_whatsapp:"   ?",subscribe_now:"   ",whatsapp_subscribe_msg:"      ",quick_todays_rate:" ",quick_weather:"",quick_farming_services:" ",quick_smart_advisory:" ",quick_news:"  ",quick_chaupal:"",quick_trade_area:"  ()",about_title:"",about_subtitle:"    ,      .",about_mission:" ",about_mission_desc:"           .           .",about_direct_trade:" ",about_direct_trade_desc:"                .",about_smart_farming:" ",about_smart_farming_desc:"   ,         .",about_market_rates:" ",about_market_rates_desc:"          .",about_built_for:"   ",about_team_desc:"                 .",partner_title:" ",partner_subtitle:"       ",partner_intro:"           .",partner_contact_msg:"        . !",partner_name:"",partner_phone:" ",partner_email:"",partner_city:"",partner_country:"",partner_company:" ",partner_website:"",partner_activities:" ",partner_activities_placeholder:"     ...",partner_website_format:": https://example.com",partner_submit:" ",partner_success:"!       .",partner_error_name:"   ",partner_error_phone:"    ",partner_error_email:"   ",partner_error_city:"   ",partner_error_company:"   ",partner_error_activities:"    ",help_title:"     ?",help_subtitle:"          .",help_name:" ",help_mobile:" ",help_topic:"",help_message:"",help_message_placeholder:"   ?      ?",help_topic_suggestion:"",help_topic_issue:" ",help_topic_question:"",help_topic_other:"",help_submit:" ",help_success:"!      .",privacy_title:" ",privacy_last_updated:" :",privacy_intro_title:"1. ",privacy_intro_desc:"    .     .                  .",privacy_data_title:"2.     ",privacy_data_basic:" : ,    .",privacy_data_usage:" :       .",privacy_data_communication:":        .",privacy_use_title:"3.    ",privacy_use_intro:"     :",privacy_use_listings:"   .",privacy_use_alerts:"     .",privacy_use_improve:"   .",privacy_sharing_title:"4.    ",privacy_sharing_desc:"       .            .",privacy_rights_title:"5.  ",privacy_rights_access:":        .",privacy_rights_erasure:":         .",privacy_rights_correction:":          .",privacy_contact:"    ,       .",privacy_go_back:" ",back_to_home:"   ",load_more_crops:"   ",showing_crops:"{total}  {count}   ",weather_title:"    ",weather_subtitle:"    ",select_location_label:" ",auto_detect:"-",detecting:" ...",select_crop_label:"  ",select_district_title:"  ",select_district_msg:" ,           .",loading_weather:"    ...",weather_load_error:"    ",retry:"  ",last_updated:" ",humidity:"",wind:"",rain:"",feels_like:" ",advisories_for:" ",news_page_title:"   ",news_page_subtitle:"    ",disclaimer_text:":     .      .",tab_mp_news:"..  ",tab_central_news:"  ",tab_schemes:" ",read_more:" ",read_less:" ",full_article:"  ",new_tag:"",valid_until:"",fill_state_district:"    ",expiry_date:"",by:"",posted:" ",reported_for_review:"  !",confirm_details_title:"  ",commodity_details:" ",type_label:"",want_to_buy:"  ",want_to_sell:"  ",verify_edit:"  (Edit)",verify_warning:"   .      .",success_title:"   !",success_msg:"      .     .",view_my_listings:"   ",return_home:"   ",clear_all:"  ",no_new_alerts:"   ",share_whatsapp:" ",want_alerts_whatsapp:"   ?",subscribe_now:"   ",whatsapp_subscribe_msg:"      ",quick_todays_rate:" ",quick_weather:"",quick_farming_services:" ",quick_smart_advisory:" ",quick_news:"  ",quick_chaupal:"",quick_trade_area:"  ()",install_app_title:"  ",install_app_desc:"    ",install:"",close:" ",login_view_profile:"    .",verified_farmer_badge:"   (Verified Farmer)",farm_details_title:"  (Farm Details)",cnt_edit_profile:"   ",label_profile_name:" (Name)",label_profile_phone:" (Phone)",label_profile_village:" (Village)",label_profile_land:"  (Land Size)",label_profile_crops:" (Crops)",save_changes:"  ",label_land_size:" ",not_set:" ",label_major_crops:" ",label_member_since:" ",notifications_title:"  (Notifications)",status_active:" ",btn_enable_notifications:"   ",status_enabling:"  ...",btn_logout:" ",image_selected:" ",just_now:"",login_demo_user:"    ",confirm_delete_question:"      ?",you_are_offline:"   ",live_data_unavailable:"    ",using_cached_data:" |      | ",refresh:" ",location_permission_denied:"  .     ",location_timeout:"   .       .",location_unavailable:"  .   .",no_services_found:"   .",adjust_filters_suggestion:"       .",advisory_title:"  ",running_season:" ",season_update:" ",demand_high:" ",plan_accordingly:" .   !",water_soil:"  ",care_diseases:"  ",pro_tip:" ",no_crops_found:"     .",cat_all:" ",cat_rabi:" ()",cat_kharif:" ()",cat_zaid:" ()",buy_sell_hub:"   -   ",i_want_buy:"   ",i_want_sell:"  ",search_placeholder:"   (. , )...",filter_all:"",filter_buy:"",filter_sell:"",filter_fruits:"",filter_veg:"",filter_grains:"",filter_others:"",price_range:" ",reset_all:"  ",max_budget:" ",needed:" ",available:"",contact_seller:"  ",todays_rates:"  ",select_location:" /  ",search_crop:" ",crop:"",min_price:"",max_price:"",avg_price:"",view_analysis:" ",nearby_mandi:" ",analysis_nearby:"   ",hide_analysis:" ",nearby_mandis:" ",price_history:"  (  )",select_mandi_prompt:"    ",news_page_title:"   ",news_page_subtitle:"   ",disclaimer_text:":      .     .",tab_mp_news:" ",tab_central_news:" ",tab_schemes:" ",new_tag:"",valid_until:"",full_article:" ",read_more:" ",read_less:" ",market_analysis_title:" ",price_trends_desc:"      .",trending_up:"  ( )",trending_down:"  ( )",avg_price_fmt:": {price} / {unit}",analysis_no_data:"   .    .",close:" ",search_btn:"  (Search)",select_state_ph:"--   --",select_district_ph:"--   --",select_tehsil_ph:"--  /   --",safety_tip:" ",warning_no_advance:"     .      ",login_for_rates:"   ",wheat:"",soybean:"",onion:"",potato:"",weather_teaser_text:"    2428C,  1215C, , : 0%",desc_services:", , , ,        .",desc_advisory:",       .",desc_news:" , /      .",desc_chaupal:"   ,      .",desc_trade_area:"     -  .",login_title:"  ",login_subtitle:"    .",label_city:"/ ",placeholder_city:"/   ",label_phone:" ",placeholder_phone:"10    ",btn_get_otp:" ",btn_sending:"  ...",btn_verifying:"  ...",btn_verify_login:"     ",otp_sent_to:"   ",change_number:" ",label_enter_otp:"  ",placeholder_otp:". 1234",mock_otp_msg:"(  : 1234)"}},_S=D.createContext(),UV=({children:t})=>{const[e,n]=D.useState(()=>localStorage.getItem("kb_language")||"en");D.useEffect(()=>{localStorage.setItem("kb_language",e)},[e]);const r=s=>Mv[e][s]||s,i=s=>{Mv[s]&&n(s)};return S.jsx(_S.Provider,{value:{language:e,t:r,changeLanguage:i},children:t})},Ai=()=>{const t=D.useContext(_S);if(!t)throw new Error("useLanguage must be used within a LanguageProvider");return t},wn={"Madhya Pradesh":{Indore:{label:"Indore ()",tehsils:["Indore","Dr. Ambedkar Nagar (Mhow)","Sanwer","Depalpur","Hatod"]},Bhopal:{label:"Bhopal ()",tehsils:["Huzur","Berasia","Kolar"]},Ujjain:{label:"Ujjain ()",tehsils:["Ujjain","Nagda","Badnagar","Mahidpur","Tarana","Ghatiya","Khachrod"]},Dewas:{label:"Dewas ()",tehsils:["Dewas","Sonkatch","Bagli","Kannod","Tonkhurd","Khategaon"]},Ratlam:{label:"Ratlam ()",tehsils:["Ratlam","Jaora","Alot","Sailana","Bajna","Piploda","Rau","Tal"]},Mandsaur:{label:"Mandsaur ()",tehsils:["Mandsaur","Malhargarh","Garoth","Shamgarh","Daloda","Bhanpura","Suwasra","Sitamau"]},Sehore:{label:"Sehore ()",tehsils:["Sehore","Ashta","Ichhawar","Budhni","Nasrullaganj (Bhairunda)","Shyampur","Jawar"]},Vidisha:{label:"Vidisha ()",tehsils:["Vidisha","Basoda","Sironj","Kurwai","Lateri","Giaraspur","Nateran"]},Sagar:{label:"Sagar ()",tehsils:["Sagar","Khurai","Bina","Rahatgarh","Deori","Banda","Shahgarh","Malthone"]},Satna:{label:"Satna ()",tehsils:["Satna","Maihar","Nagod","Amarpatan","Rampur Baghelan","Uchehara","Ramnagar"]},Jabalpur:{label:"Jabalpur ()",tehsils:["Jabalpur","Sihora","Patan","Panagar","Kundam","Shahpura","Majhouli"]},Gwalior:{label:"Gwalior ()",tehsils:["Gwalior","Dabra","Bhitarwar","Chinqe (Ghatigaon)"]},Khargone:{label:"Khargone ()",tehsils:["Khargone","Maheshwar","Barwaha","Segaon","Bhikangaon","Kasrawad","Gogaon","Bhagwanpura"]},Khandwa:{label:"Khandwa ()",tehsils:["Khandwa","Pandhana","Punasa","Harsud","Khalwa"]},Dhar:{label:"Dhar ()",tehsils:["Dhar","Badnawar","Sardarpur","Manawar","Kukshi","Dharampuri","Gandhwani","Tirla.0"]},Raisen:{label:"Raisen ()",tehsils:["Raisen","Goharganj","Begamganj","Gairatganj","Silwani","Bareli","Udaipura"]},Rajgarh:{label:"Rajgarh ()",tehsils:["Rajgarh","Biaora","Narsinghgarh","Sarangpur","Khilchipur","Jirapur"]},Hoshangabad:{label:"Hoshangabad (Narmadapuram)",tehsils:["Hoshangabad","Itarsi","Pipariya","Sohagpur","Babai (Makhan Nagar)","Bankhedi","Dolariya"]},Betul:{label:"Betul ()",tehsils:["Betul","Multai","Amla","Bhainsdehi","Shahpur","Chicholi","Ghoradongri"]},Morena:{label:"Morena ()",tehsils:["Morena","Ambah","Porsa","Joura","Sabalgarh","Kailaras"]},Burhanpur:{label:"Burhanpur ()",tehsils:["Burhanpur","Khaknar","Nepanagar"]},Neemuch:{label:"Neemuch ()",tehsils:["Neemuch","Jawad","Manasa","Singoli","Jiran"]},Chhindwara:{label:"Chhindwara ()",tehsils:["Chhindwara","Sausar","Pandhurna","Parasia","Junnardeo","Tamia","Amarwara","Chourai","Bichhua"]},Rewa:{label:"Rewa ()",tehsils:["Rewa","Huzur","Mauganj","Teonthar","Mangawan","Semaria","Sirmour","Hanumana","Gurh"]},Shivpuri:{label:"Shivpuri ()",tehsils:["Shivpuri","Kolaras","Karera","Pohri","Narwar","Pichhore","Khaniyadhana"]},Guna:{label:"Guna ()",tehsils:["Guna","Raghogarh","Aron","Chachoda","Kumbhraj","Bamori"]},Harda:{label:"Harda ()",tehsils:["Harda","Timarni","Khirkiya","Handia","Sirali"]},Damoh:{label:"Damoh ()",tehsils:["Damoh","Patharia","Jabera","Tendukheda","Hatta","Patera","Batiyagarh"]},Chhatarpur:{label:"Chhatarpur ()",tehsils:["Chhatarpur","Nowgong","Rajnagar","Laundi","Gaurihar","Bijawar","Bada Malhera"]}},Maharashtra:{Ahmednagar:{label:"Ahmednagar ()",tehsils:["Ahmednagar","Akole","Jamkhed","Karjat","Kopargaon","Newasa","Parner","Pathardi","Rahata","Rahuri","Sangamner","Shevgaon","Shrigonda","Shrirampur"]},Akola:{label:"Akola ()",tehsils:["Akola","Akot","Balapur","Barshitakli","Murtijapur","Patur","Telhara"]},Amravati:{label:"Amravati ()",tehsils:["Amravati","Achalpur","Anjangaon Surji","Bhatkuli","Chandur Bazar","Chandur Railway","Chikhaldara","Daryapur","Dhamangaon Railway","Dharni","Morshi","Nandgaon Khandeshwar","Teosa","Warud"]},Aurangabad:{label:"Aurangabad (Chhatrapati Sambhajinagar)",tehsils:["Aurangabad","Gangapur","Kannad","Khuldabad","Paithan","Phulambri","Sillod","Soegaon","Vaijapur"]},Beed:{label:"Beed ()",tehsils:["Beed","Ambajogai","Ashti","Dharur","Georai","Kaij","Majalgaon","Parli","Patoda","Shirur (Kasar)","Wadwani"]},Bhandara:{label:"Bhandara ()",tehsils:["Bhandara","Lakhani","Lakhandur","Mohadi","Pauni","Sakoli","Tumsar"]},Buldhana:{label:"Buldhana ()",tehsils:["Buldhana","Chikhli","Deulgaon Raja","Jalgaon (Jamod)","Khamgaon","Lonar","Malkapur","Mehkar","Motala","Nandura","Sangrampur","Shegaon","Sindkhed Raja"]},Chandrapur:{label:"Chandrapur ()",tehsils:["Chandrapur","Ballarpur","Bhadrawati","Bramhapuri","Chimur","Gondpipri","Jiwati","Korpana","Mul","Nagbhid","Pombhurna","Rajura","Saoli","Sindewahi","Warora"]},Dhule:{label:"Dhule ()",tehsils:["Dhule","Sakri","Shirpur","Sindkheda"]},Gadchiroli:{label:"Gadchiroli ()",tehsils:["Gadchiroli","Aheri","Armori","Bhamragad","Chamorshi","Dhanora","Etapalli","Korchi","Kurkheda","Mulchera","Sironcha","Wadsa (Desaiganj)"]},Gondia:{label:"Gondia ()",tehsils:["Gondia","Amgaon","Arjuni Morgaon","Deori","Goregaon","Sadak Arjuni","Salekasa","Tirora"]},Hingoli:{label:"Hingoli ()",tehsils:["Hingoli","Aundha Nagnath","Basmath","Kalamnuri","Sengaon"]},Jalgaon:{label:"Jalgaon ()",tehsils:["Jalgaon","Amalner","Bhadgaon","Bhusawal","Bodwad","Chalisgaon","Chopda","Dharangaon","Erandol","Jamner","Muktainagar","Pachora","Parola","Raver","Yawal"]},Jalna:{label:"Jalna ()",tehsils:["Jalna","Ambad","Badnapur","Bhokardan","Ghansawangi","Jafrabad","Mantha","Partur"]},Kolhapur:{label:"Kolhapur ()",tehsils:["Karvir (Kolhapur)","Ajara","Bhudargad","Chandgad","Gadhinglaj","Gaganbawada","Hatkanangale","Kagal","Panhala","Radhanagari","Shahuwadi","Shirol"]},Latur:{label:"Latur ()",tehsils:["Latur","Ahmedpur","Ausa","Chakur","Deoni","Jalkot","Nilanga","Renapur","Shirur-Anantpal","Udgir"]},"Mumbai City":{label:"Mumbai City ( )",tehsils:["Mumbai City"]},"Mumbai Suburban":{label:"Mumbai Suburban ( )",tehsils:["Andheri","Borivali","Kurla"]},Nagpur:{label:"Nagpur ()",tehsils:["Nagpur (Urban)","Nagpur (Rural)","Bhiwapur","Hingna","Kalameshwar","Kamptee","Katol","Kuhi","Mauda","Parseoni","Ramtek","Saoner","Umred"]},Nanded:{label:"Nanded ()",tehsils:["Nanded","Ardhapur","Bhokar","Biloli","Deglur","Dharmabad","Hadgaon","Himayatnagar","Kandhar","Kinwat","Loha","Mahur","Mudkhed","Mukhed","Naigaon (Khairgaon)","Umri"]},Nandurbar:{label:"Nandurbar ()",tehsils:["Nandurbar","Akkalkuwa","Akrani (Dhadgaon)","Nawapur","Shahada","Taloda"]},Nashik:{label:"Nashik ()",tehsils:["Nashik","Baglan (Satana)","Chandwad","Deola","Dindori","Igatpuri","Kalwan","Malegaon","Nandgaon","Niphad","Peint","Sinnar","Surgana","Trimbakeshwar","Yeola"]},Osmanabad:{label:"Osmanabad (Dharashiv)",tehsils:["Osmanabad","Bhoom","Kalamb","Lohara","Paranda","Tuljapur","Umarga","Washi"]},Palghar:{label:"Palghar ()",tehsils:["Palghar","Dahanu","Jawhar","Mokhada","Talasari","Vikramgad","Vasai","Wada"]},Parbhani:{label:"Parbhani ()",tehsils:["Parbhani","Gangakhed","Jintur","Manwath","Palam","Pathri","Purna","Sailu","Sonpeth"]},Pune:{label:"Pune ()",tehsils:["Pune City","Haveli","Ambegaon","Baramati","Bhor","Daund","Indapur","Junnar","Khed","Maval","Mulshi","Purandar","Shirur","Velhe"]},Raigad:{label:"Raigad ()",tehsils:["Alibag","Karjat","Khalapur","Mahad","Mangaon","Mhasla","Murud","Panvel","Pen","Poladpur","Roha","Shrivardhan","Sudhagad (Pali)","Tala","Uran"]},Ratnagiri:{label:"Ratnagiri ()",tehsils:["Ratnagiri","Chiplun","Dapoli","Guhagar","Khed","Lanja","Mandangad","Rajapur","Sangameshwar"]},Sangli:{label:"Sangli ()",tehsils:["Miraj","Atpadi","Jat","Kadegaon","Kavathe Mahankal","Khanapur (Vita)","Palus","Shirala","Tasgaon","Walwa (Islampur)"]},Satara:{label:"Satara ()",tehsils:["Satara","Jaoli","Karad","Khandala","Khatav","Koregaon","Mahabaleshwar","Man","Patan","Phaltan","Wai"]},Sindhudurg:{label:"Sindhudurg ()",tehsils:["Kudal","Devgad","Dodamarg","Kankavli","Malvan","Sawantwadi","Vaibhavwadi","Vengurla"]},Solapur:{label:"Solapur ()",tehsils:["Solapur North","Solapur South","Akkalkot","Barshi","Karmala","Madha","Malshiras","Mangalvedha","Mohol","Pandharpur","Sangola"]},Thane:{label:"Thane ()",tehsils:["Thane","Ambarnath","Bhiwandi","Kalyan","Murbad","Shahapur","Ulhasnagar"]},Wardha:{label:"Wardha ()",tehsils:["Wardha","Arvi","Ashti","Deoli","Hinganghat","Karanja","Samudrapur","Seloo"]},Washim:{label:"Washim ()",tehsils:["Washim","Karanja","Malegaon","Mangrulpir","Manora","Risod"]},Yavatmal:{label:"Yavatmal ()",tehsils:["Yavatmal","Arni","Babhulgaon","Darwha","Digras","Ghatanji","Kalamb","Kelapur (Pandharkawada)","Mahagaon","Maregaon","Ner","Pusad","Ralegaon","Umarkhed","Wani","Zari Jamni"]}}},BV=()=>Object.keys(wn).sort(),zV=t=>!t||!wn[t]?[]:Object.keys(wn[t]).sort(),yS=(t,e)=>!t||!e||!wn[t]||!wn[t][e]?null:wn[t][e],$V=(t,e)=>{const n=yS(t,e);return n?n.tehsils.sort():[]},vS=()=>{let t=[];return Object.values(wn).forEach(e=>{t=[...t,...Object.keys(e)]}),[...new Set(t)].sort()},wS=()=>{let t=[];return Object.values(wn).forEach(e=>{Object.values(e).forEach(n=>{n.tehsils&&(t=[...t,...n.tehsils])})}),[...new Set(t)].sort()},CL=Object.freeze(Object.defineProperty({__proto__:null,getAllDistricts:vS,getAllTehsils:wS,getDistrictData:yS,getDistricts:zV,getStates:BV,getTehsils:$V,locationData:wn},Symbol.toStringTag,{value:"Module"})),wf="zpka_3e36f919d14b482bab42a3647f93c313_8fbe4bad",Ef="http://dataservice.accuweather.com",Tf=new Map,HV=30*60*1e3,qV=async(t,e=5)=>{const n=`aw-${t}`,r=Tf.get(n);if(r&&Date.now()-r.timestamp<HV)return r.data;try{const i=await WV(t);if(!i)throw new Error("Location not found");const[s,o]=await Promise.all([fetch(`${Ef}/currentconditions/v1/${i.Key}?apikey=${wf}&details=true`),fetch(`${Ef}/forecasts/v1/daily/5day/${i.Key}?apikey=${wf}&metric=true`)]);if(!s.ok||!o.ok)throw new Error("Weather API Error");const l=await s.json(),c=await o.json(),u=KV(l[0],c,i);return Tf.set(n,{data:u,timestamp:Date.now()}),u}catch(i){return console.error("Weather Fail:",i),GV(t)}},PL=()=>{Tf.clear(),console.log(" Weather cache cleared")},WV=async t=>{const e=`${Ef}/locations/v1/cities/search?apikey=${wf}&q=${encodeURIComponent(t)}`,r=await(await fetch(e)).json();return r&&r.length>0?r[0]:null},KV=(t,e,n)=>{var r,i,s,o,l,c,u,d,f,m,y,P,C,x;return{current:{temp:Math.round(t.Temperature.Metric.Value),condition:t.WeatherText,humidity:t.RelativeHumidity,wind:`${Math.round(((s=(i=(r=t.Wind)==null?void 0:r.Speed)==null?void 0:i.Metric)==null?void 0:s.Value)||0)} km/h`,feelsLike:Math.round(((l=(o=t.RealFeelTemperature)==null?void 0:o.Metric)==null?void 0:l.Value)||t.Temperature.Metric.Value),uv:t.UVIndex,visibility:(u=(c=t.Visibility)==null?void 0:c.Metric)==null?void 0:u.Value,pressure:(f=(d=t.Pressure)==null?void 0:d.Metric)==null?void 0:f.Value,windDir:(y=(m=t.Wind)==null?void 0:m.Direction)==null?void 0:y.English,rainProb:((x=(C=(P=t.PrecipitationSummary)==null?void 0:P.Precipitation)==null?void 0:C.Metric)==null?void 0:x.Value)>0?"High":"Low",icon:Lv(t.WeatherIcon),lastUpdated:new Date(t.LocalObservationDateTime).toLocaleTimeString()},forecast:e.DailyForecasts.map((I,v)=>{var j,M;const A=new Date(I.Date);return{day:v===0?"Today":A.toLocaleDateString("en-US",{weekday:"short"}),date:I.Date,temp:Math.round((I.Temperature.Maximum.Value+I.Temperature.Minimum.Value)/2),maxTemp:Math.round(I.Temperature.Maximum.Value),minTemp:Math.round(I.Temperature.Minimum.Value),condition:I.Day.IconPhrase,icon:Lv(I.Day.Icon),rainChance:I.Day.PrecipitationProbability||0,humidity:50,maxWind:Math.round(((M=(j=I.Day.Wind)==null?void 0:j.Speed)==null?void 0:M.Value)||0)}}),alerts:[],location:{name:n.LocalizedName,region:n.AdministrativeArea.LocalizedName,country:n.Country.LocalizedName}}},Lv=t=>t>=1&&t<=5?"":t>=6&&t<=8?"":t===11?"":t>=12&&t<=14||t===18?"":t>=15&&t<=17?"":t>=19&&t<=21||t>=22&&t<=29?"":t>=33&&t<=36?"":"",GV=t=>{const e=t.split(",")[0].trim();console.log(" Using fallback weather data for",e);let n="Unknown Region";for(const[r,i]of Object.entries(wn)){if(i[e]){n=r;break}for(const s of Object.values(i))if(s.tehsils&&s.tehsils.includes(e)){n=r;break}if(n!=="Unknown Region")break}return n==="Unknown Region"&&(n="Madhya Pradesh"),{current:{temp:24,condition:"Partly Cloudy",humidity:45,wind:"12 km/h",feelsLike:25,uv:5,visibility:10,pressure:1013,windDir:"NW",rainProb:"10%",lastUpdated:new Date().toLocaleString()},forecast:[{day:"Today",temp:24,maxTemp:28,minTemp:18,icon:"",condition:"Partly Cloudy",rainChance:10},{day:"Tomorrow",temp:25,maxTemp:29,minTemp:19,icon:"",condition:"Sunny",rainChance:0},{day:"Day 3",temp:23,maxTemp:27,minTemp:17,icon:"",condition:"Cloudy",rainChance:20},{day:"Day 4",temp:24,maxTemp:28,minTemp:18,icon:"",condition:"Partly Cloudy",rainChance:10},{day:"Day 5",temp:25,maxTemp:29,minTemp:19,icon:"",condition:"Sunny",rainChance:0}],alerts:[],location:{name:t,region:n,country:"India"},isFallback:!0}},QV=t=>{var l;const e=[],n=t.current,r=t.forecast;t.alerts&&t.alerts.length>0&&t.alerts.forEach(c=>{e.push({type:"official",severity:"high",icon:"",title:c.headline||"Weather Alert",message:c.desc||c.event,messageHindi:"  ",source:"Official Weather Alert"})}),n.temp>=40&&e.push({type:"heatwave",severity:n.temp>=45?"severe":"high",icon:"",title:"Extreme Heat Alert",titleHindi:"  ",message:`Temperature is ${n.temp}C! Avoid midday field work (11 AM - 4 PM). Increase irrigation frequency. Protect livestock from heat stress.`,messageHindi:` ${n.temp}C !        (11 AM - 4 PM)       `,actions:["Increase irrigation frequency","Apply mulch to conserve moisture","Avoid spraying during peak heat","Provide shade for livestock"]}),n.temp<=8&&e.push({type:"coldwave",severity:n.temp<=5?"severe":"medium",icon:"",title:"Cold Wave Alert",titleHindi:"  ",message:`Temperature dropped to ${n.temp}C! Frost risk high. Protect sensitive crops with covers. Light irrigation may help prevent frost damage.`,messageHindi:` ${n.temp}C   !               `,actions:["Cover sensitive crops","Light irrigation before dawn","Use smoke/smudge pots","Delay harvesting"]});const i=parseInt(n.wind);i>=40&&e.push({type:"wind",severity:i>=60?"high":"medium",icon:"",title:"High Wind Warning",titleHindi:"  ",message:`Wind speed ${i} km/h! Postpone all spraying operations. Risk of crop lodging. Secure loose items and structures.`,messageHindi:`   ${i} km/h!              `,actions:["Postpone spraying","Check crop support","Secure farm equipment","Delay drone operations"]});const s=parseInt(n.rainProb);(s>=70||((l=r[0])==null?void 0:l.rainChance)>=70)&&e.push({type:"rain",severity:s>=90?"high":"medium",icon:"",title:"Heavy Rain Expected",titleHindi:"   ",message:`${s}% chance of rain! Postpone fertilizer/pesticide application. Ensure proper field drainage. Harvest ready crops if possible.`,messageHindi:`${s}%   ! /             `,actions:["Postpone spraying","Check drainage systems","Harvest mature crops","Protect stored grain"]}),n.visibility<1&&e.push({type:"fog",severity:"medium",icon:"",title:"Dense Fog Alert",titleHindi:"  ",message:`Very low visibility (${n.visibility} km). Delay early morning field work. Increased disease risk in crops. Monitor for fungal infections.`,messageHindi:`   (${n.visibility} km)                  `,actions:["Delay morning activities","Monitor for fungal diseases","Ensure proper ventilation","Avoid spraying"]});const o=n.condition.toLowerCase();return(o.includes("thunder")||o.includes("storm"))&&e.push({type:"thunderstorm",severity:"high",icon:"",title:"Thunderstorm Warning",titleHindi:"- ",message:"Thunderstorm activity detected! Stay indoors. Avoid open fields. Unplug electrical equipment. Secure livestock and equipment.",messageHindi:"-  !                 ",actions:["Stay indoors","Avoid open fields","Unplug equipment","Secure livestock"]}),n.humidity>=85&&e.push({type:"humidity",severity:"low",icon:"",title:"High Humidity - Pest Risk",titleHindi:"  -  ",message:`Humidity at ${n.humidity}%. Increased risk of pests and fungal diseases. Monitor crops closely. Consider preventive measures.`,messageHindi:` ${n.humidity}%                 `,actions:["Monitor for pests","Check for fungal diseases","Improve air circulation","Consider preventive spray"]}),e},RL=t=>{switch(t){case"severe":return"#D32F2F";case"high":return"#F44336";case"medium":return"#FF9800";case"low":return"#FFC107";default:return"#2196F3"}},xL=t=>{switch(t){case"severe":return 4;case"high":return 3;case"medium":return 2;case"low":return 1;default:return 0}},cn=t=>{const e=new Date;return e.setMonth(e.getMonth()+t),e.toISOString().split("T")[0]},un=t=>{const e=new Date;return e.setMonth(e.getMonth()-t),e.toISOString().split("T")[0]},YV=[{id:1,title:"PM Kusum Yojana (Solar Pump)",titleHi:"   ( )",titleMr:"   ( )",benefit:"Up to 90% Subsidy on Solar Pumps",benefitHi:"   90%   ",benefitMr:"  %  ",applyText:"Visit Portal",applyUrl:"https://pmkusum.mnre.gov.in",color:"#FF9800",startDate:un(11),validUntil:cn(12)},{id:101,title:"Kisan Suvidha Portal",titleHi:"  ",titleMr:"  ",benefit:"Central Govt All-in-One Agri Services",benefitHi:"       ",benefitMr:"      ",applyText:"Visit Now",applyUrl:"https://kisansuvidha.gov.in/",color:"#009688",startDate:un(1),validUntil:cn(24)},{id:102,title:"MP Krishi (Govt of MP)",titleHi:"..  ",titleMr:"   ",benefit:"All MP Govt Schemes & Updates",benefitHi:"     ",benefitMr:"      ",applyText:"Visit Now",applyUrl:"https://mpkrishi.mp.gov.in/",color:"#2E7D32",startDate:un(1),validUntil:cn(24)},{id:2,title:"Tractor Subsidy Scheme",titleHi:"  ",titleMr:"  ",benefit:"20-50% Subsidy on new Tractors",benefitHi:"   20-50%   ",benefitMr:"  -%  ",applyText:"MP Krishi Yantra",applyUrl:"https://dbt.mpdage.org",color:"#4CAF50",startDate:un(1),validUntil:cn(6)},{id:3,title:"PM Fasal Bima Yojana",titleHi:"   ",titleMr:"   ",benefit:"Crop insurance against natural calamities",benefitHi:"      ",benefitMr:"     ",applyText:"Contact Bank/CSC",applyUrl:"https://pmfby.gov.in",color:"#2196F3",startDate:un(6),validUntil:cn(12)},{id:4,title:"Kisan Credit Card (KCC)",titleHi:"   (KCC)",titleMr:"   (KCC)",benefit:"Low interest loans (4%) for farming needs",benefitHi:"     (4%)  ",benefitMr:"   (%) ",applyText:"Visit Bank",applyUrl:"https://www.myscheme.gov.in/schemes/kcc",color:"#9C27B0",startDate:un(23),validUntil:cn(15)},{id:5,title:"Soil Health Card Scheme",titleHi:"   ",titleMr:"   ",benefit:"Free Soil Testing & Fertilizer advice",benefitHi:"      ",benefitMr:"     ",applyText:"Contact Agri Dept",applyUrl:"https://soilhealth.dac.gov.in",color:"#795548",startDate:un(11),validUntil:cn(12)},{id:6,title:"Organic Farming (PKVY)",titleHi:"    ( )",titleMr:"    ( )",benefit:"Rs. 50,000/ha subsidy for Organic Farming",benefitHi:"    50,000 /  ",benefitMr:"  , / ",applyText:"Agri Dept Reg.",applyUrl:"https://pgsindia-ncof.gov.in",color:"#8BC34A",startDate:un(0),validUntil:cn(24)},{id:7,title:"Pradhan Mantri Krishi Sinchai Yojana",titleHi:"   ",titleMr:"   ",benefit:"Subsidy on Drip/Sprinkler Irrigation",benefitHi:"      ",benefitMr:"     ",applyText:"MPFSTS Portal",applyUrl:"https://mpfsts.mp.gov.in",color:"#03A9F4",startDate:un(7),validUntil:cn(10)},{id:8,title:"e-NAM (National Agriculture Market)",titleHi:"- (  )",titleMr:"- (  )",benefit:"Sell crops online at best prices across India",benefitHi:"         ",benefitMr:"      ",applyText:"Register Online",applyUrl:"https://www.enam.gov.in",color:"#FF5722",startDate:un(11),validUntil:cn(999)}],JV=t=>{const e=new Date(t),r=Math.abs(new Date-e);return Math.ceil(r/(1e3*60*60*24))<=30},NL=t=>Bc(t||"default"),XV=[{name:"Wheat ()",icon:"",category:"Grains",basePrice:2200,variance:300},{name:"Soybean ()",icon:"",category:"Pulses",basePrice:4200,variance:600},{name:"Cotton ()",icon:"",category:"Others",basePrice:6500,variance:500},{name:"Gram (Chana/)",icon:"",category:"Pulses",basePrice:5800,variance:400},{name:"Maize ()",icon:"",category:"Grains",basePrice:1800,variance:250},{name:"Onion ()",icon:"",category:"Vegetables",basePrice:2e3,variance:800},{name:"Potato ()",icon:"",category:"Vegetables",basePrice:800,variance:300},{name:"Tomato ()",icon:"",category:"Vegetables",basePrice:1500,variance:600},{name:"Garlic ()",icon:"",category:"Vegetables",basePrice:12500,variance:2e3},{name:"Mustard ()",icon:"",category:"Pulses",basePrice:5200,variance:400},{name:"Tur ()",icon:"",category:"Pulses",basePrice:9500,variance:800},{name:"Moong ()",icon:"",category:"Pulses",basePrice:7200,variance:600},{name:"Banana ()",icon:"",category:"Fruits",basePrice:1200,variance:400},{name:"Pomegranate ()",icon:"",category:"Fruits",basePrice:6e3,variance:1500},{name:"Orange ()",icon:"",category:"Fruits",basePrice:2500,variance:800},{name:"Grapes ()",icon:"",category:"Fruits",basePrice:6e3,variance:1200},{name:"Apple ()",icon:"",category:"Fruits",basePrice:8e3,variance:1500},{name:"Watermelon ()",icon:"",category:"Fruits",basePrice:1500,variance:400},{name:"Mango ()",icon:"",category:"Fruits",basePrice:5e3,variance:1e3}],mo=t=>{var e=Math.sin(t++)*1e4;return e-Math.floor(e)},Bc=(t,e=new Date)=>{const n=e.toISOString().split("T")[0].replace(/-/g,""),r=t.length+t.charCodeAt(0),i=parseInt(n)+r;return XV.filter((s,o)=>o<5?mo(i+o)>.1:mo(i+o)>.4).map((s,o)=>{const l=mo(i+o+100),c=Math.floor((l-.5)*s.variance*2),u=s.basePrice+c-Math.floor(mo(i+o)*200),d=s.basePrice+c+Math.floor(mo(i+o+50)*300),f=Math.floor((u+d)/2);return{...s,unit:"Quintal",min:Math.max(u,100),max:Math.max(d,u),modal:f,date:e.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}})},ES=D.createContext(),ZV=()=>D.useContext(ES),eM=({children:t})=>{const[e,n]=D.useState([]),[r,i]=D.useState(0);D.useEffect(()=>{const c=localStorage.getItem("kisan_alerts");if(c){const u=JSON.parse(c);n(u),i(u.filter(d=>!d.read).length)}},[]),D.useEffect(()=>{localStorage.setItem("kisan_alerts",JSON.stringify(e)),i(e.filter(c=>!c.read).length)},[e]);const s=D.useCallback(c=>{n(u=>u.find(f=>f.id===c.id&&f.type===c.type||f.title===c.title&&f.timestamp>Date.now()-36e5)?u:[{...c,read:!1,timestamp:Date.now()},...u].slice(0,20))},[]),o=c=>{n(u=>u.map(d=>d.id===c?{...d,read:!0}:d))},l=()=>{n([])};return D.useEffect(()=>{const c=async()=>{try{const y=await qV("Indore");QV(y).forEach(C=>{var x;(C.severity==="high"||C.severity==="severe")&&s({id:`weather-${C.type}-${Date.now()}`,type:"weather",severity:C.severity,icon:C.icon,title:C.title,titleHi:C.titleHindi,titleMr:C.titleMarathi||C.titleHindi,message:C.message,messageHi:C.messageHindi,messageMr:C.messageMarathi||C.messageHindi,whatsappMsg:` *Weather Alert:* ${C.title} (${C.titleHindi})
${C.message}
Take action: ${(x=C.actions)==null?void 0:x.join(", ")}`})})}catch(y){console.error("Alert detection weather error:",y)}const d=Bc("Indore",new Date),f=new Date;f.setDate(f.getDate()-1);const m=Bc("Indore",f);d.forEach(y=>{const P=m.find(C=>C.name===y.name);if(P){const C=(y.modal-P.modal)/P.modal*100;C<=-10&&s({id:`price-drop-${y.name}-${Date.now()}`,type:"market-drop",severity:"medium",icon:"",title:`Price Drop: ${y.name}`,titleHi:`  : ${y.name.split(" (")[1].replace(")","")}`,titleMr:` : ${y.name.split(" (")[1].replace(")","")}`,message:`Modal price dropped by ${Math.abs(C).toFixed(1)}% to ${y.modal}/qtl in Indore Mandi.`,messageHi:`   ${y.name.split(" (")[1].replace(")","")}   ${Math.abs(C).toFixed(1)}%  ${y.modal}   `,messageMr:`  ${y.name.split(" (")[1].replace(")","")}   ${Math.abs(C).toFixed(1)}%  ${y.modal}  .`,whatsappMsg:` *Mandi Alert:* Price Drop in ${y.name}
Dropped by ${Math.abs(C).toFixed(1)}% to ${y.modal}/qtl.
Stay updated on KisanBazaar!`}),C>=10&&s({id:`price-up-${y.name}-${Date.now()}`,type:"market-up",severity:"medium",icon:"",title:`Price Increase: ${y.name}`,titleHi:`  : ${y.name.split(" (")[1].replace(")","")}`,titleMr:` : ${y.name.split(" (")[1].replace(")","")}`,message:`Modal price increased by ${C.toFixed(1)}% to ${y.modal}/qtl! Good time to sell.`,messageHi:`${y.name.split(" (")[1].replace(")","")}   ${C.toFixed(1)}%  ${y.modal}   !     `,messageMr:`${y.name.split(" (")[1].replace(")","")}   ${C.toFixed(1)}%  ${y.modal}  !    .`,whatsappMsg:` *Mandi Alert:* Price Increase in ${y.name}
Increased by ${C.toFixed(1)}% to ${y.modal}/qtl. Good time to sell!`})}}),YV.forEach(y=>{JV(y.startDate)&&s({id:`scheme-${y.id}`,type:"scheme",severity:"low",icon:"",title:`New Scheme: ${y.title}`,titleHi:` : ${y.titleHi}`,titleMr:` : ${y.titleMr||y.titleHi}`,message:y.benefit,messageHi:y.benefitHi,messageMr:y.benefitMr||y.benefitHi,whatsappMsg:` *Govt Scheme:* ${y.title}
${y.benefit}
Apply here: ${y.applyUrl}`})})};c();const u=setInterval(c,36e5);return()=>clearInterval(u)},[s]),S.jsx(ES.Provider,{value:{alerts:e,unreadCount:r,markAsRead:o,clearAll:l,addAlert:s},children:t})},TS=D.createContext(),tM=()=>D.useContext(TS),nM=({children:t})=>{const{t:e}=Ai(),n=[{id:"mock-1",title:"Fresh Tomato",title_hi:" ",title_mr:" ",commodity:"tomato",type:"Sell",category:"Vegetables",price:"20",unit:"kg",quantity:"500",location:"Burhanpur",seller:"Ramesh Kumar",contactMobile:"919876543210",image:"https://images.unsplash.com/photo-1592924357228-91a4daadcfea?auto=format&fit=crop&w=300&q=80",description:"Desi tomato, fully organic.",description_hi:" ,    ",description_mr:" ,  .",timestamp:Date.now()},{id:"mock-2",title:"Basmati Rice",title_hi:" ",title_mr:" ",commodity:"rice",type:"Sell",category:"Grains",price:"4500",unit:"quintal",quantity:"10",location:"Nepanagar",seller:"Suresh Patel",contactMobile:"919876543211",image:"https://images.unsplash.com/photo-1586201375761-83865001e31c?auto=format&fit=crop&w=300&q=80",description:"High quality Basmati rice.",description_hi:"    ",description_mr:"   .",timestamp:Date.now()},{id:"mock-3",title:"Banana",title_hi:"",title_mr:"",commodity:"banana",type:"Sell",category:"Fruits",price:"1500",unit:"quintal",quantity:"50",location:"Ambada",seller:"Mukesh Bhai",contactMobile:"919876543212",image:"https://images.unsplash.com/photo-1571771894821-ce9b6c11b08e?auto=format&fit=crop&w=300&q=80",description:"Sweet and fresh bananas.",description_hi:"    ",description_mr:"   .",timestamp:Date.now()},{id:"mock-4",title:"Need Tomato",title_hi:" ",title_mr:" ",commodity:"tomato",type:"Buy",category:"Vegetables",price:"18",unit:"kg",quantity:"200",location:"Indore",seller:"Rahul Singh",contactMobile:"919876543213",description:"Looking for bulk tomatoes.",description_hi:"   ",description_mr:"    .",timestamp:Date.now()}],[r,i]=D.useState([]),[s,o]=D.useState([]),[l,c]=D.useState(!0);D.useEffect(()=>{const M=Zy(_l(ei,"listings"),ev("timestamp","desc")),w=iv(M,_=>{const E=_.docs.map(k=>({id:k.id,...k.data()}));E.length===0?i(n):i(E),c(!1)},_=>{console.error("Error fetching listings:",_),i(n),c(!1)});return()=>w()},[]),D.useEffect(()=>{const M=Zy(_l(ei,"buyerRequests"),ev("timestamp","desc")),w=iv(M,_=>{const E=_.docs.map(k=>({id:k.id,...k.data()}));o(E)},_=>{console.error("Error fetching buyer requests:",_)});return()=>w()},[]);const u=async M=>{try{const w=await rv(_l(ei,"listings"),{...M,timestamp:Date.now()});console.log("Document written with ID: ",w.id)}catch(w){console.error("Error adding document: ",w),alert("Error saving listing. Please check your connection.")}},d=async M=>{try{await rv(_l(ei,"buyerRequests"),{...M,timestamp:Date.now()})}catch(w){throw console.error("Error adding buyer request: ",w),w}},f=async(M,w)=>{if(!(typeof M=="string"&&M.startsWith("mock-")))try{const _=Nc(ei,"listings",M);await BN(_,w)}catch(_){console.error("Error updating document: ",_)}},m=async M=>{if(typeof M=="string"&&M.startsWith("mock-")){i(w=>w.filter(_=>_.id!==M));return}try{await zN(Nc(ei,"listings",M))}catch(w){console.error("Error deleting document: ",w)}},y=M=>r.filter(w=>w.contactMobile===M),[P,C]=D.useState(!1),x=()=>{C(M=>!M)},I=()=>{const M=new Map;return r.forEach(w=>{if(w.seller&&!M.has(w.seller))M.set(w.seller,{name:w.seller,location:w.location||`${w.district||""}, ${w.state||""}`,state:w.state||"",district:w.district||"",tehsil:w.tehsil||"",products:[w.title||w.commodity],contactMobile:w.contactMobile||"",rating:(Math.random()*2+3).toFixed(1)});else if(w.seller){const _=M.get(w.seller);_.products.includes(w.title||w.commodity)||_.products.push(w.title||w.commodity)}}),Array.from(M.values())},v=(M,w,_=null)=>{if(!r||!Array.isArray(r))return{eligible:!0};const E=r.filter(te=>te&&te.contactMobile===M),k=_?E.filter(te=>te.id!==_):E;if(k.length>=5)return{eligible:!1,reason:"limit",message:e("limit_reached")};if(!w||typeof w!="string")return{eligible:!0};const T=w.toLowerCase().trim(),R=Date.now()-7*24*60*60*1e3;return k.filter(te=>{if(!te)return!1;const ye=(te.commodity||"").toLowerCase().trim(),Bt=new Date(te.timestamp||te.id).getTime();return ye===T&&Bt>R}).length>=2?{eligible:!1,reason:"duplicate",message:e("duplicate_limit")}:{eligible:!0}},A=(()=>{const M=new Set;return r.filter(w=>{const _=w.contactMobile||"unknown",E=(w.commodity||"").toLowerCase().trim(),k=(w.type||"Sell").toLowerCase(),T=`${_}_${E}_${k}`;return M.has(T)?!1:(M.add(T),!0)})})(),V=A.filter(M=>M.type==="Sell"),j=A.filter(M=>M.type==="Buy");return S.jsx(TS.Provider,{value:{listings:r,publicListings:A,sellerListings:V,buyerPosts:j,addListing:u,updateListing:f,deleteListing:m,getUserListings:y,isRestrictedMode:P,toggleRestriction:x,getUniqueSellers:I,checkListingEligibility:v,buyerRequests:s,addBuyerRequest:d,loading:l},children:t})};const rM="modulepreload",iM=function(t){return"/"+t},Fv={},_e=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=iM(s),s in Fv)return;Fv[s]=!0;const o=s.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!r)for(let d=i.length-1;d>=0;d--){const f=i[d];if(f.href===s&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${l}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":rM,o||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),o)return new Promise((d,f)=>{u.addEventListener("load",d),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},wl={wheat:"gehu",gehu:"wheat",gehun:"wheat",kanak:"wheat",rice:"chawal",chawal:"rice",dhaan:"rice",basmati:"rice",paddy:"rice",maize:"makka",corn:"makka",makka:"maize",bhutta:"maize",millet:"bajra",bajra:"millet",sorghum:"jowar",jowar:"sorghum",barley:"jau",jau:"barley",gram:"chana",chickpea:"chana","bengal gram":"chana",chana:"gram",channa:"gram","pigeon pea":"arhar","red gram":"arhar",arhar:"pigeon pea",tuar:"pigeon pea",toor:"pigeon pea",tur:"pigeon pea","tur dal":"arhar dal","black chana":"kala chana","kala chana":"black chana","kabuli chana":"safed chana","safed chana":"kabuli chana","dollar chana":"kabuli chana",lentil:"masoor",masoor:"lentil","black gram":"urad",urad:"black gram","green gram":"moong",mung:"green gram",moong:"green gram",soybean:"soya",soyabean:"soya",soya:"soybean",mustard:"sarson",sarson:"mustard",rai:"mustard",groundnut:"moongfali",peanut:"moongfali",moongfali:"groundnut",singdana:"groundnut",sunflower:"surajmukhi",surajmukhi:"sunflower",sesame:"til",til:"sesame",onion:"pyaz",pyaz:"onion",kanda:"onion",dungri:"onion",potato:"aloo",aloo:"potato",batata:"potato",tomato:"tamatar",tamatar:"tomato",garlic:"lahsun",lahsun:"garlic",ginger:"adrak",adrak:"ginger",chilli:"mirch",chilly:"mirch",mirch:"chilli",mirchi:"chilli",cabbage:"patta gobhi","patta gobhi":"cabbage",gobhi:"cabbage",cauliflower:"phool gobhi","phool gobhi":"cauliflower",brinjal:"baingan",eggplant:"baingan",aubergine:"baingan",baingan:"brinjal","lady finger":"bhindi",okra:"bhindi",bhindi:"lady finger",pea:"matar",peas:"matar",matar:"pea",carrot:"gajar",gajar:"carrot",radish:"mooli",mooli:"radish",spinach:"palak",palak:"spinach",fenugreek:"methi",methi:"fenugreek","bottle gourd":"lauki",lauki:"bottle gourd",ghiya:"bottle gourd","bitter gourd":"karela",karela:"bitter gourd",pumpkin:"kaddu",kaddu:"pumpkin",kashiphal:"pumpkin",cucumber:"kheera",kheera:"cucumber",kakdi:"cucumber",banana:"kela",kela:"banana",mango:"aam",aam:"mango",apple:"seb",seb:"apple",pomegranate:"anar",anar:"pomegranate",orange:"santra",santra:"orange",narangi:"orange",grapes:"angoor",angoor:"grapes",papaya:"papita",papita:"papaya",guava:"amrood",amrood:"guava",watermelon:"tarbooz",tarbooz:"watermelon",muskmelon:"kharbuja",kharbuja:"muskmelon",cotton:"kapas",kapas:"cotton",narma:"cotton",rui:"cotton",sugarcane:"ganna",ganna:"sugarcane",turmeric:"haldi",haldi:"turmeric",linseed:"alsi",alsi:"linseed","flax seed":"alsi",lemon:"nimbu",nimbu:"lemon","betel leaf":"paan",paan:"betel leaf",jute:"patshan",patshan:"jute",:"wheat",:"rice",:"rice",:"maize",:"soybean",:"millet",:"sorghum",:"barley",:"gram",:"pigeon pea",:"lentil",:"black gram",:"green gram",:"mustard",:"groundnut",:"sunflower",:"sesame",:"linseed",:"onion",:"potato",:"tomato",:"garlic",:"ginger",:"chilli",:"cabbage",:"cauliflower",:"brinjal",:"lady finger",:"pea",:"carrot",:"radish",:"spinach",:"fenugreek",:"bottle gourd",:"bitter gourd",:"pumpkin",:"cucumber",:"cucumber",:"banana",:"mango",:"apple",:"pomegranate",:"orange",:"grapes",:"papaya",:"guava",:"watermelon",:"muskmelon",:"lemon",:"cotton",:"sugarcane",:"turmeric",:"coriander",kaanda:"onion",:"onion",lasun:"garlic",lason:"garlic",:"garlic",bhendi:"lady finger",:"lady finger",:"potato",vange:"brinjal",wangy:"brinjal",:"brinjal",:"tomato","phul-kobi":"cauliflower",phulkobi:"cauliflower",flower:"cauliflower",:"cauliflower",:"cauliflower",kobi:"cabbage",:"cabbage",karale:"bitter gourd",:"bitter gourd","dudhi bhopla":"bottle gourd"," ":"bottle gourd",dodka:"ridge gourd",tura:"ridge gourd",:"ridge gourd",vatana:"peas",:"peas",tandul:"rice",bhat:"rice",taandul:"rice",:"rice",:"rice",gahu:"wheat",:"wheat",jowari:"sorghum",jwari:"sorghum",:"sorghum",bajri:"millet",:"millet",maka:"maize",:"maize",nachni:"finger millet",nagli:"finger millet",ragi:"finger millet",:"finger millet",:"finger millet",:"pigeon pea",udid:"black gram",:"black gram",mug:"green gram",:"green gram",harbara:"chickpea",:"chickpea",:"chickpea",chavli:"cowpea",lobia:"cowpea",:"cowpea",amba:"mango",hapus:"mango",:"mango",kele:"banana",keli:"banana",:"banana",:"banana",draksha:"grapes",draksh:"grapes",:"grapes",dalimb:"pomegranate",:"pomegranate",sitaphal:"custard apple","custard apple":"custard apple",:"custard apple",papai:"papaya",:"papaya",krishi:"agriculture",sheti:"agriculture",:"agriculture",:"agriculture",pike:"crops",pik:"crop",:"crops",kapani:"harvest",:"harvest",perani:"sowing",pearni:"sowing",:"sowing",sinchan:"irrigation",:"irrigation",khat:"fertilizer",khata:"fertilizer",:"fertilizer",mati:"soil",maati:"soil",:"soil",shetkari:"farmer",kisan:"farmer",:"farmer",oos:"sugarcane",us:"sugarcane",:"sugarcane",ganna:"sugarcane",halad:"turmeric",haldi:"turmeric",:"turmeric",:"turmeric",ale:"ginger",aal:"ginger",:"ginger",:"ginger",kapus:"cotton",kaapus:"cotton",:"cotton",bhuimug:"groundnut",shingdana:"groundnut",:"groundnut",:"groundnut",dalimb:"pomegranate",:"pomegranate",draksh:"grapes",:"grapes",kanda:"onion",kaanda:"onion",:"onion",batata:"potato",:"potato",tomato:"tomato",:"tomato",soyabin:"soybean",:"soybean",maka:"maize",makka:"maize",:"maize",gahu:"wheat",gahhu:"wheat",:"wheat",tandul:"rice",taandul:"rice",:"rice",bhaat:"rice",:"rice",harbhara:"gram",chana:"gram",:"gram",:"gram",tur:"pigeon pea",toor:"pigeon pea",twar:"pigeon pea",:"pigeon pea",mirchi:"chilli",mirch:"chilli",:"chilli",:"chilli",lasun:"garlic",lason:"garlic",:"garlic",kothimbir:"coriander",dhaniya:"coriander",:"coriander",:"coriander",methi:"fenugreek",:"fenugreek",:"onion",:"potato",:"tomato",:"garlic",:"ginger",:"ginger",:"chilli",:"coriander",:"brinjal",:"lady finger",:"lady finger",:"cauliflower",:"cabbage",:"cluster beans",:"drumstick",:"bitter gourd"," ":"bottle gourd",:"ridge gourd",:"sponge gourd",:"cowpea",wal:"field beans",:"field beans",:"field beans",:"french beans",:"maize",:"sorghum",:"millet",:"finger millet",:"little millet",:"little millet",:"amaranth",:"horse gram",:"moth bean",:"pigeon pea",:"green gram",:"black gram",:"lentil",:"chickpea",:"chickpea",:"pea",:"groundnut",:"groundnut",:"sunflower",:"safflower",:"linseed",:"sesame",:"mustard",:"soybean",:"cotton",:"sugarcane",:"turmeric",:"mango",:"banana",:"grapes",:"pomegranate",:"papaya",:"custard apple",:"guava",:"sapota",:"apple",:"orange",:"sweet lime",:"lemon",:"watermelon",:"muskmelon",:"coconut",:"arecanut",:"cashew nut"},jv=t=>{if(!t)return[];const e=t.toLowerCase().trim(),n=new Set([e]);wl[e]&&n.add(wl[e]);for(const[i,s]of Object.entries(wl))s===e&&n.add(i),i===e&&n.add(s);return Array.from(n).forEach(i=>{for(const[s,o]of Object.entries(wl))s===i&&n.add(o),o===i&&n.add(s)}),Array.from(n)},sM=(t,e)=>{const n=[];for(let r=0;r<=e.length;r++)n[r]=[r];for(let r=0;r<=t.length;r++)n[0][r]=r;for(let r=1;r<=e.length;r++)for(let i=1;i<=t.length;i++)e.charAt(r-1)===t.charAt(i-1)?n[r][i]=n[r-1][i-1]:n[r][i]=Math.min(n[r-1][i-1]+1,n[r][i-1]+1,n[r-1][i]+1);return n[e.length][t.length]},oM=(t,e,n=2)=>{const r=t.toLowerCase().trim(),i=e.toLowerCase().trim();return i.includes(r)?!0:r.length<3||Math.abs(r.length-i.length)>n?!1:sM(r,i)<=n},Am=[{id:"tomato",en:"Tomato",hi:"",mr:"",category:"Vegetables",unit:"Kg",icon:"",tags:["tamatar","tomato","tomatot","tometo"]},{id:"potato",en:"Potato",hi:"",mr:"",category:"Vegetables",unit:"Kg",icon:"",tags:["aalu","batata","potato","alu"]},{id:"onion",en:"Onion",hi:"",mr:"",category:"Vegetables",unit:"Kg",icon:"",tags:["pyaj","kanda","onion","pyaaj"]},{id:"cabbage",en:"Cabbage",hi:"",mr:"",category:"Vegetables",unit:"Kg",icon:"",tags:["pattagobhi","kobi","cabbage","patta gobhi"]},{id:"cauliflower",en:"Cauliflower",hi:"",mr:"",category:"Vegetables",unit:"Kg",icon:"",tags:["fulgobhi","flower","cauliflower","phool gobhi"]},{id:"brinjal",en:"Brinjal",hi:"",mr:"",category:"Vegetables",unit:"Kg",icon:"",tags:["baingan","vangi","brinjal","eggplant"]},{id:"ladyfinger",en:"Ladyfinger / Bhindi",hi:"",mr:"",category:"Vegetables",unit:"Kg",icon:"",tags:["bhindi","bhendi","bendi","ladyfinger","okra"]},{id:"carrot",en:"Carrot",hi:"",mr:"",category:"Vegetables",unit:"Kg",icon:"",tags:["gajar","carrot"]},{id:"peas",en:"Peas",hi:"",mr:"",category:"Vegetables",unit:"Kg",icon:"",tags:["matar","watana","peas"]},{id:"spinach",en:"Spinach / Palak",hi:"",mr:"",category:"Vegetables",unit:"Kg",icon:"",tags:["palak","spinach"]},{id:"methi",en:"Fenugreek / Methi",hi:"",mr:"",category:"Vegetables",unit:"Kg",icon:"",tags:["methi","menthi","fenugreek"]},{id:"coriander",en:"Coriander",hi:"",mr:"",category:"Vegetables",unit:"Kg",icon:"",tags:["dhaniya","kothimbir","coriander","dhanya"]},{id:"chilli",en:"Green Chilli",hi:" ",mr:" ",category:"Vegetables",unit:"Kg",icon:"",tags:["mirchi","chilli","mirch"]},{id:"cucumber",en:"Cucumber",hi:"",mr:"",category:"Vegetables",unit:"Kg",icon:"",tags:["khira","kakdi","cucumber"]},{id:"bittergourd",en:"Bitter Gourd",hi:"",mr:"",category:"Vegetables",unit:"Kg",icon:"",tags:["karela","karle","bitter gourd"]},{id:"bottlegourd",en:"Bottle Gourd",hi:"",mr:" ",category:"Vegetables",unit:"Kg",icon:"",tags:["lauki","dudhi","bottle gourd"]},{id:"pumpkin",en:"Pumpkin",hi:"",mr:"",category:"Vegetables",unit:"Kg",icon:"",tags:["kaddu","bhopla","pumpkin"]},{id:"radish",en:"Radish",hi:"",mr:"",category:"Vegetables",unit:"Kg",icon:"",tags:["mooli","mula","radish","muli"]},{id:"capsicum",en:"Capsicum",hi:" ",mr:" ",category:"Vegetables",unit:"Kg",icon:"",tags:["shimlapuri","shimla mirch","capsicum"]},{id:"drumstick",en:"Drumstick",hi:"",mr:"",category:"Vegetables",unit:"Kg",icon:"",tags:["shevga","sahjan","drumstick"]},{id:"banana",en:"Banana",hi:"",mr:"",category:"Fruits",unit:"Kg",icon:"",tags:["kela","keli","banana"]},{id:"mango",en:"Mango",hi:"",mr:"",category:"Fruits",unit:"Kg",icon:"",tags:["aam","amba","mango"]},{id:"apple",en:"Apple",hi:"",mr:"",category:"Fruits",unit:"Kg",icon:"",tags:["seb","safarachand","apple"]},{id:"orange",en:"Orange",hi:"",mr:"",category:"Fruits",unit:"Kg",icon:"",tags:["santara","orange"]},{id:"grapes",en:"Grapes",hi:"",mr:"",category:"Fruits",unit:"Kg",icon:"",tags:["angoor","draksha","grapes","black grapes","green grapes"]},{id:"pomegranate",en:"Pomegranate",hi:"",mr:"",category:"Fruits",unit:"Kg",icon:"",tags:["anaar","dalimb","pomegranate"]},{id:"papaya",en:"Papaya",hi:"",mr:"",category:"Fruits",unit:"Kg",icon:"",tags:["papita","papai","papaya"]},{id:"watermelon",en:"Watermelon",hi:"",mr:"",category:"Fruits",unit:"Kg",icon:"",tags:["tarbuj","tarbhuj","watermelon"]},{id:"guava",en:"Guava",hi:"",mr:"",category:"Fruits",unit:"Kg",icon:"",tags:["amrud","peru","guava"]},{id:"lemon",en:"Lemon",hi:"",mr:"",category:"Fruits",unit:"Kg",icon:"",tags:["nimbu","limbu","lemon"]},{id:"wheat",en:"Wheat",hi:"",mr:"",category:"Grains",unit:"Quintal",icon:"",tags:["gehu","gahu","wheat"]},{id:"rice",en:"Rice",hi:"",mr:"",category:"Grains",unit:"Quintal",icon:"",tags:["chawal","tandul","rice","paddy"]},{id:"maize",en:"Maize",hi:"",mr:"",category:"Grains",unit:"Quintal",icon:"",tags:["makka","maka","maize","corn"]},{id:"bajra",en:"Pearl Millet",hi:"",mr:"",category:"Grains",unit:"Quintal",icon:"",tags:["bajra","millet"]},{id:"jowar",en:"Sorghum",hi:"",mr:"",category:"Grains",unit:"Quintal",icon:"",tags:["jowar","jawari","sorghum"]},{id:"barley",en:"Barley",hi:"",mr:"",category:"Grains",unit:"Quintal",icon:"",tags:["jau","barley"]},{id:"chickpea",en:"Chickpea",hi:"",mr:"",category:"Pulses",unit:"Quintal",icon:"",tags:["chana","harbhara","chickpea","gram"]},{id:"pigeon_pea",en:"Pigeon Pea",hi:" ",mr:" ",category:"Pulses",unit:"Quintal",icon:"",tags:["tuar","tur","pigeon pea","tur dal","toor","arhar"]},{id:"moong",en:"Green Gram",hi:"",mr:"",category:"Pulses",unit:"Quintal",icon:"",tags:["moong","mug","green gram"]},{id:"urad",en:"Black Gram",hi:"",mr:"",category:"Pulses",unit:"Quintal",icon:"",tags:["urad","udid","black gram"]},{id:"masoor",en:"Lentil",hi:"",mr:"",category:"Pulses",unit:"Quintal",icon:"",tags:["masur","lentil"]},{id:"soybean",en:"Soybean",hi:"",mr:"",category:"Oilseeds",unit:"Quintal",icon:"",tags:["soyabean","soybean"]},{id:"groundnut",en:"Groundnut",hi:"",mr:"",category:"Oilseeds",unit:"Quintal",icon:"",tags:["mungfali","shengdana","groundnut","peanut"]},{id:"mustard",en:"Mustard",hi:"",mr:"",category:"Oilseeds",unit:"Quintal",icon:"",tags:["sarson","mohari","mustard"]},{id:"sunflower",en:"Sunflower",hi:"",mr:"",category:"Oilseeds",unit:"Quintal",icon:"",tags:["surajmukhi","suryaphul","sunflower"]},{id:"cotton",en:"Cotton",hi:"",mr:"",category:"Cash Crops",unit:"Quintal",icon:"",tags:["kapaas","kapus","cotton"]},{id:"sugarcane",en:"Sugarcane",hi:"",mr:"",category:"Cash Crops",unit:"Ton",icon:"",tags:["ganna","us","sugarcane"]},{id:"turmeric",en:"Turmeric",hi:"",mr:"",category:"Spices",unit:"Quintal",icon:"",tags:["haldi","halad","turmeric"]},{id:"ginger",en:"Ginger",hi:"",mr:"",category:"Spices",unit:"Kg",icon:"",tags:["adrak","ale","ginger"]},{id:"garlic",en:"Garlic",hi:"",mr:"",category:"Spices",unit:"Kg",icon:"",tags:["lahsun","lasun","garlic"]}],DL=t=>{if(!t||t.length<1)return[];const e=t.toLowerCase().trim();return Am.filter(n=>{const r=n.en.toLowerCase().includes(e)||n.hi.includes(e)||n.mr.includes(e)||n.id.includes(e),i=n.tags&&n.tags.some(s=>s.toLowerCase().includes(e));return r||i}).slice(0,8)},aM=t=>Am.find(e=>e.id===t),OL=t=>{const e=aM(t);return e?e.unit:"Kg"},Uv=["Wheat","Rice","Maize","Soybean","Black Chana","Kabuli Chana","Green Gram","Black Gram","Tur Dal","Mustard","Barley","Millet","Sorghum","Linseed","Banana","Mango","Orange","Papaya","Grapes","Pomegranate","Apple","Guava","Watermelon","Muskmelon","Lemon","Onion","Potato","Tomato","Brinjal","Cabbage","Cauliflower","Okra","Cucumber","Pumpkin","Radish","Carrot","Spinach","Bottle Gourd","Bitter Gourd","Peas","Garlic","Ginger","Chilly","Coriander","Fenugreek","Lady Finger","Cotton","Sugarcane","Turmeric","Jute","Tobacco","Betel Leaf","Groundnut"],lM=["Indore","Bhopal","Ujjain","Dewas","Jabalpur","Pune","Ahmednagar","Nashik","Nagpur","Jaipur"],cM=()=>{const[t,e]=D.useState(""),[n,r]=D.useState([]),[i,s]=D.useState("Buyers"),o=ka(),{user:l}=km(),{t:c,language:u}=Ai();D.useEffect(()=>{(l==null?void 0:l.role)==="buyer"?s("Sellers"):s("Buyers")},[l]);const{publicListings:d}=tM();return D.useEffect(()=>{if(!t.trim()){const E={};d.forEach(R=>{const b=(R.commodity||"").toLowerCase().trim();b&&(E[b]=(E[b]||0)+1)});let k=Object.entries(E).sort((R,b)=>b[1]-R[1]).slice(0,5).map(([R])=>R);k.length===0&&(k=["Wheat","Soybean","Tomato","Onion","Milk"]);const T=k.map(R=>{const b=R.charAt(0).toUpperCase()+R.slice(1);let te=b;return Uv.map(ye=>ye.toLowerCase()),{text:` ${te} (${c("trending")})`,type:"Market",term:b}});r(T);return}if(t.length<2){r([]);return}const m=t.toLowerCase();let y=[];const P=new Set;Uv.forEach(E=>{jv(E).some(R=>{const b=R.toLowerCase();return b.includes(m)||m.includes(b)||oM(m,b,1)})&&P.add(E)});const C=vS(),x=wS(),I=C.filter(E=>E.toLowerCase().includes(m)||m.includes(E.toLowerCase())),v=x.filter(E=>E.toLowerCase().includes(m)||m.includes(E.toLowerCase())),A=lM.filter(E=>E.toLowerCase().includes(m)),V=new Set([...I,...v,...A]),j=m.includes("sow")||m.includes("buai")||m.includes("buaie")||m.includes("seed"),M=m.includes("harvest")||m.includes("katai")||m.includes("cutting"),w=m.includes("care")||m.includes("tips")||m.includes("rog")||m.includes("medicine"),_=m.includes("weather")||m.includes("mosam")||m.includes("mausam");(_||V.size>0)&&V.forEach(E=>{y.push({text:`${E} ${c("weather_label")}`,type:"Weather",term:E})}),Array.from(P).forEach(E=>{const k=jv(E),T=Am.find(ye=>ye.en.toLowerCase()===E.toLowerCase());let R=E;T&&(u==="hi"?R=T.hi:u==="mr"?R=T.mr:R=T.en);const b=d.filter(ye=>{const Bt=(ye.title||"").toLowerCase(),kn=(ye.commodity||"").toLowerCase(),z=(ye.type||"").toLowerCase();return(z==="sell"||!z)&&k.some(X=>Bt.includes(X)||kn.includes(X))}).length,te=d.filter(ye=>{const Bt=(ye.title||"").toLowerCase(),kn=(ye.commodity||"").toLowerCase();return(ye.type||"").toLowerCase()==="buy"&&k.some(G=>Bt.includes(G)||kn.includes(G))}).length;j?y.push({text:`${R} ${c("sowing")}`,type:"Advisory",term:E,subtype:"sowing"}):M?y.push({text:`${R} ${c("harvesting")}`,type:"Advisory",term:E,subtype:"harvesting"}):w?y.push({text:`${R} ${c("care_tips")}`,type:"Advisory",term:E,subtype:"care"}):(y.push({text:`${R} ${c("sellers_label")} (${b})`,type:"Sellers",term:E}),y.push({text:`${R} ${c("buyers_label")} (${te})`,type:"Market",term:E,modeOverride:"Buyers"}),y.push({text:`${R} ${c("rates_label")}`,type:"Rates",term:E}),y.push({text:`${R} ${c("farming_tips")}`,type:"Advisory",term:E,subtype:"general"}))}),P.size===0&&V.size>0&&V.forEach(E=>{_||(y.push({text:`${c("sellers_in")} ${E}`,type:"Sellers",term:E}),y.push({text:`${c("mandi_rates_in")} ${E}`,type:"Rates",term:E}))}),r(y.slice(0,10))},[t,d]),{query:t,setQuery:e,searchMode:i,setSearchMode:s,suggestions:n,handleSearchRaw:(m,y,P,C)=>{const x=m||t;let I=C||y;if(!x.trim())return;const v=x.toLowerCase();I||(v.includes("weather")||v.includes("mosam")||v.includes("mausam")?I="Weather":v.includes("rate")||v.includes("bhav")||v.includes("price")||v.includes("mandi")?I="Rates":v.includes("tip")||v.includes("care")||v.includes("sowing")||v.includes("advisory")?I="Advisory":I=i);let A="/marketplace",V="search";if(I==="Weather"){o(`/weather?city=${encodeURIComponent(x.replace(/weather|mosam|mausam/gi,"").trim()||x)}`),r([]),e("");return}if(I==="Advisory"){const j=x.replace(/tips?|care|sowing|advisory/gi,"").trim()||x;o(`/advisory?crop=${encodeURIComponent(j)}&topic=${P||"general"}`),r([]),e("");return}I==="Rates"?A="/rates":(I==="Sellers"||I==="Market")&&(A="/sellers"),o(`${A}?${V}=${encodeURIComponent(x)}`),r([]),e("")}}},uM=()=>{const{user:t}=km(),e=Sn(),n=T=>e.pathname===T?"active":"",{query:r,setQuery:i,searchMode:s,setSearchMode:o,suggestions:l,handleSearchRaw:c}=cM(),[u,d]=D.useState(!1),[f,m]=D.useState(null),[y,P]=D.useState(!1),[C,x]=D.useState(!1),{language:I,t:v,changeLanguage:A}=Ai(),{alerts:V,unreadCount:j,markAsRead:M,clearAll:w}=ZV(),_=()=>d(!u),E=T=>{m(f===T?null:T)},k=()=>{d(!1),m(null),P(!1)};return S.jsxs("header",{style:{backgroundColor:"var(--color-surface)",boxShadow:"var(--shadow-sm)",position:"sticky",top:0,zIndex:1e3},children:[S.jsxs("div",{className:"container",style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.6rem 0.5rem",borderBottom:"1px solid #eee",flexWrap:"nowrap",gap:"8px"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",gap:"4px"},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px",flexShrink:0},children:[S.jsxs(Ae,{to:"/",onClick:k,style:{display:"flex",alignItems:"center",gap:"4px",textDecoration:"none"},children:[S.jsx("img",{src:"/images/logo.png",alt:"Logo",style:{height:"28px",width:"auto",objectFit:"contain"}}),S.jsx("span",{style:{fontSize:"1.2rem",fontWeight:"800",color:"var(--color-primary)",fontFamily:"serif",whiteSpace:"nowrap"},className:"logo-text",children:"KisanBazaar"}),S.jsx("style",{children:`
                                @media (max-width: 340px) { .logo-text { display: none; } }
                            `})]}),S.jsx("button",{onClick:_,className:"mobile-menu-btn",style:{background:"#f8fafc",border:"1px solid #e2e8f0",padding:"4px 6px",borderRadius:"6px",cursor:"pointer",fontSize:"0.9rem",color:"#333",display:"flex",alignItems:"center",gap:"2px",fontWeight:"bold"},children:S.jsx("span",{children:""})})]}),S.jsxs("div",{className:"header-actions",style:{display:"flex",alignItems:"center",gap:"4px",flexShrink:0},children:[S.jsx("div",{style:{display:"flex",gap:"2px",backgroundColor:"#f1f5f9",padding:"2px",borderRadius:"12px"},children:["en","hi","mr"].map(T=>S.jsx("button",{onClick:()=>A(T),style:{padding:"4px 6px",fontSize:"0.6rem",fontWeight:"800",borderRadius:"10px",border:"none",cursor:"pointer",backgroundColor:I===T?"var(--color-primary)":"transparent",color:I===T?"white":"#64748b",transition:"all 0.2s",textTransform:"uppercase",minWidth:"24px"},children:T==="en"?"EN":T==="hi"?"":""},T))}),S.jsxs("div",{style:{position:"relative"},children:[S.jsxs("button",{onClick:()=>P(!y),style:{background:"none",border:"none",fontSize:"1.2rem",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",position:"relative"},title:"Notifications",children:["",j>0&&S.jsx("span",{style:{position:"absolute",top:"0",right:"0",backgroundColor:"#ef4444",color:"white",borderRadius:"50%",width:"18px",height:"18px",fontSize:"0.7rem",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",border:"2px solid white"},children:j})]}),y&&S.jsxs("div",{className:"fade-in",style:{position:"absolute",top:"45px",right:"0",width:"320px",maxHeight:"70vh",backgroundColor:"white",boxShadow:"var(--shadow-lg)",borderRadius:"12px",zIndex:1010,overflowY:"auto",border:"1px solid #e2e8f0"},children:[S.jsxs("div",{style:{padding:"1rem",borderBottom:"1px solid #f1f5f9",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#f8fafc"},children:[S.jsx("h4",{style:{margin:0,fontSize:"1rem"},children:v("notifications")}),S.jsx("button",{onClick:w,style:{background:"none",border:"none",color:"var(--color-primary)",fontSize:"0.8rem",cursor:"pointer",fontWeight:"bold"},children:v("clear_all")})]}),V.length===0?S.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"#64748b"},children:[S.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:""}),S.jsx("p",{style:{margin:0,fontSize:"0.9rem"},children:v("no_new_alerts")})]}):S.jsx("div",{style:{padding:"0.5rem"},children:V.map(T=>{const R=I==="hi"?T.titleHi||T.title:I==="mr"&&(T.titleMr||T.titleHi)||T.title,b=I==="hi"?T.messageHi||T.message:I==="mr"&&(T.messageMr||T.messageHi)||T.message;return S.jsx("div",{onClick:()=>M(T.id),style:{padding:"1rem",borderRadius:"8px",marginBottom:"0.5rem",backgroundColor:T.read?"transparent":"#f0f9ff",borderLeft:`4px solid ${T.type==="weather"?"#ef4444":T.type.includes("market")?"#f59e0b":"#10b981"}`,cursor:"pointer",transition:"background-color 0.2s"},children:S.jsxs("div",{style:{display:"flex",gap:"10px"},children:[S.jsx("span",{style:{fontSize:"1.2rem"},children:T.icon}),S.jsxs("div",{style:{flex:1},children:[S.jsx("div",{style:{fontWeight:"bold",fontSize:"0.9rem",marginBottom:"2px"},children:R}),S.jsx("p",{style:{fontSize:"0.8rem",margin:"5px 0",lineHeight:"1.4",color:"#334155"},children:b}),S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"8px"},children:[S.jsx("span",{style:{fontSize:"0.7rem",color:"#94a3b8"},children:new Date(T.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),S.jsxs("a",{href:`https://wa.me/?text=${encodeURIComponent(T.whatsappMsg)}`,target:"_blank",rel:"noopener noreferrer",onClick:te=>te.stopPropagation(),style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"0.75rem",color:"#25D366",textDecoration:"none",fontWeight:"bold",padding:"4px 8px",backgroundColor:"#f0fff4",borderRadius:"4px"},children:[v("share_whatsapp")," "]})]})]})]})},T.id)})}),S.jsxs("div",{style:{padding:"1rem",backgroundColor:"#f8fafc",borderTop:"1px solid #f1f5f9",textAlign:"center"},children:[S.jsx("p",{style:{margin:"0 0 10px 0",fontSize:"0.85rem",color:"#475569"},children:v("want_alerts_whatsapp")}),S.jsx("a",{href:`https://wa.me/91XXXXXXXXXX?text=${encodeURIComponent(v("whatsapp_subscribe_msg"))}`,target:"_blank",rel:"noopener noreferrer",className:"btn btn-primary",style:{padding:"0.5rem 1rem",fontSize:"0.8rem",display:"inline-flex",alignItems:"center",gap:"5px",textDecoration:"none",borderRadius:"8px"},children:v("subscribe_now")})]})]})]}),t?S.jsxs(Ae,{to:"/profile",style:{display:"flex",alignItems:"center",gap:"5px",textDecoration:"none",backgroundColor:"#f0fdf4",padding:"4px 8px",borderRadius:"15px",border:"1px solid #dcfce7"},children:[S.jsx("img",{src:t.avatar,alt:"Profile",style:{width:"24px",height:"24px",borderRadius:"50%"}}),S.jsx("span",{style:{fontWeight:"600",color:"#166534",fontSize:"0.8rem"},className:"user-name-short",children:t.name.split(" ")[0]})]}):S.jsxs(Ae,{to:"/login",className:"btn btn-primary",onClick:k,style:{padding:"0.4rem 0.8rem",fontSize:"0.8rem",borderRadius:"15px",textDecoration:"none",display:"flex",alignItems:"center",gap:"4px"},children:[S.jsx("span",{children:""})," ",S.jsx("span",{className:"login-text",children:"Login"})]})]})]}),S.jsx("style",{children:`
                    .mobile-menu-btn { display: none !important; }
                    .user-name-short { display: inline; }
                    
                    @media (max-width: 768px) {
                        .mobile-menu-btn { display: flex !important; }
                        .desktop-nav { display: none !important; }
                        .login-text { font-size: 0.75rem; }
                        .voice-search-desktop { display: none !important; }
                        .voice-icon-mobile { display: inline-flex !important; }
                        .search-icon { display: none !important; }
                        
                        .header-search { 
                            order: 3; 
                            width: 100% !important; 
                            margin: 5px 0 !important; 
                            flex: 1 1 100% !important;
                            max-width: 100% !important;
                        }

                        .mobile-nav-open { 
                            display: flex !important; 
                            flex-direction: column; 
                            width: 100%; 
                            padding-top: 1rem;
                            animation: slideDown 0.3s ease;
                        }
                    }

                    @media (min-width: 769px) {
                        .header-actions { margin-left: auto; }
                        .voice-icon-mobile { display: none !important; }
                    }

                    @keyframes slideDown {
                        from { opacity: 0; transform: translateY(-10px); }
                        to { opacity: 1; transform: translateY(0); }
                    }
                `}),S.jsxs("div",{className:"header-search",style:{position:"relative",display:"flex",alignItems:"center",flexWrap:"nowrap",flex:"1 1 300px",maxWidth:"500px",margin:"0 auto",zIndex:1002},children:[S.jsxs("div",{style:{display:"flex",width:"100%",border:"1px solid #cbd5e1",borderRadius:"50px",overflow:"hidden",height:"42px",backgroundColor:"#f8fafc",transition:"all 0.3s ease",boxShadow:C?"0 0 0 3px rgba(34, 197, 94, 0.2)":"none"},className:"search-input-wrapper",children:[S.jsx("input",{type:"text",placeholder:"Search crops, mandi rates, or weather...",value:r,onChange:T=>i(T.target.value),onFocus:()=>x(!0),onBlur:()=>{setTimeout(()=>x(!1),200)},onKeyPress:T=>T.key==="Enter"&&c(),style:{flex:1,border:"none",padding:"0 12px",outline:"none",fontSize:"0.95rem",minWidth:"0",height:"100%",backgroundColor:"transparent",color:"#1e293b"}}),r&&S.jsx("button",{onClick:()=>{i(""),document.querySelector('input[placeholder="Search crops, mandi rates, or weather..."]').focus()},style:{background:"transparent",border:"none",cursor:"pointer",padding:"0 8px",display:"flex",alignItems:"center",justifyContent:"center",color:"#64748b",fontSize:"1.2rem",height:"100%",outline:"none"},title:"Clear search",onMouseDown:T=>T.preventDefault(),children:""}),S.jsx("button",{onClick:()=>{const T=new(window.SpeechRecognition||window.webkitSpeechRecognition);T.lang="hi-IN",T.onstart=()=>{i("Listening...")},T.onresult=R=>{const b=R.results[0][0].transcript;i(b),c(b)},T.start()},className:"voice-search-desktop",style:{background:"transparent",border:"none",cursor:"pointer",padding:"0 12px",display:"flex",alignItems:"center",justifyContent:"center",transition:"color 0.2s",borderLeft:"1px solid #e2e8f0",height:"60%",alignSelf:"center",flexShrink:0},title:"Voice Search",children:S.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{color:"#2E7D32"},children:[S.jsx("path",{d:"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"}),S.jsx("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2"}),S.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"23"}),S.jsx("line",{x1:"8",y1:"23",x2:"16",y2:"23"})]})}),S.jsxs("button",{onClick:()=>c(),style:{width:"auto",border:"none",padding:"0 1.2rem",background:"var(--color-primary)",color:"white",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",cursor:"pointer",fontSize:"1.1rem",transition:"background-color 0.2s",flexShrink:0},onMouseEnter:T=>T.target.style.opacity="0.9",onMouseLeave:T=>T.target.style.opacity="1",children:[S.jsx("span",{className:"search-icon",children:""}),S.jsx("span",{className:"voice-icon-mobile",onClick:T=>{T.stopPropagation();const R=new(window.SpeechRecognition||window.webkitSpeechRecognition);R.lang="hi-IN",R.onstart=()=>{i("Listening...")},R.onresult=b=>{const te=b.results[0][0].transcript;i(te),c(te)},R.start()},style:{cursor:"pointer"},children:S.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[S.jsx("path",{d:"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"}),S.jsx("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2"}),S.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"23"}),S.jsx("line",{x1:"8",y1:"23",x2:"16",y2:"23"})]})})]})]}),C&&l.length>0&&S.jsx("div",{style:{position:"absolute",top:"40px",left:"0",right:"0",backgroundColor:"white",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",border:"1px solid #e2e8f0",overflow:"hidden",zIndex:1003},children:l.map((T,R)=>S.jsxs("div",{onClick:()=>{o(T.type),c(T.term,T.type,T.subtype,T.modeOverride)},style:{padding:"10px 15px",cursor:"pointer",borderBottom:R<l.length-1?"1px solid #f1f5f9":"none",display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"0.9rem"},onMouseEnter:b=>b.currentTarget.style.backgroundColor="#f8fafc",onMouseLeave:b=>b.currentTarget.style.backgroundColor="white",children:[S.jsx("span",{children:T.text}),S.jsx("span",{style:{fontSize:"0.7rem",padding:"2px 6px",borderRadius:"4px",backgroundColor:"#eff6ff",color:"#3b82f6"},children:T.type})]},R))})]})]}),S.jsx("div",{className:`container ${u?"mobile-nav-open":"desktop-nav"}`,style:{padding:"0.8rem 1rem"},children:S.jsxs("nav",{style:{display:"flex",gap:u?"1rem":"var(--spacing-lg)",flexDirection:u?"column":"row",fontSize:"0.95rem",fontWeight:"500",color:"#555"},children:[S.jsxs("div",{className:"nav-item dropdown",children:[S.jsxs("span",{onClick:()=>u&&E("buyer"),style:{paddingBottom:u?"2px":"10px",fontWeight:"bold",cursor:"pointer",display:"flex",justifyContent:u?"space-between":"flex-start",alignItems:"center"},children:[v("buyer_section"),S.jsx("span",{children:u&&f==="buyer"?"":""})]}),S.jsxs("div",{className:"dropdown-content",style:{position:u?"static":"absolute",boxShadow:u?"none":"0 8px 16px rgba(0,0,0,0.1)",border:u?"none":"1px solid #eee",display:u?f==="buyer"?"block":"none":void 0},children:[S.jsx(Ae,{to:"/sell?type=Buy",onClick:k,style:{padding:u?"0.5rem 0 0.5rem 1rem":"12px 16px"},children:v("request_crop")}),S.jsx(Ae,{to:"/my-products",onClick:k,style:{padding:u?"0.5rem 0 0.5rem 1rem":"12px 16px"},children:v("my_posts")}),S.jsx(Ae,{to:"/sellers",onClick:k,style:{padding:u?"0.5rem 0 0.5rem 1rem":"12px 16px"},children:v("view_sellers")})]})]}),S.jsxs("div",{className:"nav-item dropdown",children:[S.jsxs("span",{onClick:()=>u&&E("seller"),style:{paddingBottom:u?"2px":"10px",fontWeight:"bold",cursor:"pointer",display:"flex",justifyContent:u?"space-between":"flex-start",alignItems:"center"},children:[v("seller_section"),S.jsx("span",{children:u&&f==="seller"?"":""})]}),S.jsxs("div",{className:"dropdown-content",style:{position:u?"static":"absolute",boxShadow:u?"none":"0 8px 16px rgba(0,0,0,0.1)",border:u?"none":"1px solid #eee",display:u?f==="seller"?"block":"none":void 0},children:[S.jsx(Ae,{to:"/sell?type=Sell",onClick:k,style:{padding:u?"0.5rem 0 0.5rem 1rem":"12px 16px"},children:v("list_product")}),S.jsx(Ae,{to:"/my-products",onClick:k,style:{padding:u?"0.5rem 0 0.5rem 1rem":"12px 16px"},children:v("my_products")}),S.jsx(Ae,{to:"/marketplace?type=Buy",onClick:k,style:{padding:u?"0.5rem 0 0.5rem 1rem":"12px 16px"},children:v("view_buyers")})]})]}),t&&t.role==="Admin"&&S.jsx(Ae,{to:"/admin",onClick:k,className:n("/admin"),style:{color:"var(--color-primary)",fontWeight:"bold",textDecoration:"none",display:"flex",alignItems:"center",gap:"4px"},children:" Admin"})]})})]})},hM=()=>{const{t}=Ai(),[e,n]=D.useState({name:"",mobile:"",suggestion:""}),[r,i]=D.useState(!1),s=l=>{const{name:c,value:u}=l.target;n(d=>({...d,[c]:u}))},o=l=>{if(l.preventDefault(),!e.suggestion.trim()){alert(t("placeholder_suggestion").replace("*","").trim());return}const c=JSON.parse(localStorage.getItem("kisan_feedback")||"[]"),u={...e,id:Date.now(),timestamp:new Date().toLocaleString()};localStorage.setItem("kisan_feedback",JSON.stringify([u,...c])),i(!0),n({name:"",mobile:"",suggestion:""}),setTimeout(()=>i(!1),3e3)};return S.jsxs("div",{style:{maxWidth:"400px"},children:[S.jsx("h4",{style:{color:"var(--color-secondary)",marginBottom:"var(--spacing-md)"},children:t("feedback_title")}),r?S.jsx("div",{style:{backgroundColor:"rgba(255,255,255,0.1)",padding:"var(--spacing-md)",borderRadius:"8px",color:"#fff",textAlign:"center"},children:t("feedback_success")}):S.jsxs("form",{onSubmit:o,style:{display:"flex",flexDirection:"column",gap:"10px"},children:[S.jsx("input",{type:"text",name:"name",placeholder:t("placeholder_name"),value:e.name,onChange:s,style:{padding:"10px",borderRadius:"5px",border:"none",backgroundColor:"rgba(255,255,255,0.9)",fontSize:"0.9rem"}}),S.jsx("input",{type:"tel",name:"mobile",placeholder:t("placeholder_mobile"),value:e.mobile,onChange:s,style:{padding:"10px",borderRadius:"5px",border:"none",backgroundColor:"rgba(255,255,255,0.9)",fontSize:"0.9rem"}}),S.jsx("textarea",{name:"suggestion",required:!0,placeholder:t("placeholder_suggestion"),value:e.suggestion,onChange:s,rows:"3",style:{padding:"10px",borderRadius:"5px",border:"none",backgroundColor:"rgba(255,255,255,0.9)",fontSize:"0.9rem",resize:"none"}}),S.jsx("button",{type:"submit",style:{padding:"10px",borderRadius:"5px",border:"none",backgroundColor:"var(--color-secondary)",color:"var(--color-primary)",fontWeight:"700",cursor:"pointer",transition:"opacity 0.2s"},onMouseOver:l=>l.target.style.opacity="0.9",onMouseOut:l=>l.target.style.opacity="1",children:t("submit")})]})]})},dM=()=>{const{t}=Ai();return S.jsxs("footer",{style:{backgroundColor:"var(--color-primary)",color:"white",padding:"var(--spacing-xl) 0",marginTop:"auto"},children:[S.jsxs("div",{className:"container",style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"var(--spacing-lg)"},children:[S.jsxs("div",{children:[S.jsx("h3",{style:{color:"white",marginBottom:"var(--spacing-md)"},children:t("app_name")}),S.jsx("p",{style:{opacity:.9},children:t("footer_desc")})]}),S.jsxs("div",{children:[S.jsx("h4",{style:{color:"var(--color-secondary)",marginBottom:"var(--spacing-md)"},children:t("important_links")}),S.jsxs("ul",{style:{listStyle:"none",opacity:.9},children:[S.jsx("li",{style:{marginBottom:"8px"},children:S.jsx(Ae,{to:"/",style:{color:"white",textDecoration:"none"},children:t("home")})}),S.jsx("li",{style:{marginBottom:"8px"},children:S.jsx(Ae,{to:"/about",style:{color:"white",textDecoration:"none"},children:t("about_us")})}),S.jsx("li",{style:{marginBottom:"8px"},children:S.jsx(Ae,{to:"/advisory",style:{color:"white",textDecoration:"none"},children:t("integrated_farming")})}),S.jsx("li",{style:{marginBottom:"8px"},children:S.jsx(Ae,{to:"/pashu-palan",style:{color:"white",textDecoration:"none"},children:t("animal_husbandry")})}),S.jsx("li",{style:{marginBottom:"8px"},children:S.jsx(Ae,{to:"/partner",style:{color:"white",textDecoration:"none"},children:t("be_partner")})}),S.jsx("li",{style:{marginBottom:"8px"},children:S.jsx(Ae,{to:"/fpo-registration",style:{color:"white",textDecoration:"none"},children:t("fpo")})}),S.jsx("li",{style:{marginBottom:"8px"},children:S.jsx(Ae,{to:"/help",style:{color:"white",textDecoration:"none"},children:t("help")})}),S.jsx("li",{style:{marginBottom:"8px"},children:S.jsx(Ae,{to:"/privacy",style:{color:"white",textDecoration:"none"},children:t("privacy_policy")})}),S.jsx("li",{style:{marginBottom:"8px"},children:S.jsx(Ae,{to:"/admin/dashboard",style:{color:"rgba(255,255,255,0.5)",textDecoration:"none",fontSize:"0.8rem"},children:"Admin Dashboard"})})]})]}),S.jsxs("div",{children:[S.jsx("h4",{style:{color:"var(--color-secondary)",marginBottom:"var(--spacing-md)"},children:t("contact_us")}),S.jsxs("p",{style:{marginBottom:"8px"},children:[t("email"),": support@kisanbazaar.com"]}),S.jsxs("p",{style:{marginBottom:"8px"},children:[t("phone"),": +91 99879 17394"]}),S.jsx("p",{children:t("address")})]}),S.jsx(hM,{})]}),S.jsxs("div",{className:"container",style:{marginTop:"var(--spacing-lg)",paddingTop:"var(--spacing-md)",borderTop:"1px solid rgba(255,255,255,0.1)",textAlign:"center",opacity:.7},children:[" ",new Date().getFullYear()," Kisan Bazaar. All rights reserved."]})]})};class fM extends Gt.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,n){console.error("Uncaught error:",e,n),this.setState({error:e,errorInfo:n})}render(){return this.state.hasError?S.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",backgroundColor:"#F8F5F2",color:"#1E4A35",padding:"2rem",textAlign:"center"},children:[S.jsx("h1",{style:{fontSize:"2rem",marginBottom:"1rem"},children:"Something went wrong."}),S.jsxs("p",{style:{marginBottom:"2rem",color:"#666"},children:["We're sorry, but the application encountered an unexpected error.",S.jsx("br",{}),"(  ,      )"]}),S.jsx("details",{style:{whiteSpace:"pre-wrap",marginBottom:"2rem",color:"#d32f2f"},children:this.state.error&&this.state.error.toString()}),S.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem"},children:[S.jsx("button",{onClick:()=>window.history.back(),style:{padding:"0.8rem 2rem",backgroundColor:"#fff",color:"#1E4A35",border:"1px solid #1E4A35",borderRadius:"8px",fontSize:"1rem",cursor:"pointer"},children:" Go Back"}),S.jsx("button",{onClick:()=>window.location.reload(),style:{padding:"0.8rem 2rem",backgroundColor:"#1E4A35",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",cursor:"pointer"},children:"Refresh Page (  )"}),S.jsx("button",{onClick:()=>window.location.href="/",style:{padding:"0.8rem 2rem",backgroundColor:"var(--color-primary)",color:"white",border:"none",borderRadius:"8px",fontSize:"1rem",cursor:"pointer"},children:"Go Home"})]}),S.jsxs("div",{style:{marginTop:"2rem"},children:[S.jsx("p",{style:{fontSize:"0.8rem",color:"#888",marginBottom:"0.5rem"},children:"Still stuck? (   ?)"}),S.jsx("button",{onClick:()=>{window.confirm("This will clear all app data and reset completely. Continue? (        ?)")&&(localStorage.clear(),sessionStorage.clear(),"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(function(e){for(let n of e)n.unregister()}),window.location.href="/")},style:{background:"none",border:"none",color:"#d32f2f",textDecoration:"underline",cursor:"pointer",fontSize:"0.9rem"},children:" Hard Reset App (  )"})]})]}):this.props.children}}const pM=()=>S.jsx("a",{href:"https://wa.me/919876543210",target:"_blank",rel:"noopener noreferrer",style:{position:"fixed",bottom:"80px",right:"25px",backgroundColor:"#25D366",color:"white",borderRadius:"50%",width:"60px",height:"60px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 10px rgba(0,0,0,0.3)",zIndex:9999,textDecoration:"none",transition:"transform 0.3s ease"},onMouseOver:t=>t.currentTarget.style.transform="scale(1.1)",onMouseOut:t=>t.currentTarget.style.transform="scale(1)",title:"Chat on WhatsApp",children:S.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg",alt:"WhatsApp",style:{width:"35px",height:"35px"}})}),mM=({onTranscript:t,disabled:e=!1})=>{const[n,r]=D.useState(!1),[i,s]=D.useState(!0);D.useEffect(()=>{"webkitSpeechRecognition"in window||"SpeechRecognition"in window||(s(!1),alert("Voice Search is not supported in this browser. Please use Chrome or Edge."))},[]);const o=()=>{n?c():l()},l=()=>{r(!0);const u=window.SpeechRecognition||window.webkitSpeechRecognition,d=new u;d.lang="hi-IN",d.interimResults=!1,d.maxAlternatives=1,d.onresult=f=>{const m=f.results[0][0].transcript;t(m),r(!1)},d.onerror=f=>{console.error("Speech recognition error",f.error),f.error==="not-allowed"?alert("Microphone access blocked. Please allow microphone permissions in your browser settings."):f.error==="no-speech"||alert("Voice Error: "+f.error),r(!1)},d.onend=()=>{r(!1)},d.start()},c=()=>{r(!1)};return i?S.jsx("button",{onClick:o,disabled:e,title:"Speak to Search ( )",style:{background:n?"#ff4d4d":"white",border:n?"2px solid #ff4d4d":"2px solid #4CAF50",cursor:"pointer",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.3s ease",boxShadow:"0 4px 10px rgba(0,0,0,0.3)",width:"60px",height:"60px",position:"fixed",bottom:"150px",right:"25px",zIndex:1e3},children:S.jsx("span",{style:{fontSize:"1.8rem",display:"flex",alignItems:"center",justifyContent:"center"},children:n?"":S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"32",viewBox:"0 96 960 960",width:"32",fill:n?"white":"#4CAF50",children:S.jsx("path",{d:"M480 576q-33 0-56.5-23.5T400 496V256q0-33 23.5-56.5T480 176q33 0 56.5 23.5T560 256v240q0 33-23.5 56.5T480 576Zm0 200q-76 0-138.5-43T264 616h61q14 55 59.5 87.5T480 736q52 0 97-32.5T635 616h61q-15 76-77.5 119T480 776Zm-40 180v-99q-126-17-203-108.5T160 546h40q0 117 81.5 198.5T480 826q117 0 198.5-81.5T760 546h40q0 120-77 211.5T520 866v90h-80Z"})})})}):null},gM=()=>{const t=ka(),[e,n]=Gt.useState(""),r=i=>{console.log("Voice Command Received:",i),n(i);const s=i.toLowerCase();setTimeout(()=>n(""),4e3),s.includes("news")||s.includes("samachar")||s.includes("khabar")?t("/news"):s.includes("sell")||s.includes("bechna")||s.includes("vikreta")?t("/sell?type=Sell"):s.includes("buy")||s.includes("kharidna")||s.includes("kharidar")||s.includes("buyer")||s.includes("marketplace")?t("/marketplace"):s.includes("weather")||s.includes("mausam")||s.includes("barish")?t("/weather"):s.includes("rate")||s.includes("bhav")||s.includes("mandi")||s.includes("price")?t("/rates"):s.includes("chaupal")||s.includes("community")||s.includes("prashn")||s.includes("madal")?t("/chaupal"):s.includes("animal")||s.includes("pashu")||s.includes("gay")||s.includes("bhains")?t("/pashu-palan"):s.includes("home")||s.includes("mukhya")||s.includes("wapas")?t("/"):s.includes("seller")||s.includes("directory")?t("/sellers"):s.length>2&&t(`/marketplace?search=${encodeURIComponent(s)}`)};return S.jsxs(S.Fragment,{children:[S.jsx(mM,{onTranscript:r}),e&&S.jsxs("div",{style:{position:"fixed",bottom:"150px",right:"25px",backgroundColor:"#333",color:"white",padding:"8px 12px",borderRadius:"4px",fontSize:"0.9rem",zIndex:2e3,boxShadow:"0 2px 5px rgba(0,0,0,0.2)",maxWidth:"200px",wordWrap:"break-word",animation:"fadeIn 0.3s ease"},children:['Heard: "',e,'"']})]})},_M=()=>{const{t}=Ai();return S.jsxs("nav",{className:"mobile-bottom-nav",children:[S.jsx("style",{children:`
                .mobile-bottom-nav {
                    position: fixed;
                    bottom: 0;
                    left: 0;
                    right: 0;
                    background-color: white;
                    display: none; /* Hidden on Desktop */
                    justify-content: space-around;
                    align-items: center;
                    padding: 0.5rem 0;
                    box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
                    z-index: 2000; /* Ensure on top */
                    border-top: 1px solid #eee;
                    flex-direction: row; /* Force row */
                    height: 60px; /* Fixed height */
                }

                .mobile-nav-item {
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    text-decoration: none;
                    color: #666;
                    font-size: 0.75rem;
                    gap: 4px;
                }

                .mobile-nav-item.active {
                    color: var(--color-primary);
                    font-weight: bold;
                }

                .mobile-nav-icon {
                    font-size: 1.5rem;
                }

                @media (max-width: 768px) {
                    .mobile-bottom-nav {
                        display: flex;
                    }
                    /* Add padding to body or footer to prevent overlap */
                    body {
                        padding-bottom: 60px;
                    }
                }
            `}),S.jsxs(ho,{to:"/",className:({isActive:e})=>`mobile-nav-item ${e?"active":""}`,children:[S.jsx("span",{className:"mobile-nav-icon",children:""}),S.jsx("span",{children:t("home")})]}),S.jsxs(ho,{to:"/sell?type=Sell",className:({isActive:e})=>`mobile-nav-item ${e?"active":""}`,children:[S.jsx("span",{className:"mobile-nav-icon",children:""}),S.jsx("span",{children:t("sell")})]}),S.jsxs(ho,{to:"/marketplace",className:({isActive:e})=>`mobile-nav-item ${e?"active":""}`,children:[S.jsx("span",{className:"mobile-nav-icon",children:""}),S.jsx("span",{children:t("buy")})]}),S.jsxs(ho,{to:"/rates",className:({isActive:e})=>`mobile-nav-item ${e?"active":""}`,children:[S.jsx("span",{className:"mobile-nav-icon",children:""}),S.jsx("span",{children:t("nav_rates")})]}),S.jsxs(ho,{to:"/profile",className:({isActive:e})=>`mobile-nav-item ${e?"active":""}`,children:[S.jsx("span",{className:"mobile-nav-icon",children:""}),S.jsx("span",{children:t("nav_profile")})]})]})},yM=({children:t,allowedRole:e})=>{const{user:n,loading:r}=km(),i=Sn();return r?S.jsx("div",{style:{padding:"20px",textAlign:"center"},children:"Loading..."}):n?e&&n.role!==e?S.jsxs("div",{style:{padding:"50px",textAlign:"center",color:"red"},children:[S.jsx("h2",{children:"Access Denied"}),S.jsx("p",{children:"You do not have permission to view this page."}),S.jsx("button",{onClick:()=>window.location.href="/",style:{padding:"10px 20px",marginTop:"20px",cursor:"pointer"},children:"Go Home"})]}):t:S.jsx(TA,{to:"/login",state:{from:i},replace:!0})},vM=()=>{const[t,e]=D.useState(navigator.onLine);return D.useEffect(()=>{const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n),window.addEventListener("offline",r),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}},[]),t?null:S.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,backgroundColor:"#d32f2f",color:"white",textAlign:"center",padding:"8px",zIndex:1e4,fontSize:"0.9rem",fontWeight:"bold",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",display:"flex",justifyContent:"center",alignItems:"center",gap:"8px"},children:[S.jsx("span",{children:""}),S.jsxs("span",{children:["No Internet Connection. You are offline.",S.jsx("br",{}),"(      )"]})]})},wM=()=>{const[t,e]=D.useState(!1);D.useEffect(()=>{localStorage.getItem("kb_privacy_consent")||e(!0)},[]);const n=()=>{localStorage.setItem("kb_privacy_consent","true"),e(!1)};return t?S.jsxs("div",{className:"fade-in",style:{position:"fixed",bottom:"70px",left:"20px",right:"20px",backgroundColor:"white",borderRadius:"16px",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1)",padding:"1.25rem",zIndex:9999,border:"1px solid #e2e8f0",display:"flex",flexDirection:"column",gap:"12px",maxWidth:"500px",margin:"0 auto"},children:[S.jsxs("div",{style:{display:"flex",gap:"12px",alignItems:"flex-start"},children:[S.jsx("div",{style:{fontSize:"1.5rem"},children:""}),S.jsxs("div",{style:{flex:1},children:[S.jsx("h4",{style:{margin:"0 0 4px 0",fontSize:"1rem",color:"var(--color-dark)"},children:"Privacy & Cookies (  )"}),S.jsxs("p",{style:{margin:0,fontSize:"0.85rem",color:"#64748b",lineHeight:"1.4"},children:["We use cookies to improve your marketplace experience and send alerts. By using Kisan Bazaar, you agree to our ",S.jsx(Ae,{to:"/privacy",style:{color:"var(--color-primary)",fontWeight:"bold",textDecoration:"none"},children:"Privacy Policy"}),"."]})]})]}),S.jsxs("div",{style:{display:"flex",gap:"8px"},children:[S.jsx("button",{onClick:n,className:"btn btn-primary",style:{flex:1,padding:"0.6rem",fontSize:"0.85rem",borderRadius:"8px"},children:"Accept & Close ( )"}),S.jsx(Ae,{to:"/privacy",className:"btn btn-outline",style:{flex:1,padding:"0.6rem",fontSize:"0.85rem",borderRadius:"8px",textAlign:"center",textDecoration:"none"},children:"Learn More ( )"})]})]}):null},EM=()=>{const[t,e]=D.useState(null),[n,r]=D.useState(!1),{t:i}=Ai();D.useEffect(()=>{const o=l=>{l.preventDefault(),e(l),r(!0)};return window.addEventListener("beforeinstallprompt",o),()=>window.removeEventListener("beforeinstallprompt",o)},[]);const s=async()=>{if(!t)return;t.prompt();const{outcome:o}=await t.userChoice;console.log(`User response to the install prompt: ${o}`),e(null),r(!1)};return n?S.jsxs("div",{className:"slide-in",style:{position:"fixed",bottom:"80px",left:"20px",right:"20px",backgroundColor:"#166534",color:"white",padding:"16px",borderRadius:"12px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px",maxWidth:"400px",margin:"0 auto"},children:[S.jsxs("div",{children:[S.jsx("strong",{style:{display:"block",fontSize:"1rem",marginBottom:"4px"},children:i("install_app_title")}),S.jsx("span",{style:{fontSize:"0.9rem",opacity:.9},children:i("install_app_desc")})]}),S.jsxs("div",{style:{display:"flex",gap:"8px"},children:[S.jsx("button",{onClick:()=>r(!1),style:{background:"transparent",border:"1px solid rgba(255,255,255,0.3)",color:"white",padding:"6px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"0.8rem"},children:i("close")}),S.jsx("button",{onClick:s,style:{background:"white",border:"none",color:"#166534",padding:"6px 16px",borderRadius:"6px",cursor:"pointer",fontWeight:"bold",fontSize:"0.9rem"},children:i("install")})]})]}):null},TM=D.lazy(()=>_e(()=>import("./Home-6f343513.js"),["assets/Home-6f343513.js","assets/SEO-6590514f.js"])),SM=D.lazy(()=>_e(()=>import("./Buyer-9e0c8140.js"),[])),IM=D.lazy(()=>_e(()=>import("./Seller-e378a2ea.js"),["assets/Seller-e378a2ea.js","assets/LocationSelector-39b41522.js","assets/SEO-6590514f.js"])),bM=D.lazy(()=>_e(()=>import("./MyProducts-3ca8c46c.js"),[])),kM=D.lazy(()=>_e(()=>import("./Products-a26d9766.js"),[])),AM=D.lazy(()=>_e(()=>import("./Contact-2a53b9a6.js"),[])),CM=D.lazy(()=>_e(()=>import("./MandiRates-c625deb2.js"),["assets/MandiRates-c625deb2.js","assets/LocationSelector-39b41522.js","assets/BackToHomeButton-aea1371a.js","assets/SEO-6590514f.js"])),PM=D.lazy(()=>_e(()=>import("./Partner-0a776131.js"),["assets/Partner-0a776131.js","assets/BackToHomeButton-aea1371a.js"])),RM=D.lazy(()=>_e(()=>import("./News-aa08b2a7.js"),["assets/News-aa08b2a7.js","assets/BackToHomeButton-aea1371a.js"])),xM=D.lazy(()=>_e(()=>import("./Weather-13888f76.js"),["assets/Weather-13888f76.js","assets/LocationSelector-39b41522.js","assets/BackToHomeButton-aea1371a.js"])),NM=D.lazy(()=>_e(()=>import("./CropAdvisory-bef717bf.js"),["assets/CropAdvisory-bef717bf.js","assets/BackToHomeButton-aea1371a.js"])),DM=D.lazy(()=>_e(()=>import("./About-39bdfd78.js"),["assets/About-39bdfd78.js","assets/BackToHomeButton-aea1371a.js"])),OM=D.lazy(()=>_e(()=>import("./NotFound-7934e046.js"),[])),VM=D.lazy(()=>_e(()=>import("./Chaupal-395a69ac.js"),["assets/Chaupal-395a69ac.js","assets/BackToHomeButton-aea1371a.js"])),MM=D.lazy(()=>_e(()=>import("./PashuPalan-01d804fc.js"),["assets/PashuPalan-01d804fc.js","assets/BackToHomeButton-aea1371a.js"])),LM=D.lazy(()=>_e(()=>import("./Transport-64efd58b.js"),["assets/Transport-64efd58b.js","assets/LocationSelector-39b41522.js","assets/BackToHomeButton-aea1371a.js"])),FM=D.lazy(()=>_e(()=>import("./SellerDirectory-89284a01.js"),["assets/SellerDirectory-89284a01.js","assets/LocationSelector-39b41522.js","assets/BackToHomeButton-aea1371a.js"])),jM=D.lazy(()=>_e(()=>import("./Login-cfff7b66.js"),["assets/Login-cfff7b66.js","assets/SEO-6590514f.js"])),UM=D.lazy(()=>_e(()=>import("./Profile-a6b17655.js"),[])),BM=D.lazy(()=>_e(()=>import("./Help-f2e74de7.js"),["assets/Help-f2e74de7.js","assets/BackToHomeButton-aea1371a.js"])),zM=D.lazy(()=>_e(()=>import("./PrivacyPolicy-358bc9f8.js"),[])),$M=D.lazy(()=>_e(()=>import("./Admin-e335d289.js"),["assets/Admin-e335d289.js","assets/SEO-6590514f.js"])),HM=D.lazy(()=>_e(()=>import("./FPORegistration-0edc7cb7.js"),["assets/FPORegistration-0edc7cb7.js","assets/BackToHomeButton-aea1371a.js"])),qM=D.lazy(()=>_e(()=>import("./TradeArea-b23dfb73.js"),["assets/TradeArea-b23dfb73.js","assets/BackToHomeButton-aea1371a.js"])),WM=()=>S.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"50vh",color:"var(--color-primary)"},children:[S.jsx("div",{className:"spinner"}),S.jsx("style",{children:`
      .spinner {
        width: 40px;
        height: 40px;
        border: 4px solid #f3f3f3;
        border-top: 4px solid var(--color-primary);
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }
      @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    `})]});function KM(){const{pathname:t}=Sn();return D.useEffect(()=>{window.scrollTo(0,0)},[t]),S.jsx(fM,{children:S.jsxs("div",{style:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[S.jsx(uM,{}),S.jsx("main",{style:{flex:1},children:S.jsx(D.Suspense,{fallback:S.jsx(WM,{}),children:S.jsxs(IA,{children:[S.jsx(pe,{path:"/",element:S.jsx(TM,{})}),S.jsx(pe,{path:"/login",element:S.jsx(jM,{})}),S.jsx(pe,{path:"/profile",element:S.jsx(UM,{})}),S.jsx(pe,{path:"/marketplace",element:S.jsx(SM,{})}),S.jsx(pe,{path:"/sell",element:S.jsx(IM,{})}),S.jsx(pe,{path:"/my-products",element:S.jsx(bM,{})}),S.jsx(pe,{path:"/products",element:S.jsx(kM,{})}),S.jsx(pe,{path:"/rates",element:S.jsx(CM,{})}),S.jsx(pe,{path:"/partner",element:S.jsx(PM,{})}),S.jsx(pe,{path:"/news",element:S.jsx(RM,{})}),S.jsx(pe,{path:"/weather",element:S.jsx(xM,{})}),S.jsx(pe,{path:"/advisory",element:S.jsx(NM,{})}),S.jsx(pe,{path:"/chaupal",element:S.jsx(VM,{})}),S.jsx(pe,{path:"/pashu-palan",element:S.jsx(MM,{})}),S.jsx(pe,{path:"/transport",element:S.jsx(LM,{})}),S.jsx(pe,{path:"/sellers",element:S.jsx(FM,{})}),S.jsx(pe,{path:"/contact",element:S.jsx(AM,{})}),S.jsx(pe,{path:"/help",element:S.jsx(BM,{})}),S.jsx(pe,{path:"/about",element:S.jsx(DM,{})}),S.jsx(pe,{path:"/privacy",element:S.jsx(zM,{})}),S.jsx(pe,{path:"/admin",element:S.jsx(yM,{allowedRole:"Admin",children:S.jsx($M,{})})}),S.jsx(pe,{path:"/fpo-registration",element:S.jsx(HM,{})}),S.jsx(pe,{path:"/trade-area",element:S.jsx(qM,{})}),S.jsx(pe,{path:"*",element:S.jsx(OM,{})})]})})}),S.jsx(pM,{}),S.jsx(gM,{}),S.jsx(_M,{}),S.jsx(wM,{}),S.jsx(EM,{}),S.jsx(vM,{}),S.jsx(dM,{})]})})}var GM=typeof Element<"u",QM=typeof Map=="function",YM=typeof Set=="function",JM=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Hl(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,r,i;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!Hl(t[r],e[r]))return!1;return!0}var s;if(QM&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(s=t.entries();!(r=s.next()).done;)if(!e.has(r.value[0]))return!1;for(s=t.entries();!(r=s.next()).done;)if(!Hl(r.value[1],e.get(r.value[0])))return!1;return!0}if(YM&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(s=t.entries();!(r=s.next()).done;)if(!e.has(r.value[0]))return!1;return!0}if(JM&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof e.valueOf=="function")return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof e.toString=="function")return t.toString()===e.toString();if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,i[r]))return!1;if(GM&&t instanceof Element)return!1;for(r=n;r--!==0;)if(!((i[r]==="_owner"||i[r]==="__v"||i[r]==="__o")&&t.$$typeof)&&!Hl(t[i[r]],e[i[r]]))return!1;return!0}return t!==t&&e!==e}var XM=function(e,n){try{return Hl(e,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const ZM=zc(XM);var eL=function(t,e,n,r,i,s,o,l){if(!t){var c;if(e===void 0)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,s,o,l],d=0;c=new Error(e.replace(/%s/g,function(){return u[d++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}},tL=eL;const Bv=zc(tL);var nL=function(e,n,r,i){var s=r?r.call(i,e,n):void 0;if(s!==void 0)return!!s;if(e===n)return!0;if(typeof e!="object"||!e||typeof n!="object"||!n)return!1;var o=Object.keys(e),l=Object.keys(n);if(o.length!==l.length)return!1;for(var c=Object.prototype.hasOwnProperty.bind(n),u=0;u<o.length;u++){var d=o[u];if(!c(d))return!1;var f=e[d],m=n[d];if(s=r?r.call(i,f,m,d):void 0,s===!1||s===void 0&&f!==m)return!1}return!0};const rL=zc(nL);var SS=(t=>(t.BASE="base",t.BODY="body",t.HEAD="head",t.HTML="html",t.LINK="link",t.META="meta",t.NOSCRIPT="noscript",t.SCRIPT="script",t.STYLE="style",t.TITLE="title",t.FRAGMENT="Symbol(react.fragment)",t))(SS||{}),Wh={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},zv=Object.values(SS),Cm={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},iL=Object.entries(Cm).reduce((t,[e,n])=>(t[n]=e,t),{}),Yt="data-rh",ls={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},cs=(t,e)=>{for(let n=t.length-1;n>=0;n-=1){const r=t[n];if(Object.prototype.hasOwnProperty.call(r,e))return r[e]}return null},sL=t=>{let e=cs(t,"title");const n=cs(t,ls.TITLE_TEMPLATE);if(Array.isArray(e)&&(e=e.join("")),n&&e)return n.replace(/%s/g,()=>e);const r=cs(t,ls.DEFAULT_TITLE);return e||r||void 0},oL=t=>cs(t,ls.ON_CHANGE_CLIENT_STATE)||(()=>{}),Kh=(t,e)=>e.filter(n=>typeof n[t]<"u").map(n=>n[t]).reduce((n,r)=>({...n,...r}),{}),aL=(t,e)=>e.filter(n=>typeof n.base<"u").map(n=>n.base).reverse().reduce((n,r)=>{if(!n.length){const i=Object.keys(r);for(let s=0;s<i.length;s+=1){const l=i[s].toLowerCase();if(t.indexOf(l)!==-1&&r[l])return n.concat(r)}}return n},[]),lL=t=>console&&typeof console.warn=="function"&&console.warn(t),go=(t,e,n)=>{const r={};return n.filter(i=>Array.isArray(i[t])?!0:(typeof i[t]<"u"&&lL(`Helmet: ${t} should be of type "Array". Instead found type "${typeof i[t]}"`),!1)).map(i=>i[t]).reverse().reduce((i,s)=>{const o={};s.filter(c=>{let u;const d=Object.keys(c);for(let m=0;m<d.length;m+=1){const y=d[m],P=y.toLowerCase();e.indexOf(P)!==-1&&!(u==="rel"&&c[u].toLowerCase()==="canonical")&&!(P==="rel"&&c[P].toLowerCase()==="stylesheet")&&(u=P),e.indexOf(y)!==-1&&(y==="innerHTML"||y==="cssText"||y==="itemprop")&&(u=y)}if(!u||!c[u])return!1;const f=c[u].toLowerCase();return r[u]||(r[u]={}),o[u]||(o[u]={}),r[u][f]?!1:(o[u][f]=!0,!0)}).reverse().forEach(c=>i.push(c));const l=Object.keys(o);for(let c=0;c<l.length;c+=1){const u=l[c],d={...r[u],...o[u]};r[u]=d}return i},[]).reverse()},cL=(t,e)=>{if(Array.isArray(t)&&t.length){for(let n=0;n<t.length;n+=1)if(t[n][e])return!0}return!1},uL=t=>({baseTag:aL(["href"],t),bodyAttributes:Kh("bodyAttributes",t),defer:cs(t,ls.DEFER),encode:cs(t,ls.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Kh("htmlAttributes",t),linkTags:go("link",["rel","href"],t),metaTags:go("meta",["name","charset","http-equiv","property","itemprop"],t),noscriptTags:go("noscript",["innerHTML"],t),onChangeClientState:oL(t),scriptTags:go("script",["src","innerHTML"],t),styleTags:go("style",["cssText"],t),title:sL(t),titleAttributes:Kh("titleAttributes",t),prioritizeSeoTags:cL(t,ls.PRIORITIZE_SEO_TAGS)}),IS=t=>Array.isArray(t)?t.join(""):t,hL=(t,e)=>{const n=Object.keys(t);for(let r=0;r<n.length;r+=1)if(e[n[r]]&&e[n[r]].includes(t[n[r]]))return!0;return!1},Gh=(t,e)=>Array.isArray(t)?t.reduce((n,r)=>(hL(r,e)?n.priority.push(r):n.default.push(r),n),{priority:[],default:[]}):{default:t,priority:[]},$v=(t,e)=>({...t,[e]:void 0}),dL=["noscript","script","style"],Sf=(t,e=!0)=>e===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),bS=t=>Object.keys(t).reduce((e,n)=>{const r=typeof t[n]<"u"?`${n}="${t[n]}"`:`${n}`;return e?`${e} ${r}`:r},""),fL=(t,e,n,r)=>{const i=bS(n),s=IS(e);return i?`<${t} ${Yt}="true" ${i}>${Sf(s,r)}</${t}>`:`<${t} ${Yt}="true">${Sf(s,r)}</${t}>`},pL=(t,e,n=!0)=>e.reduce((r,i)=>{const s=i,o=Object.keys(s).filter(u=>!(u==="innerHTML"||u==="cssText")).reduce((u,d)=>{const f=typeof s[d]>"u"?d:`${d}="${Sf(s[d],n)}"`;return u?`${u} ${f}`:f},""),l=s.innerHTML||s.cssText||"",c=dL.indexOf(t)===-1;return`${r}<${t} ${Yt}="true" ${o}${c?"/>":`>${l}</${t}>`}`},""),kS=(t,e={})=>Object.keys(t).reduce((n,r)=>{const i=Cm[r];return n[i||r]=t[r],n},e),mL=(t,e,n)=>{const r={key:e,[Yt]:!0},i=kS(n,r);return[Gt.createElement("title",i,e)]},ql=(t,e)=>e.map((n,r)=>{const i={key:r,[Yt]:!0};return Object.keys(n).forEach(s=>{const l=Cm[s]||s;if(l==="innerHTML"||l==="cssText"){const c=n.innerHTML||n.cssText;i.dangerouslySetInnerHTML={__html:c}}else i[l]=n[s]}),Gt.createElement(t,i)}),Nt=(t,e,n=!0)=>{switch(t){case"title":return{toComponent:()=>mL(t,e.title,e.titleAttributes),toString:()=>fL(t,e.title,e.titleAttributes,n)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>kS(e),toString:()=>bS(e)};default:return{toComponent:()=>ql(t,e),toString:()=>pL(t,e,n)}}},gL=({metaTags:t,linkTags:e,scriptTags:n,encode:r})=>{const i=Gh(t,Wh.meta),s=Gh(e,Wh.link),o=Gh(n,Wh.script);return{priorityMethods:{toComponent:()=>[...ql("meta",i.priority),...ql("link",s.priority),...ql("script",o.priority)],toString:()=>`${Nt("meta",i.priority,r)} ${Nt("link",s.priority,r)} ${Nt("script",o.priority,r)}`},metaTags:i.default,linkTags:s.default,scriptTags:o.default}},_L=t=>{const{baseTag:e,bodyAttributes:n,encode:r=!0,htmlAttributes:i,noscriptTags:s,styleTags:o,title:l="",titleAttributes:c,prioritizeSeoTags:u}=t;let{linkTags:d,metaTags:f,scriptTags:m}=t,y={toComponent:()=>{},toString:()=>""};return u&&({priorityMethods:y,linkTags:d,metaTags:f,scriptTags:m}=gL(t)),{priority:y,base:Nt("base",e,r),bodyAttributes:Nt("bodyAttributes",n,r),htmlAttributes:Nt("htmlAttributes",i,r),link:Nt("link",d,r),meta:Nt("meta",f,r),noscript:Nt("noscript",s,r),script:Nt("script",m,r),style:Nt("style",o,r),title:Nt("title",{title:l,titleAttributes:c},r)}},If=_L,El=[],AS=!!(typeof window<"u"&&window.document&&window.document.createElement),bf=class{constructor(t,e){An(this,"instances",[]);An(this,"canUseDOM",AS);An(this,"context");An(this,"value",{setHelmet:t=>{this.context.helmet=t},helmetInstances:{get:()=>this.canUseDOM?El:this.instances,add:t=>{(this.canUseDOM?El:this.instances).push(t)},remove:t=>{const e=(this.canUseDOM?El:this.instances).indexOf(t);(this.canUseDOM?El:this.instances).splice(e,1)}}});this.context=t,this.canUseDOM=e||!1,e||(t.helmet=If({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},yL={},CS=Gt.createContext(yL),us,PS=(us=class extends D.Component{constructor(n){super(n);An(this,"helmetData");this.helmetData=new bf(this.props.context||{},us.canUseDOM)}render(){return Gt.createElement(CS.Provider,{value:this.helmetData.value},this.props.children)}},An(us,"canUseDOM",AS),us),Ni=(t,e)=>{const n=document.head||document.querySelector("head"),r=n.querySelectorAll(`${t}[${Yt}]`),i=[].slice.call(r),s=[];let o;return e&&e.length&&e.forEach(l=>{const c=document.createElement(t);for(const u in l)if(Object.prototype.hasOwnProperty.call(l,u))if(u==="innerHTML")c.innerHTML=l.innerHTML;else if(u==="cssText")c.styleSheet?c.styleSheet.cssText=l.cssText:c.appendChild(document.createTextNode(l.cssText));else{const d=u,f=typeof l[d]>"u"?"":l[d];c.setAttribute(u,f)}c.setAttribute(Yt,"true"),i.some((u,d)=>(o=d,c.isEqualNode(u)))?i.splice(o,1):s.push(c)}),i.forEach(l=>{var c;return(c=l.parentNode)==null?void 0:c.removeChild(l)}),s.forEach(l=>n.appendChild(l)),{oldTags:i,newTags:s}},kf=(t,e)=>{const n=document.getElementsByTagName(t)[0];if(!n)return;const r=n.getAttribute(Yt),i=r?r.split(","):[],s=[...i],o=Object.keys(e);for(const l of o){const c=e[l]||"";n.getAttribute(l)!==c&&n.setAttribute(l,c),i.indexOf(l)===-1&&i.push(l);const u=s.indexOf(l);u!==-1&&s.splice(u,1)}for(let l=s.length-1;l>=0;l-=1)n.removeAttribute(s[l]);i.length===s.length?n.removeAttribute(Yt):n.getAttribute(Yt)!==o.join(",")&&n.setAttribute(Yt,o.join(","))},vL=(t,e)=>{typeof t<"u"&&document.title!==t&&(document.title=IS(t)),kf("title",e)},Hv=(t,e)=>{const{baseTag:n,bodyAttributes:r,htmlAttributes:i,linkTags:s,metaTags:o,noscriptTags:l,onChangeClientState:c,scriptTags:u,styleTags:d,title:f,titleAttributes:m}=t;kf("body",r),kf("html",i),vL(f,m);const y={baseTag:Ni("base",n),linkTags:Ni("link",s),metaTags:Ni("meta",o),noscriptTags:Ni("noscript",l),scriptTags:Ni("script",u),styleTags:Ni("style",d)},P={},C={};Object.keys(y).forEach(x=>{const{newTags:I,oldTags:v}=y[x];I.length&&(P[x]=I),v.length&&(C[x]=y[x].oldTags)}),e&&e(),c(t,P,C)},_o=null,wL=t=>{_o&&cancelAnimationFrame(_o),t.defer?_o=requestAnimationFrame(()=>{Hv(t,()=>{_o=null})}):(Hv(t),_o=null)},EL=wL,qv=class extends D.Component{constructor(){super(...arguments);An(this,"rendered",!1)}shouldComponentUpdate(e){return!rL(e,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:e}=this.props.context;e.remove(this),this.emitChange()}emitChange(){const{helmetInstances:e,setHelmet:n}=this.props.context;let r=null;const i=uL(e.get().map(s=>{const o={...s.props};return delete o.context,o}));PS.canUseDOM?EL(i):If&&(r=If(i)),n(r)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:e}=this.props.context;e.add(this),this.emitChange()}render(){return this.init(),null}},Qh,VL=(Qh=class extends D.Component{shouldComponentUpdate(t){return!ZM($v(this.props,"helmetData"),$v(t,"helmetData"))}mapNestedChildrenToProps(t,e){if(!e)return null;switch(t.type){case"script":case"noscript":return{innerHTML:e};case"style":return{cssText:e};default:throw new Error(`<${t.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(t,e,n,r){return{...e,[t.type]:[...e[t.type]||[],{...n,...this.mapNestedChildrenToProps(t,r)}]}}mapObjectTypeChildren(t,e,n,r){switch(t.type){case"title":return{...e,[t.type]:r,titleAttributes:{...n}};case"body":return{...e,bodyAttributes:{...n}};case"html":return{...e,htmlAttributes:{...n}};default:return{...e,[t.type]:{...n}}}}mapArrayTypeChildrenToProps(t,e){let n={...e};return Object.keys(t).forEach(r=>{n={...n,[r]:t[r]}}),n}warnOnInvalidChildren(t,e){return Bv(zv.some(n=>t.type===n),typeof t.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${zv.join(", ")} are allowed. Helmet does not support rendering <${t.type}> elements. Refer to our API for more information.`),Bv(!e||typeof e=="string"||Array.isArray(e)&&!e.some(n=>typeof n!="string"),`Helmet expects a string as a child of <${t.type}>. Did you forget to wrap your children in braces? ( <${t.type}>{\`\`}</${t.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(t,e){let n={};return Gt.Children.forEach(t,r=>{if(!r||!r.props)return;const{children:i,...s}=r.props,o=Object.keys(s).reduce((c,u)=>(c[iL[u]||u]=s[u],c),{});let{type:l}=r;switch(typeof l=="symbol"?l=l.toString():this.warnOnInvalidChildren(r,i),l){case"Symbol(react.fragment)":e=this.mapChildrenToProps(i,e);break;case"link":case"meta":case"noscript":case"script":case"style":n=this.flattenArrayTypeChildren(r,n,o,i);break;default:e=this.mapObjectTypeChildren(r,e,o,i);break}}),this.mapArrayTypeChildrenToProps(n,e)}render(){const{children:t,...e}=this.props;let n={...e},{helmetData:r}=e;if(t&&(n=this.mapChildrenToProps(t,n)),r&&!(r instanceof bf)){const i=r;r=new bf(i.context,!0),delete n.helmetData}return r?Gt.createElement(qv,{...n,context:r.value}):Gt.createElement(CS.Consumer,null,i=>Gt.createElement(qv,{...n,context:i}))}},An(Qh,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),Qh);function TL(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:s,onRegisterError:o}=t;let l,c;const u=async(f=!0)=>{await c};async function d(){if("serviceWorker"in navigator){if(l=await _e(()=>import("./workbox-window.prod.es5-d772c227.js"),[]).then(({Workbox:f})=>new f("/sw.js",{scope:"/",type:"classic"})).catch(f=>{o==null||o(f)}),!l)return;l.addEventListener("activated",f=>{(f.isUpdate||f.isExternal)&&window.location.reload()}),l.addEventListener("installed",f=>{f.isUpdate||r==null||r()}),l.register({immediate:e}).then(f=>{s?s("/sw.js",f):i==null||i(f)}).catch(f=>{o==null||o(f)})}}return c=d(),u}iE(document.getElementById("root")).render(S.jsx(D.StrictMode,{children:S.jsx(PS,{children:S.jsx(DA,{children:S.jsx(jV,{children:S.jsx(UV,{children:S.jsx(eM,{children:S.jsx(nM,{children:S.jsx(KM,{})})})})})})})}));const SL=TL({onNeedRefresh(){confirm("New content available. Reload?")&&SL(!0)},onOfflineReady(){console.log("App is ready to work offline")}});export{$V as A,yS as B,FV as C,AL as D,CL as E,VL as H,Ae as L,TA as N,Gt as R,_e as _,km as a,ei as b,BN as c,Nc as d,tM as e,wl as f,jv as g,ka as h,NL as i,S as j,XV as k,Sn as l,OL as m,YV as n,JV as o,bL as p,qV as q,D as r,DL as s,QV as t,Ai as u,xL as v,RL as w,PL as x,BV as y,zV as z};
