import{b as A,r as s,d as W,j as e,L as v}from"./index-af9fd638.js";const I=()=>{const{listings:i}=A(),[n,m]=s.useState("Feedback"),[l,h]=s.useState([]),[a,b]=s.useState([]),[d,y]=s.useState([]),[x,u]=s.useState(!1),[j,S]=s.useState(""),[g,k]=s.useState(50);W(),s.useEffect(()=>{if(x){const r=JSON.parse(localStorage.getItem("kisan_feedback")||"[]");h(r.sort((c,p)=>(p.id||0)-(c.id||0)));const t=JSON.parse(localStorage.getItem("kisan_partners")||"[]");b(t.sort((c,p)=>(p.id||0)-(c.id||0)));const o=JSON.parse(localStorage.getItem("kisan_help_requests")||"[]");y(o.sort((c,p)=>(p.id||0)-(c.id||0)))}},[x]);const C=r=>{r.preventDefault(),j==="admin123"?u(!0):alert("Invalid Password. Hint: admin123")},z=()=>{window.confirm("Clear all feedback?")&&(localStorage.removeItem("kisan_feedback"),h([]))},w=()=>{window.confirm("Clear all partner requests?")&&(localStorage.removeItem("kisan_partners"),b([]))},B=()=>{window.confirm("Clear all help requests?")&&(localStorage.removeItem("kisan_help_requests"),y([]))},f=r=>g==="All"?r:r.slice(0,parseInt(g));return x?e.jsxs("div",{className:"container fade-in",style:{padding:"var(--spacing-lg) 0"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"var(--spacing-md)",flexWrap:"wrap",gap:"1rem"},children:[e.jsx("h1",{style:{fontSize:"1.5rem",margin:0},children:"Admin Dashboard"}),e.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[e.jsx("label",{style:{fontSize:"0.85rem",fontWeight:"bold"},children:"Show:"}),e.jsxs("select",{value:g,onChange:r=>k(r.target.value),style:{padding:"4px 8px",borderRadius:"4px",border:"1px solid #ccc"},children:[e.jsx("option",{value:"10",children:"10"}),e.jsx("option",{value:"25",children:"25"}),e.jsx("option",{value:"50",children:"50"}),e.jsx("option",{value:"100",children:"100"}),e.jsx("option",{value:"All",children:"All"})]}),e.jsx("button",{onClick:()=>u(!1),className:"btn btn-outline",style:{padding:"4px 12px",fontSize:"0.85rem"},children:"Logout"}),e.jsx(v,{to:"/",className:"btn btn-primary",style:{padding:"4px 12px",fontSize:"0.85rem"},children:"Exit"})]})]}),e.jsxs("div",{style:{display:"flex",borderBottom:"2px solid #eee",marginBottom:"1rem"},children:[e.jsxs("button",{onClick:()=>m("Feedback"),style:{padding:"0.8rem 1.5rem",border:"none",background:"none",borderBottom:n==="Feedback"?"3px solid var(--color-primary)":"none",color:n==="Feedback"?"var(--color-primary)":"#666",fontWeight:"bold",cursor:"pointer",fontSize:"0.9rem"},children:["Suggestions [",l.length,"]"]}),e.jsxs("button",{onClick:()=>m("Partners"),style:{padding:"0.8rem 1.5rem",border:"none",background:"none",borderBottom:n==="Partners"?"3px solid var(--color-primary)":"none",color:n==="Partners"?"var(--color-primary)":"#666",fontWeight:"bold",cursor:"pointer",fontSize:"0.9rem"},children:["Partners [",a.length,"]"]}),e.jsxs("button",{onClick:()=>m("Help"),style:{padding:"0.8rem 1.5rem",border:"none",background:"none",borderBottom:n==="Help"?"3px solid var(--color-primary)":"none",color:n==="Help"?"var(--color-primary)":"#666",fontWeight:"bold",cursor:"pointer",fontSize:"0.9rem"},children:["Help Requests [",d.length,"]"]}),e.jsx("button",{onClick:()=>m("Stats"),style:{padding:"0.8rem 1.5rem",border:"none",background:"none",borderBottom:n==="Stats"?"3px solid var(--color-primary)":"none",color:n==="Stats"?"var(--color-primary)":"#666",fontWeight:"bold",cursor:"pointer",fontSize:"0.9rem"},children:"Usage Stats (à¤†à¤‚à¤•à¤¡à¤¼à¥‡)"})]}),e.jsx("div",{style:{backgroundColor:"white",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.05)",overflow:"hidden",border:"1px solid #eee"},children:n==="Feedback"?e.jsxs("div",{children:[e.jsxs("div",{style:{padding:"10px 15px",borderBottom:"1px solid #eee",display:"flex",justifyContent:"space-between",backgroundColor:"#f8fafc"},children:[e.jsx("span",{style:{fontWeight:"bold",fontSize:"0.9rem"},children:"Recent Suggestions"}),l.length>0&&e.jsx("button",{onClick:z,style:{color:"#dc2626",fontSize:"0.8rem",background:"none",border:"none",cursor:"pointer"},children:"Clear All"})]}),l.length===0?e.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#666"},children:"No feedback yet."}):e.jsx("div",{style:{display:"flex",flexDirection:"column"},children:f(l).map((r,t)=>e.jsxs("div",{style:{padding:"12px 15px",borderBottom:t===l.length-1?"none":"1px solid #f1f5f9",transition:"background 0.2s"},onMouseOver:o=>o.currentTarget.style.backgroundColor="#f8fafc",onMouseOut:o=>o.currentTarget.style.backgroundColor="transparent",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[e.jsxs("span",{style:{fontWeight:"700",fontSize:"0.95rem"},children:[r.name," ",e.jsxs("span",{style:{fontWeight:"normal",fontSize:"0.8rem",color:"#64748b"},children:["(ðŸ“± ",r.mobile,")"]})]}),e.jsx("span",{style:{fontSize:"0.75rem",color:"#94a3b8"},children:r.timestamp})]}),e.jsx("p",{style:{margin:0,fontSize:"0.9rem",color:"#334155",lineHeight:"1.4"},children:r.suggestion})]},r.id))})]}):n==="Partners"?e.jsxs("div",{children:[e.jsxs("div",{style:{padding:"10px 15px",borderBottom:"1px solid #eee",display:"flex",justifyContent:"space-between",backgroundColor:"#f8fafc"},children:[e.jsx("span",{style:{fontWeight:"bold",fontSize:"0.9rem"},children:"Recent Partner Requests"}),a.length>0&&e.jsx("button",{onClick:w,style:{color:"#dc2626",fontSize:"0.8rem",background:"none",border:"none",cursor:"pointer"},children:"Clear All"})]}),a.length===0?e.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#666"},children:"No partnership requests yet."}):e.jsx("div",{style:{display:"flex",flexDirection:"column"},children:f(a).map((r,t)=>e.jsxs("div",{style:{padding:"12px 15px",borderBottom:t===a.length-1?"none":"1px solid #f1f5f9",transition:"background 0.2s"},onMouseOver:o=>o.currentTarget.style.backgroundColor="#f8fafc",onMouseOut:o=>o.currentTarget.style.backgroundColor="transparent",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexWrap:"wrap",gap:"8px"},children:[e.jsxs("div",{style:{minWidth:"200px"},children:[e.jsx("div",{style:{fontWeight:"700",fontSize:"0.95rem"},children:r.name}),e.jsx("div",{style:{color:"var(--color-primary)",fontWeight:"bold",fontSize:"0.85rem"},children:r.companyName}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"#64748b"},children:["ðŸ“ ",r.city," | ðŸ“… ",r.timestamp]})]}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"#334155",textAlign:"right",flex:"1",minWidth:"150px"},children:[e.jsxs("div",{children:["ðŸ“ž ",r.phone]}),e.jsxs("div",{children:["âœ‰ï¸ ",r.email]}),r.webAddress&&e.jsxs("div",{style:{fontSize:"0.75rem"},children:["ðŸŒ ",e.jsx("a",{href:r.webAddress,target:"_blank",rel:"noreferrer",style:{color:"#0ea5e9"},children:"Website"})]})]})]}),e.jsxs("div",{style:{marginTop:"8px",padding:"8px",backgroundColor:"#f1f5f9",borderRadius:"4px",fontSize:"0.85rem"},children:[e.jsx("strong",{children:"Activities:"})," ",r.activities]})]},r.id))})]}):n==="Stats"?e.jsxs("div",{style:{padding:"1.5rem"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[e.jsxs("div",{className:"card",style:{padding:"1.5rem",textAlign:"center",backgroundColor:"#f8fafc"},children:[e.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"var(--color-primary)"},children:[...new Set(i.map(r=>r.contactMobile).filter(Boolean))].length}),e.jsx("div",{style:{fontSize:"0.9rem",color:"#64748b"},children:"Unique Users"})]}),e.jsxs("div",{className:"card",style:{padding:"1.5rem",textAlign:"center",backgroundColor:"#f8fafc"},children:[e.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"var(--color-primary)"},children:i.length}),e.jsx("div",{style:{fontSize:"0.9rem",color:"#64748b"},children:"Active Listings"})]}),e.jsxs("div",{className:"card",style:{padding:"1.5rem",textAlign:"center",backgroundColor:"#f8fafc"},children:[e.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"var(--color-primary)"},children:[...new Set(i.map(r=>(r.commodity||"").toLowerCase().trim()).filter(Boolean))].length}),e.jsx("div",{style:{fontSize:"0.9rem",color:"#64748b"},children:"Crops Listed"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"2rem"},children:[e.jsxs("div",{children:[e.jsx("h4",{style:{marginBottom:"1rem",borderBottom:"1px solid #eee",paddingBottom:"0.5rem"},children:"Top Commodities"}),(()=>{const r={};return i.forEach(t=>{const o=t.commodity||"Unknown";r[o]=(r[o]||0)+1}),Object.entries(r).sort((t,o)=>o[1]-t[1]).slice(0,10).map(([t,o])=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px 0",borderBottom:"1px solid #f1f5f9"},children:[e.jsx("span",{children:t}),e.jsx("span",{style:{fontWeight:"bold"},children:o})]},t))})()]}),e.jsxs("div",{children:[e.jsx("h4",{style:{marginBottom:"1rem",borderBottom:"1px solid #eee",paddingBottom:"0.5rem"},children:"User Engagement"}),(()=>{const r={};return i.forEach(t=>{t.contactMobile&&(r[t.contactMobile]||(r[t.contactMobile]={name:t.seller||"Anonymous",count:0}),r[t.contactMobile].count++)}),Object.entries(r).sort((t,o)=>o[1].count-t[1].count).slice(0,10).map(([t,o])=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",padding:"8px 0",borderBottom:"1px solid #f1f5f9"},children:[e.jsxs("span",{children:[o.name," ",e.jsxs("span",{style:{fontSize:"0.8rem",color:"#64748b"},children:["(",t,")"]})]}),e.jsxs("span",{style:{fontWeight:"bold"},children:[o.count," Posts"]})]},t))})()]})]})]}):e.jsxs("div",{children:[e.jsxs("div",{style:{padding:"10px 15px",borderBottom:"1px solid #eee",display:"flex",justifyContent:"space-between",backgroundColor:"#f8fafc"},children:[e.jsx("span",{style:{fontWeight:"bold",fontSize:"0.9rem"},children:"Recent Help Requests"}),d.length>0&&e.jsx("button",{onClick:B,style:{color:"#dc2626",fontSize:"0.8rem",background:"none",border:"none",cursor:"pointer"},children:"Clear All"})]}),d.length===0?e.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#666"},children:"No help requests yet."}):e.jsx("div",{style:{display:"flex",flexDirection:"column"},children:f(d).map((r,t)=>e.jsxs("div",{style:{padding:"12px 15px",borderBottom:t===d.length-1?"none":"1px solid #f1f5f9",transition:"background 0.2s"},onMouseOver:o=>o.currentTarget.style.backgroundColor="#f8fafc",onMouseOut:o=>o.currentTarget.style.backgroundColor="transparent",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[e.jsxs("span",{style:{fontWeight:"700",fontSize:"0.95rem"},children:[r.name," ",e.jsxs("span",{style:{fontWeight:"normal",fontSize:"0.8rem",color:"#64748b"},children:["(ðŸ“± ",r.mobile,")"]}),e.jsx("span",{style:{marginLeft:"10px",backgroundColor:"var(--color-primary)",color:"white",padding:"2px 8px",borderRadius:"12px",fontSize:"0.7rem"},children:r.topic})]}),e.jsx("span",{style:{fontSize:"0.75rem",color:"#94a3b8"},children:r.timestamp})]}),e.jsx("p",{style:{margin:0,fontSize:"0.9rem",color:"#334155",lineHeight:"1.4"},children:r.message})]},r.id))})]})})]}):e.jsx("div",{className:"container",style:{padding:"4rem 0",maxWidth:"400px"},children:e.jsxs("div",{className:"card",style:{textAlign:"center"},children:[e.jsx("h2",{style:{marginBottom:"1.5rem"},children:"Admin Access Only"}),e.jsxs("form",{onSubmit:C,children:[e.jsx("input",{type:"password",placeholder:"Enter Admin Password",value:j,onChange:r=>S(r.target.value),style:{width:"100%",padding:"0.8rem",marginBottom:"1rem",borderRadius:"8px",border:"1px solid #ccc"}}),e.jsx("button",{type:"submit",className:"btn btn-primary",style:{width:"100%",padding:"0.8rem"},children:"Login to Dashboard"})]}),e.jsx("p",{style:{marginTop:"1rem",fontSize:"0.8rem",color:"#888"},children:"Hint: admin123"}),e.jsx(v,{to:"/",style:{display:"block",marginTop:"1rem",color:"var(--color-primary)"},children:"Back to Home"})]})})};export{I as default};
