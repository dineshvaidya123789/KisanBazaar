import{r,q as v,b as S,v as O,j as e}from"./index-1c33b312.js";const B=()=>{var c,m;const[p,a]=r.useState(1),[n,g]=r.useState(""),[l,x]=r.useState(""),[d,s]=r.useState(""),[i,o]=r.useState(!1),{login:u}=v(),h=S(),y=((m=(c=O().state)==null?void 0:c.from)==null?void 0:m.pathname)||"/",f=t=>{if(t.preventDefault(),n.length!==10){s("Please enter a valid 10-digit number.");return}o(!0),setTimeout(()=>{o(!1),a(2),s("")},800)},b=async t=>{t.preventDefault(),o(!0),s("");try{await u(n,l),h(y,{replace:!0})}catch(j){s(j)}finally{o(!1)}};return e.jsx("div",{className:"container fade-in",style:{padding:"var(--spacing-xl) 0",display:"flex",justifyContent:"center",alignItems:"center",minHeight:"60vh"},children:e.jsxs("div",{className:"card",style:{maxWidth:"400px",width:"100%",padding:"2rem"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[e.jsx("h1",{style:{color:"var(--color-primary)"},children:"Sign In / लॉग इन"}),e.jsx("p",{style:{color:"#666"},children:"Access exclusive farmer features."})]}),d&&e.jsx("div",{style:{backgroundColor:"#ffebee",color:"#c62828",padding:"0.8rem",borderRadius:"4px",marginBottom:"1rem",textAlign:"center"},children:d}),p===1?e.jsxs("form",{onSubmit:f,children:[e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:"Phone Number (मोबाइल नंबर)"}),e.jsxs("div",{style:{display:"flex"},children:[e.jsx("span",{style:{padding:"0.8rem",backgroundColor:"#f0f0f0",border:"1px solid #ccc",borderRight:"none",borderRadius:"4px 0 0 4px",color:"#555"},children:"+91"}),e.jsx("input",{type:"tel",value:n,onChange:t=>g(t.target.value.replace(/\D/g,"")),placeholder:"Enter 10 digit number",maxLength:"10",style:{flex:1,padding:"0.8rem",borderRadius:"0 4px 4px 0",border:"1px solid #ccc",fontSize:"1rem"},required:!0})]})]}),e.jsx("button",{type:"submit",className:"btn btn-primary",style:{width:"100%",fontSize:"1.1rem",padding:"1rem"},disabled:i,children:i?"Sending OTP...":"Get OTP (ओटीपी भेजें)"})]}):e.jsxs("form",{onSubmit:b,children:[e.jsxs("p",{style:{textAlign:"center",marginBottom:"1rem",color:"#555"},children:["We sent an OTP to ",e.jsxs("strong",{children:["+91 ",n]}),e.jsx("br",{}),e.jsx("span",{style:{fontSize:"0.8rem",color:"var(--color-primary)",cursor:"pointer",textDecoration:"underline"},onClick:()=>a(1),children:"Change Number"})]}),e.jsxs("div",{style:{marginBottom:"1.5rem"},children:[e.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"bold"},children:"Enter OTP (ओटीपी डालें)"}),e.jsx("input",{type:"text",value:l,onChange:t=>x(t.target.value),placeholder:"e.g. 1234",style:{width:"100%",padding:"0.8rem",borderRadius:"4px",border:"1px solid #ccc",fontSize:"1.2rem",textAlign:"center",letterSpacing:"5px"},required:!0}),e.jsx("div",{style:{textAlign:"center",marginTop:"0.5rem",fontSize:"0.85rem",color:"#888"},children:"(Use mock OTP: 1234)"})]}),e.jsx("button",{type:"submit",className:"btn btn-primary",style:{width:"100%",fontSize:"1.1rem",padding:"1rem"},disabled:i,children:i?"Verifying...":"Verify & Login"})]})]})})};export{B as default};
