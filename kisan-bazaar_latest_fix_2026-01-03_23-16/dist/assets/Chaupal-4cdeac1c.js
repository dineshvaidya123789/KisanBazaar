import{q as E,r as n,j as e}from"./index-1c33b312.js";const O=()=>{const{user:d,login:z}=E(),A=[{id:1,author:"Ram Lal",district:"Ujjain",question:"My wheat crop leaves are turning yellow. What should I do?",questionHindi:"à¤®à¥‡à¤°à¥‡ à¤—à¥‡à¤¹à¥‚à¤‚ à¤•à¥‡ à¤ªà¤¤à¥à¤¤à¥‡ à¤ªà¥€à¤²à¥‡ à¤ªà¤¡à¤¼ à¤°à¤¹à¥‡ à¤¹à¥ˆà¤‚à¥¤ à¤®à¥à¤à¥‡ à¤•à¥à¤¯à¤¾ à¤•à¤°à¤¨à¤¾ à¤šà¤¾à¤¹à¤¿à¤?",likes:12,replies:[{id:101,author:"Dr. Singh (Agri Expert)",text:"Check for nitrogen deficiency. Apply urea if needed.",textHindi:"à¤¨à¤¾à¤‡à¤Ÿà¥à¤°à¥‹à¤œà¤¨ à¤•à¥€ à¤•à¤®à¥€ à¤•à¥€ à¤œà¤¾à¤à¤š à¤•à¤°à¥‡à¤‚à¥¤ à¤†à¤µà¤¶à¥à¤¯à¤•à¤¤à¤¾ à¤¹à¥‹ à¤¤à¥‹ à¤¯à¥‚à¤°à¤¿à¤¯à¤¾ à¤¡à¤¾à¤²à¥‡à¤‚à¥¤"},{id:102,author:"Shyam",text:"It could also be due to over-watering.",textHindi:"à¤¯à¤¹ à¤…à¤§à¤¿à¤• à¤ªà¤¾à¤¨à¥€ à¤¦à¥‡à¤¨à¥‡ à¤•à¥‡ à¤•à¤¾à¤°à¤£ à¤­à¥€ à¤¹à¥‹ à¤¸à¤•à¤¤à¤¾ à¤¹à¥ˆà¥¤"}],timestamp:"2 hours ago"},{id:2,author:"Mohan Patel",district:"Indore",question:"What is the best time to sow soybean in Malwa region?",questionHindi:"à¤®à¤¾à¤²à¤µà¤¾ à¤•à¥à¤·à¥‡à¤¤à¥à¤° à¤®à¥‡à¤‚ à¤¸à¥‹à¤¯à¤¾à¤¬à¥€à¤¨ à¤¬à¥‹à¤¨à¥‡ à¤•à¤¾ à¤¸à¤¬à¤¸à¥‡ à¤…à¤šà¥à¤›à¤¾ à¤¸à¤®à¤¯ à¤•à¥à¤¯à¤¾ à¤¹à¥ˆ?",likes:8,replies:[],timestamp:"5 hours ago"}],[o,l]=n.useState([]),[u,f]=n.useState(""),[B,m]=n.useState(!1),[x,j]=n.useState(null),[v,Q]=n.useState(5),[g,k]=n.useState(""),[h,y]=n.useState(null),[S,b]=n.useState(null),[D,c]=n.useState(!1),[w,C]=n.useState(""),[R,I]=n.useState(""),[N,L]=n.useState(!1),T=(t,i=!1)=>{const r=t.target.files[0];if(r){const s=new FileReader;s.onloadend=()=>{i?b(s.result):y(s.result)},s.readAsDataURL(r)}};n.useEffect(()=>{const t=localStorage.getItem("kisan_chaupal_questions");if(t){const i=JSON.parse(t);l(i.sort((r,s)=>s.id-r.id))}else l(A.sort((i,r)=>r.id-i.id))},[]),n.useEffect(()=>{o.length>0&&localStorage.setItem("kisan_chaupal_questions",JSON.stringify(o))},[o]);const H=async t=>{t.preventDefault();try{await z(w,R),c(!1),C(""),I("")}catch(i){alert(i)}},a=()=>d?!0:(c(!0),!1),M=t=>{if(t.preventDefault(),!a()||!u.trim())return;const r=[{id:Date.now(),author:d.name,district:d.village||"Madhya Pradesh",question:u,questionHindi:"",image:h,likes:0,replies:[],timestamp:"Just Now"},...o];l(r),f(""),y(null),m(!1)},P=(t,i)=>{if(!a())return;const r=o.map(s=>s.id===t?{...s,likes:s.likes+1}:s);l(r)},W=(t,i)=>{if(t.preventDefault(),!a()||!g.trim())return;const r={id:Date.now(),author:d.name,text:g,image:S,textHindi:""},s=o.map(p=>p.id===i?{...p,replies:[r,...p.replies]}:p);l(s),k(""),b(null),j(null)},U=t=>{window.confirm("Are you sure you want to delete this question?")&&l(o.filter(i=>i.id!==t))};return e.jsxs("div",{className:"container fade-in",style:{padding:"2rem 1rem",maxWidth:"800px",margin:"0 auto",minHeight:"80vh"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[e.jsx("h1",{style:{color:"var(--color-primary)",marginBottom:"0.5rem"},children:"Kisan Chaupal (à¤•à¤¿à¤¸à¤¾à¤¨ à¤šà¥Œà¤ªà¤¾à¤²)"}),e.jsxs("p",{style:{color:"#666",fontSize:"1.1rem"},children:["Ask questions, share knowledge, and help fellow farmers.",e.jsx("br",{}),"(à¤ªà¥à¤°à¤¶à¥à¤¨ à¤ªà¥‚à¤›à¥‡à¤‚, à¤œà¥à¤žà¤¾à¤¨ à¤¸à¤¾à¤à¤¾ à¤•à¤°à¥‡à¤‚ à¤”à¤° à¤¸à¤¾à¤¥à¥€ à¤•à¤¿à¤¸à¤¾à¤¨à¥‹à¤‚ à¤•à¥€ à¤®à¤¦à¤¦ à¤•à¤°à¥‡à¤‚)"]}),e.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"center",marginTop:"10px"},children:[e.jsx("button",{className:"btn btn-outline",onClick:()=>{localStorage.removeItem("kisan_chaupal_questions"),window.location.reload()},style:{fontSize:"0.8rem"},children:"âš ï¸ Reset Demo Data"}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"5px",fontSize:"0.9rem",cursor:"pointer",userSelect:"none"},children:[e.jsx("input",{type:"checkbox",checked:N,onChange:t=>L(t.target.checked)}),"ðŸ›¡ï¸ Admin Mode"]})]})]}),e.jsx("div",{style:{marginBottom:"2rem",textAlign:"center"},children:B?e.jsxs("form",{onSubmit:M,className:"card fade-in",style:{textAlign:"left",padding:"1.5rem",border:"2px solid var(--color-primary)"},children:[e.jsx("h3",{style:{marginTop:0,color:"var(--color-primary)"},children:"New Question"}),e.jsx("textarea",{value:u,onChange:t=>f(t.target.value),placeholder:"Type your question here... (à¤…à¤ªà¤¨à¤¾ à¤ªà¥à¤°à¤¶à¥à¤¨ à¤¯à¤¹à¤¾à¤ à¤²à¤¿à¤–à¥‡à¤‚...)",style:{width:"100%",padding:"1rem",borderRadius:"8px",border:"1px solid #ddd",minHeight:"100px",marginBottom:"1rem",fontSize:"1rem"},required:!0}),e.jsxs("div",{style:{marginBottom:"1rem"},children:[e.jsx("label",{style:{display:"block",fontSize:"0.9rem",marginBottom:"5px"},children:"ðŸ“· Upload Image (Optional)"}),e.jsx("input",{type:"file",accept:"image/*",onChange:t=>T(t,!1),style:{fontSize:"0.9rem"}}),h&&e.jsxs("div",{style:{marginTop:"10px"},children:[e.jsx("img",{src:h,alt:"Preview",style:{width:"100px",height:"100px",objectFit:"cover",borderRadius:"4px"}}),e.jsx("button",{type:"button",onClick:()=>y(null),style:{display:"block",color:"red",fontSize:"0.8rem",background:"none",border:"none",cursor:"pointer",marginTop:"5px"},children:"Remove"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:()=>m(!1),className:"btn btn-outline",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Post Question"})]})]}):e.jsx("button",{onClick:()=>a()&&m(!0),className:"btn btn-primary",style:{fontSize:"1.1rem",padding:"0.8rem 2rem",borderRadius:"30px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:"âž• Ask a Question (à¤ªà¥à¤°à¤¶à¥à¤¨ à¤ªà¥‚à¤›à¥‡à¤‚)"})}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[o.slice(0,v).map(t=>e.jsxs("div",{className:"card",style:{padding:"0",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"1.5rem"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem",fontSize:"0.9rem",color:"#666"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsxs("span",{style:{fontWeight:"bold",color:"#333"},children:["ðŸ‘¤ ",t.author]}),e.jsxs("span",{children:["ðŸ“ ",t.district]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsxs("span",{children:["ðŸ•’ ",t.timestamp]}),N&&e.jsx("button",{onClick:()=>U(t.id),style:{background:"red",color:"white",border:"none",borderRadius:"4px",padding:"2px 8px",cursor:"pointer"},children:"Delete"})]})]}),e.jsx("h3",{style:{fontSize:"1.2rem",marginBottom:"0.5rem",color:"#222"},children:t.question}),t.questionHindi&&e.jsx("p",{className:"text-hindi",style:{fontSize:"1.1rem",color:"#555",marginBottom:"1rem"},children:t.questionHindi}),t.image&&e.jsx("div",{style:{marginTop:"0.5rem",marginBottom:"1rem"},children:e.jsx("img",{src:t.image,alt:"User Upload",style:{maxWidth:"100%",maxHeight:"400px",objectFit:"contain",borderRadius:"8px",border:"1px solid #eee",backgroundColor:"#f8f9fa"}})}),e.jsxs("div",{style:{display:"flex",gap:"1rem",borderTop:"1px solid #eee",paddingTop:"1rem",marginTop:"1rem"},children:[e.jsxs("button",{onClick:()=>P(t.id),className:"btn-outline",style:{border:"none",padding:"0.5rem",display:"flex",alignItems:"center",gap:"5px",cursor:"pointer",backgroundColor:t.likes>0?"#e8f5e9":"transparent",color:t.likes>0?"green":"inherit"},children:["ðŸ‘ ",t.likes," Likes"]}),e.jsxs("button",{className:"btn-outline",style:{border:"none",padding:"0.5rem",display:"flex",alignItems:"center",gap:"5px"},children:["ðŸ’¬ ",t.replies.length," Replies"]}),e.jsxs("button",{onClick:()=>a()&&j(x===t.id?null:t.id),className:"btn-outline",style:{border:"none",padding:"0.5rem",marginLeft:"auto",display:"flex",alignItems:"center",gap:"5px",color:"var(--color-primary)",cursor:"pointer"},children:["â†©ï¸ ",x===t.id?"Cancel Reply":"Reply"]})]}),x===t.id&&e.jsxs("div",{style:{marginTop:"1rem"},children:[e.jsxs("form",{onSubmit:i=>W(i,t.id),style:{display:"flex",gap:"10px"},children:[e.jsx("input",{type:"text",value:g,onChange:i=>k(i.target.value),placeholder:"Write a reply...",style:{flex:1,padding:"0.5rem",borderRadius:"4px",border:"1px solid #ddd"},required:!0,autoFocus:!0}),e.jsxs("label",{style:{cursor:"pointer",fontSize:"1.2rem",padding:"0 5px"},title:"Upload Image",children:["ðŸ“·",e.jsx("input",{type:"file",accept:"image/*",onChange:i=>T(i,!0),style:{display:"none"}})]}),e.jsx("button",{type:"submit",className:"btn btn-primary",style:{padding:"0.5rem 1rem"},children:"Post"})]}),S&&e.jsxs("div",{style:{marginTop:"5px",marginLeft:"10px"},children:[e.jsx("span",{style:{fontSize:"0.8rem",color:"green"},children:"Image selected"}),e.jsx("button",{type:"button",onClick:()=>b(null),style:{marginLeft:"10px",color:"red",border:"none",background:"none",cursor:"pointer"},children:"âŒ"})]})]})]}),t.replies.length>0&&e.jsx("div",{style:{backgroundColor:"#f9f9f9",padding:"1rem 1.5rem",borderTop:"1px solid #eee"},children:t.replies.map(i=>e.jsxs("div",{style:{marginBottom:"1rem",paddingBottom:"1rem",borderBottom:"1px solid #eee"},children:[e.jsx("div",{style:{fontSize:"0.85rem",fontWeight:"bold",color:"var(--color-secondary)",marginBottom:"0.2rem"},children:i.author}),e.jsx("div",{style:{fontSize:"0.95rem"},children:i.text}),i.image&&e.jsx("div",{style:{marginTop:"8px"},children:e.jsx("img",{src:i.image,alt:"Reply Upload",style:{width:"100%",maxWidth:"300px",height:"auto",borderRadius:"8px",border:"1px solid #ddd",boxShadow:"0 2px 4px rgba(0,0,0,0.05)"}})}),i.textHindi&&e.jsx("div",{className:"text-hindi",style:{fontSize:"0.9rem",color:"#666"},children:i.textHindi})]},i.id))})]},t.id)),o.length>v&&e.jsx("button",{onClick:()=>Q(t=>t+5),className:"btn btn-outline",style:{margin:"1rem auto",display:"block"},children:"Load More Questions (â¬‡ï¸)"})]}),D&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.8)",zIndex:3e3,display:"flex",alignItems:"center",justifyContent:"center",padding:"20px"},onClick:()=>c(!1),children:e.jsxs("div",{style:{backgroundColor:"white",padding:"2rem",borderRadius:"12px",maxWidth:"400px",width:"100%",textAlign:"center"},onClick:t=>t.stopPropagation(),children:[e.jsx("h2",{children:"Login Required"}),e.jsxs("p",{style:{color:"#666",marginBottom:"1.5rem"},children:["Please login to ask questions or reply.",e.jsx("br",{}),"(à¤•à¥ƒà¤ªà¤¯à¤¾ à¤ªà¥à¤°à¤¶à¥à¤¨ à¤ªà¥‚à¤›à¤¨à¥‡ à¤¯à¤¾ à¤‰à¤¤à¥à¤¤à¤° à¤¦à¥‡à¤¨à¥‡ à¤•à¥‡ à¤²à¤¿à¤ à¤²à¥‰à¤— à¤‡à¤¨ à¤•à¤°à¥‡à¤‚)"]}),e.jsxs("form",{onSubmit:H,style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[e.jsx("input",{type:"tel",placeholder:"Mobile Number",value:w,onChange:t=>C(t.target.value),style:{padding:"10px",borderRadius:"4px",border:"1px solid #ccc"},required:!0}),e.jsx("input",{type:"password",placeholder:"OTP (Enter 1234)",value:R,onChange:t=>I(t.target.value),style:{padding:"10px",borderRadius:"4px",border:"1px solid #ccc"},required:!0}),e.jsx("button",{type:"submit",className:"btn btn-primary",style:{padding:"10px"},children:"Login"})]}),e.jsx("button",{style:{marginTop:"1rem",background:"none",border:"none",color:"#666",cursor:"pointer",textDecoration:"underline"},onClick:()=>c(!1),children:"Cancel"})]})})]})};export{O as default};
